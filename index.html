<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Chart.js CDN for advanced analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Advanced Price Transparency - Healthcare Revenue Optimization</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3c72;
        }
        
        /* Additional styles omitted for brevity */
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 2.5rem 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* Additional styles omitted for brevity */
        
        .footer {
            background: #1e3c72;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }
        
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
        
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            /* Additional styles omitted for brevity */
        }
    </style>
</head>
<body>
    <!-- Biometric Login Screen -->
    <div id="biometricLoginScreen" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(30,60,114,0.97);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;">
        <h1 style="font-size:2.5rem;margin-bottom:2rem;">MedPact Secure Biometric Login</h1>
        <p style="margin-bottom:2rem;">Authenticate with fingerprint or facial recognition to access your practice account.</p>
        <button onclick="simulateBiometricLogin()" class="btn btn-primary" style="font-size:1.5rem;">Login with Biometrics</button>
        <div id="biometricStatus" style="margin-top:2rem;"></div>
    </div>
    <script>
    function simulateBiometricLogin() {
        document.getElementById('biometricStatus').innerText = 'Authenticating...';
        setTimeout(() => {
            document.getElementById('biometricLoginScreen').style.display = 'none';
            document.getElementById('entryScreen').style.display = 'flex';
            showNotification('Biometric authentication successful. Welcome!', 'success');
        }, 1500);
    }
    window.onload = function() {
        document.getElementById('entryScreen').style.display = 'none';
    };
    </script>
        <!-- Regulatory Compliance Dashboard Modal -->
        <div id="complianceDashboardModal" class="modal" style="display:none;z-index:5600;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeComplianceDashboardModal()" aria-label="Close">&times;</span>
                <h2>Regulatory Compliance Dashboard</h2>
                <p>Automated compliance checks for HIPAA, CMS, and state regulations. View audit logs and generate reports.</p>
                <form id="complianceForm" onsubmit="submitComplianceCheck(event)">
                    <label for="complianceType">Compliance Type:</label>
                    <select id="complianceType" name="complianceType" required>
                        <option value="hipaa">HIPAA</option>
                        <option value="cms">CMS</option>
                        <option value="state">State Regulation</option>
                    </select><br><br>
                    <button type="submit" class="btn btn-primary">Run Compliance Check</button>
                </form>
                <div id="complianceResult" style="margin-top:2rem;"></div>
                <button onclick="generateComplianceReport()" class="btn btn-secondary" style="margin-top:2rem;">Generate Report</button>
                <div id="complianceReport" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Smart Alerts & Recommendations Modal -->
        <div id="smartAlertsModal" class="modal" style="display:none;z-index:5500;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeSmartAlertsModal()" aria-label="Close">&times;</span>
                <h2>Smart Alerts & Recommendations</h2>
                <p>Proactive alerts for contract deviations, market shifts, and renegotiation opportunities.</p>
                <form id="smartAlertsForm" onsubmit="submitSmartAlerts(event)">
                    <label for="alertType">Alert Type:</label>
                    <select id="alertType" name="alertType" required>
                        <option value="deviation">Contract Deviation</option>
                        <option value="market">Market Shift</option>
                        <option value="renegotiation">Renegotiation Opportunity</option>
                    </select><br><br>
                    <label for="alertDetails">Details:</label>
                    <textarea id="alertDetails" name="alertDetails" rows="3" required></textarea><br><br>
                    <button type="submit" class="btn btn-primary">Send Alert</button>
                </form>
                <div id="smartAlertsResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Care Pathway Optimization Engine Modal -->
        <div id="carePathwayModal" class="modal" style="display:none;z-index:5400;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeCarePathwayModal()" aria-label="Close">&times;</span>
                <h2>Care Pathway Optimization Engine</h2>
                <p>Suggest evidence-based care protocols, track provider adherence, and measure impact on cost and outcomes.</p>
                <form id="carePathwayForm" onsubmit="submitCarePathway(event)">
                    <label for="pathwayName">Protocol Name:</label>
                    <input type="text" id="pathwayName" name="pathwayName" required><br><br>
                    <label for="adherence">Adherence (%):</label>
                    <input type="number" id="adherence" name="adherence" min="0" max="100" required><br><br>
                    <label for="impact">Impact on Cost/Outcome:</label>
                    <input type="text" id="impact" name="impact" required><br><br>
                    <button type="submit" class="btn btn-primary">Track Protocol</button>
                </form>
                <div id="carePathwayResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Collaboration Workspace Modal -->
        <div id="collabWorkspaceModal" class="modal" style="display:none;z-index:5300;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeCollabWorkspaceModal()" aria-label="Close">&times;</span>
                <h2>Collaboration Workspace</h2>
                <p>Real-time chat, document sharing, and e-signature for joint contract design and monitoring.</p>
                <form id="collabChatForm" onsubmit="submitCollabChat(event)">
                    <label for="chatMessage">Send Message:</label>
                    <input type="text" id="chatMessage" name="chatMessage" required>
                    <button type="submit" class="btn btn-primary">Send</button>
                </form>
                <div id="collabChatLog" style="margin-top:2rem;max-height:200px;overflow-y:auto;"></div>
                <form id="collabDocForm" onsubmit="submitCollabDoc(event)">
                    <label for="docUpload">Share Document:</label>
                    <input type="file" id="docUpload" name="docUpload" accept=".pdf,.doc,.docx,.xls,.xlsx,.csv">
                    <button type="submit" class="btn btn-secondary">Share</button>
                </form>
                <div id="collabDocLog" style="margin-top:2rem;"></div>
                <button onclick="signContract()" class="btn btn-success" style="margin-top:2rem;">E-Sign Contract</button>
                <div id="collabSignLog" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- API & Integration Layer Modal -->
        <div id="apiIntegrationModal" class="modal" style="display:none;z-index:5200;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeApiIntegrationModal()" aria-label="Close">&times;</span>
                <h2>API & Integration Layer</h2>
                <p>Integrate with EHR, PM, and payer claim systems for real-time data exchange and automated payment routing.</p>
                <form id="apiIntegrationForm" onsubmit="submitApiIntegration(event)">
                    <label for="integrationType">Integration Type:</label>
                    <select id="integrationType" name="integrationType" required>
                        <option value="ehr">EHR</option>
                        <option value="pm">Practice Management</option>
                        <option value="payer">Payer Claim System</option>
                    </select><br><br>
                    <label for="integrationVendor">Vendor Name:</label>
                    <input type="text" id="integrationVendor" name="integrationVendor" required><br><br>
                    <button type="submit" class="btn btn-primary">Connect</button>
                </form>
                <div id="apiIntegrationResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Role-Based Mobile Experience Modal -->
        <div id="mobileExperienceModal" class="modal" style="display:none;z-index:5100;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeMobileExperienceModal()" aria-label="Close">&times;</span>
                <h2>Role-Based Mobile Experience</h2>
                <p>Mobile-optimized dashboards and workflows for contract leads, physicians, and admins. Push notifications for critical events.</p>
                <form id="mobileRoleForm" onsubmit="submitMobileRole(event)">
                    <label for="mobileRole">Select Role:</label>
                    <select id="mobileRole" name="mobileRole" required>
                        <option value="admin">Admin</option>
                        <option value="physician">Physician</option>
                        <option value="contract">Contract Lead</option>
                    </select><br><br>
                    <button type="submit" class="btn btn-primary">Show Mobile Dashboard</button>
                </form>
                <div id="mobileDashboard" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Network Benchmarking Marketplace Modal -->
        <div id="benchmarkMarketplaceModal" class="modal" style="display:none;z-index:5000;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeBenchmarkMarketplaceModal()" aria-label="Close">&times;</span>
                <h2>Network Benchmarking Marketplace</h2>
                <p>Opt-in to share anonymized contract and payment data. Grow a network dataset for richer benchmarking and negotiation leverage.</p>
                <form id="benchmarkMarketplaceForm" onsubmit="submitBenchmarkMarketplace(event)">
                    <label for="marketplaceOptIn">Opt-In to Data Sharing:</label>
                    <select id="marketplaceOptIn" name="marketplaceOptIn" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select><br><br>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
                <div id="benchmarkMarketplaceResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Automated Dispute Resolution Workflow Modal -->
        <div id="disputeResolutionModal" class="modal" style="display:none;z-index:4900;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeDisputeResolutionModal()" aria-label="Close">&times;</span>
                <h2>Automated Dispute Resolution</h2>
                <p>Flag, track, and resolve payment/contract disputes. Includes messaging and audit trail.</p>
                <form id="disputeForm" onsubmit="submitDispute(event)">
                    <label for="disputeType">Dispute Type:</label>
                    <select id="disputeType" name="disputeType" required>
                        <option value="payment">Payment</option>
                        <option value="contract">Contract</option>
                    </select><br><br>
                    <label for="disputeDetails">Details:</label>
                    <textarea id="disputeDetails" name="disputeDetails" rows="3" required></textarea><br><br>
                    <button type="submit" class="btn btn-primary">Flag Dispute</button>
                </form>
                <div id="disputeMessages" style="margin-top:2rem;"></div>
                <div id="disputeAuditTrail" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Macro-Economic Index Adjustment Modal -->
        <div id="macroEconomicModal" class="modal" style="display:none;z-index:4800;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeMacroEconomicModal()" aria-label="Close">&times;</span>
                <h2>Macro-Economic Index Adjustment</h2>
                <p>Automatically adjust contract terms and payment models based on real-time economic indicators (inflation, interest rates, regional cost trends).</p>
                <form id="macroEconomicForm" onsubmit="submitMacroEconomic(event)">
                    <label for="indicatorType">Indicator Type:</label>
                    <select id="indicatorType" name="indicatorType" required>
                        <option value="inflation">Inflation</option>
                        <option value="interest">Interest Rate</option>
                        <option value="regional">Regional Cost Trend</option>
                    </select><br><br>
                    <label for="currentValue">Current Value:</label>
                    <input type="number" id="currentValue" name="currentValue" required><br><br>
                    <button type="submit" class="btn btn-primary">Adjust Contract</button>
                </form>
                <div id="macroEconomicResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Predictive Analytics Dashboard Modal -->
        <div id="predictiveAnalyticsModal" class="modal" style="display:none;z-index:4600;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closePredictiveAnalyticsModal()" aria-label="Close">&times;</span>
                <h2>AI-Powered Predictive Analytics</h2>
                <p>Forecast contract performance, payment delays, denial trends, and cost savings. Get actionable recommendations.</p>
                <form id="predictiveForm" onsubmit="submitPredictiveAnalytics(event)">
                    <label for="predictiveType">Prediction Type:</label>
                    <select id="predictiveType" name="predictiveType" required>
                        <option value="contract">Contract Performance</option>
                        <option value="payment">Payment Delays</option>
                        <option value="denial">Denial Trends</option>
                        <option value="savings">Cost Savings</option>
                    </select><br><br>
                    <label for="predictiveInput">Input Data (CSV/JSON):</label>
                    <input type="file" id="predictiveInput" name="predictiveInput" accept=".csv,.json" required><br><br>
                    <button type="submit" class="btn btn-primary">Run Prediction</button>
                </form>
                <div id="predictiveResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- AI Voice Agent Modal -->
        <div id="aiVoiceModal" class="modal" style="display:none;z-index:4700;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeAIVoiceModal()" aria-label="Close">&times;</span>
                <h2>AI Voice Agent</h2>
                <p>Use voice commands to navigate and interact with platform features. Try: "Show predictive analytics", "Open contract execution", "Track cost savings".</p>
                <button onclick="startVoiceRecognition()" class="btn btn-primary">Start Voice Interaction</button>
                <div id="voiceTranscript" style="margin-top:2rem;"></div>
            </div>
        </div>
    <!-- Live Contract Execution Modal -->
    <div id="liveContractModal" class="modal" style="display:none;z-index:4500;">
        <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
            <span class="close" onclick="closeLiveContractModal()" aria-label="Close">&times;</span>
            <h2>Live Contract Execution</h2>
            <p>Track real-time contract payments, denials, and deviations. Smart alerts for underpayments and excess denials.</p>
            <form id="liveContractForm" onsubmit="submitLiveContract(event)">
                <label for="contractId">Contract ID:</label>
                <input type="text" id="contractId" name="contractId" required><br><br>
                <label for="paymentAmount">Payment Amount ($):</label>
                <input type="number" id="paymentAmount" name="paymentAmount" required><br><br>
                <label for="denials">Denials (#):</label>
                <input type="number" id="denials" name="denials" required><br><br>
                <button type="submit" class="btn btn-primary">Track Execution</button>
            </form>
            <div id="liveContractResult" style="margin-top:2rem;"></div>
        </div>
    </div>
    
    <div class="hero-buttons">
                <button onclick="showComplianceDashboardModal()" class="btn btn-compliance">üõ°Ô∏è Compliance Dashboard</button>
                <button onclick="showSmartAlertsModal()" class="btn btn-alerts">üîî Smart Alerts</button>
                <button onclick="showCarePathwayModal()" class="btn btn-pathway">üß¨ Care Pathway Optimization</button>
                <button onclick="showCollabWorkspaceModal()" class="btn btn-collab">ü§ù Collaboration Workspace</button>
                <button onclick="showApiIntegrationModal()" class="btn btn-api">üîó API & Integration</button>
                <button onclick="showMobileExperienceModal()" class="btn btn-mobile">üì± Mobile Experience</button>
                <button onclick="showBenchmarkMarketplaceModal()" class="btn btn-success">üåê Benchmarking Marketplace</button>
                <button onclick="showDisputeResolutionModal()" class="btn btn-danger">‚ö° Dispute Resolution</button>
                <button onclick="showMacroEconomicModal()" class="btn btn-warning">üìà Macro-Economic Adjustment</button>
                <button onclick="showPredictiveAnalyticsModal()" class="btn btn-info">üîÆ Predictive Analytics</button>
                <button onclick="showAIVoiceModal()" class="btn btn-secondary">üé§ AI Voice Agent</button>
        <button onclick="showLiveContractModal()" class="btn btn-alert">üü¢ Live Contract Execution</button>
    </div>
    
    <script>
    // Regulatory Compliance Dashboard logic
    function showComplianceDashboardModal() {
        document.getElementById('complianceDashboardModal').style.display = 'block';
        document.getElementById('complianceResult').innerHTML = '';
        document.getElementById('complianceReport').innerHTML = '';
    }
    function closeComplianceDashboardModal() {
        document.getElementById('complianceDashboardModal').style.display = 'none';
    }
    let complianceAudit = [];
    function submitComplianceCheck(event) {
        event.preventDefault();
        const type = document.getElementById('complianceType').value;
        const time = new Date().toLocaleString();
        let result = `<strong>Compliance Check Complete!</strong><br>`;
        if (type === 'hipaa') {
            result += 'HIPAA compliance verified. All PHI is encrypted and access is logged.';
        } else if (type === 'cms') {
            result += 'CMS compliance verified. Payment models meet CMS requirements.';
        } else if (type === 'state') {
            result += 'State regulation compliance verified. All contracts meet local requirements.';
        }
        complianceAudit.push({type, time, result});
        document.getElementById('complianceResult').innerHTML = result;
    }
    function generateComplianceReport() {
        let html = '<h4>Compliance Audit Log</h4><ul>';
        complianceAudit.forEach(c => {
            html += `<li>[${c.time}] ${c.type}: ${c.result}</li>`;
        });
        html += '</ul>';
        document.getElementById('complianceReport').innerHTML = html;
    }
    // Smart Alerts & Recommendations logic
    function showSmartAlertsModal() {
        document.getElementById('smartAlertsModal').style.display = 'block';
        document.getElementById('smartAlertsResult').innerHTML = '';
    }
    function closeSmartAlertsModal() {
        document.getElementById('smartAlertsModal').style.display = 'none';
    }
    function submitSmartAlerts(event) {
        event.preventDefault();
        const type = document.getElementById('alertType').value;
        const details = document.getElementById('alertDetails').value;
        let result = `<strong>Alert Sent!</strong><br>
            <b>Type:</b> ${type}<br>
            <b>Details:</b> ${details}<br>
            <span style='color:blue;'>Proactive notification delivered to relevant users.</span>`;
        document.getElementById('smartAlertsResult').innerHTML = result;
    }
    // Care Pathway Optimization Engine logic
    function showCarePathwayModal() {
        document.getElementById('carePathwayModal').style.display = 'block';
        document.getElementById('carePathwayResult').innerHTML = '';
    }
    function closeCarePathwayModal() {
        document.getElementById('carePathwayModal').style.display = 'none';
    }
    function submitCarePathway(event) {
        event.preventDefault();
        const name = document.getElementById('pathwayName').value;
        const adherence = parseFloat(document.getElementById('adherence').value);
        const impact = document.getElementById('impact').value;
        let result = `<strong>Protocol Tracked!</strong><br>
            <b>Name:</b> ${name}<br>
            <b>Adherence:</b> ${adherence}%<br>
            <b>Impact:</b> ${impact}<br>
            <span style='color:green;'>Care pathway optimization tracked and measured.</span>`;
        document.getElementById('carePathwayResult').innerHTML = result;
    }
    // Collaboration Workspace logic
    let collabChatMessages = [];
    let collabDocFiles = [];
    let contractSigned = false;
    function showCollabWorkspaceModal() {
        document.getElementById('collabWorkspaceModal').style.display = 'block';
        renderCollabChatLog();
        renderCollabDocLog();
        renderCollabSignLog();
    }
    function closeCollabWorkspaceModal() {
        document.getElementById('collabWorkspaceModal').style.display = 'none';
    }
    function submitCollabChat(event) {
        event.preventDefault();
        const msg = document.getElementById('chatMessage').value;
        collabChatMessages.push({msg, time: new Date().toLocaleTimeString()});
        document.getElementById('chatMessage').value = '';
        renderCollabChatLog();
    }
    function renderCollabChatLog() {
        let html = '<h4>Chat Log</h4><ul>';
        collabChatMessages.forEach(m => {
            html += `<li>[${m.time}] ${m.msg}</li>`;
        });
        html += '</ul>';
        document.getElementById('collabChatLog').innerHTML = html;
    }
    function submitCollabDoc(event) {
        event.preventDefault();
        const fileInput = document.getElementById('docUpload');
        if (fileInput.files.length > 0) {
            collabDocFiles.push(fileInput.files[0].name);
            renderCollabDocLog();
        }
    }
    function renderCollabDocLog() {
        let html = '<h4>Shared Documents</h4><ul>';
        collabDocFiles.forEach(f => {
            html += `<li>${f}</li>`;
        });
        html += '</ul>';
        document.getElementById('collabDocLog').innerHTML = html;
    }
    function signContract() {
        contractSigned = true;
        renderCollabSignLog();
    }
    function renderCollabSignLog() {
        let html = contractSigned ? '<span style="color:green;">Contract signed electronically!</span>' : '<span style="color:orange;">Contract not signed yet.</span>';
        document.getElementById('collabSignLog').innerHTML = html;
    }
    // API & Integration Layer logic
    function showApiIntegrationModal() {
        document.getElementById('apiIntegrationModal').style.display = 'block';
        document.getElementById('apiIntegrationResult').innerHTML = '';
    }
    function closeApiIntegrationModal() {
        document.getElementById('apiIntegrationModal').style.display = 'none';
    }
    function submitApiIntegration(event) {
        event.preventDefault();
        const type = document.getElementById('integrationType').value;
        const vendor = document.getElementById('integrationVendor').value;
        let result = `<strong>Integration Requested!</strong><br>Type: ${type}<br>Vendor: ${vendor}<br><span style='color:green;'>Connection will be established for real-time data exchange and payment routing.</span>`;
        document.getElementById('apiIntegrationResult').innerHTML = result;
    }
    // Role-Based Mobile Experience logic
    function showMobileExperienceModal() {
        document.getElementById('mobileExperienceModal').style.display = 'block';
        document.getElementById('mobileDashboard').innerHTML = '';
    }
    function closeMobileExperienceModal() {
        document.getElementById('mobileExperienceModal').style.display = 'none';
    }
    function submitMobileRole(event) {
        event.preventDefault();
        const role = document.getElementById('mobileRole').value;
        let dashboard = '';
        if (role === 'admin') {
            dashboard = '<strong>Admin Mobile Dashboard</strong><ul><li>System analytics</li><li>Audit logs</li><li>Compliance alerts</li></ul>';
        } else if (role === 'physician') {
            dashboard = '<strong>Physician Mobile Dashboard</strong><ul><li>Contract analysis</li><li>Revenue projections</li><li>Denial flags</li></ul>';
        } else if (role === 'contract') {
            dashboard = '<strong>Contract Lead Mobile Dashboard</strong><ul><li>Negotiation status</li><li>Payment alerts</li><li>Benchmark access</li></ul>';
        }
        dashboard += '<br><span style="color:green;">Push notifications enabled for critical events.</span>';
        document.getElementById('mobileDashboard').innerHTML = dashboard;
    }
    // Network Benchmarking Marketplace logic
    function showBenchmarkMarketplaceModal() {
        document.getElementById('benchmarkMarketplaceModal').style.display = 'block';
        document.getElementById('benchmarkMarketplaceResult').innerHTML = '';
    }
    function closeBenchmarkMarketplaceModal() {
        document.getElementById('benchmarkMarketplaceModal').style.display = 'none';
    }
    function submitBenchmarkMarketplace(event) {
        event.preventDefault();
        const optIn = document.getElementById('marketplaceOptIn').value;
        let result = '';
        if (optIn === 'yes') {
            result = '<strong>Thank you for joining the marketplace!</strong> Your anonymized data will help strengthen industry benchmarks.';
        } else {
            result = '<strong>You have opted out of data sharing.</strong> You can join anytime to access richer benchmarks.';
        }
        document.getElementById('benchmarkMarketplaceResult').innerHTML = result;
    }
    // Automated Dispute Resolution Workflow logic
    function showDisputeResolutionModal() {
        document.getElementById('disputeResolutionModal').style.display = 'block';
        document.getElementById('disputeMessages').innerHTML = '';
        document.getElementById('disputeAuditTrail').innerHTML = '';
    }
    function closeDisputeResolutionModal() {
        document.getElementById('disputeResolutionModal').style.display = 'none';
    }
    let disputeAudit = [];
    function submitDispute(event) {
        event.preventDefault();
        const type = document.getElementById('disputeType').value;
        const details = document.getElementById('disputeDetails').value;
        disputeAudit.push({type, details, time: new Date().toLocaleString()});
        document.getElementById('disputeMessages').innerHTML = `<strong>Dispute flagged:</strong> ${type} - ${details}`;
        renderDisputeAuditTrail();
    }
    function renderDisputeAuditTrail() {
        let html = '<h4>Audit Trail</h4><ul>';
        disputeAudit.forEach(d => {
            html += `<li>${d.time}: ${d.type} - ${d.details}</li>`;
        });
        html += '</ul>';
        document.getElementById('disputeAuditTrail').innerHTML = html;
    }
    // Macro-Economic Index Adjustment logic
    function showMacroEconomicModal() {
        document.getElementById('macroEconomicModal').style.display = 'block';
        document.getElementById('macroEconomicResult').innerHTML = '';
    }
    function closeMacroEconomicModal() {
        document.getElementById('macroEconomicModal').style.display = 'none';
    }
    function submitMacroEconomic(event) {
        event.preventDefault();
        const type = document.getElementById('indicatorType').value;
        const value = parseFloat(document.getElementById('currentValue').value);
        let result = `<strong>Adjustment Recommendation</strong><br>`;
        if (type === 'inflation') {
            result += `Inflation at ${value}%. Recommend increasing contract rates by ${(value * 0.7).toFixed(2)}%.`;
        } else if (type === 'interest') {
            result += `Interest rate at ${value}%. Recommend reviewing payment terms and risk corridors.`;
        } else if (type === 'regional') {
            result += `Regional cost trend at ${value}%. Recommend adjusting reimbursement for local market conditions.`;
        }
        document.getElementById('macroEconomicResult').innerHTML = result;
    }
    // Predictive Analytics logic
    function showPredictiveAnalyticsModal() {
        document.getElementById('predictiveAnalyticsModal').style.display = 'block';
        document.getElementById('predictiveResult').innerHTML = '';
    }
    function closePredictiveAnalyticsModal() {
        document.getElementById('predictiveAnalyticsModal').style.display = 'none';
    }
    function submitPredictiveAnalytics(event) {
        event.preventDefault();
        const type = document.getElementById('predictiveType').value;
        // Simulate AI prediction (demo)
        let result = `<strong>Prediction Complete!</strong><br>`;
        if (type === 'contract') {
            result += 'Forecast: Contract performance will improve by 12% next quarter. Recommendation: Focus on high-value TINs.';
        } else if (type === 'payment') {
            result += 'Forecast: Payment delays expected to decrease by 8 days. Recommendation: Automate billing workflows.';
        } else if (type === 'denial') {
            result += 'Forecast: Denial rates will drop 5%. Recommendation: Address top denial codes.';
        } else if (type === 'savings') {
            result += 'Forecast: Cost savings of $1.2M projected. Recommendation: Expand shared savings models.';
        }
        document.getElementById('predictiveResult').innerHTML = result;
    }
    // AI Voice Agent logic
    function showAIVoiceModal() {
        document.getElementById('aiVoiceModal').style.display = 'block';
        document.getElementById('voiceTranscript').innerHTML = '';
    }
    function closeAIVoiceModal() {
        document.getElementById('aiVoiceModal').style.display = 'none';
    }
    function startVoiceRecognition() {
        if (!('webkitSpeechRecognition' in window)) {
            document.getElementById('voiceTranscript').innerHTML = '<span style="color:red;">Voice recognition not supported in this browser.</span>';
            return;
        }
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = 'en-US';
        recognition.start();
        document.getElementById('voiceTranscript').innerHTML = '<em>Listening...</em>';
        recognition.onresult = function(event) {
            var transcript = event.results[0][0].transcript;
            document.getElementById('voiceTranscript').innerHTML = `<strong>Heard:</strong> ${transcript}`;
            // Simple command routing
            if (transcript.toLowerCase().includes('predictive')) {
                closeAIVoiceModal();
                showPredictiveAnalyticsModal();
            } else if (transcript.toLowerCase().includes('contract')) {
                closeAIVoiceModal();
                showLiveContractModal();
            } else if (transcript.toLowerCase().includes('cost savings')) {
                closeAIVoiceModal();
                openCostSavingsModal();
            } else if (transcript.toLowerCase().includes('simulator')) {
                closeAIVoiceModal();
                openSimulatorModal();
            } else {
                document.getElementById('voiceTranscript').innerHTML += '<br><span style="color:orange;">Command not recognized. Try: "Show predictive analytics", "Open contract execution", "Track cost savings".</span>';
            }
        };
        recognition.onerror = function(event) {
            document.getElementById('voiceTranscript').innerHTML = '<span style="color:red;">Voice recognition error.</span>';
        };
    }
        // Live Contract Execution logic
        function showLiveContractModal() {
            document.getElementById('liveContractModal').style.display = 'block';
            document.getElementById('liveContractResult').innerHTML = '';
        }
        function closeLiveContractModal() {
            document.getElementById('liveContractModal').style.display = 'none';
        }
        function submitLiveContract(event) {
            event.preventDefault();
            const contractId = document.getElementById('contractId').value;
            const payment = parseFloat(document.getElementById('paymentAmount').value);
            const denials = parseInt(document.getElementById('denials').value);
            let alertMsg = '';
            if (payment < 10000) {
                alertMsg += `<div class='alert-item contract-alert'><span class='alert-icon'>‚ö†Ô∏è</span> Underpayment detected for Contract ${contractId}!</div>`;
            }
            if (denials > 5) {
                alertMsg += `<div class='alert-item contract-alert'><span class='alert-icon'>üö®</span> Excess denials detected for Contract ${contractId}!</div>`;
            }
            let result = `<strong>Contract Execution Tracked!</strong><br>
                <b>Contract ID:</b> ${contractId}<br>
                <b>Payment Amount:</b> $${payment}<br>
                <b>Denials:</b> ${denials}<br>
                ${alertMsg || '<span style=\'color:green;\'>All metrics within expected range.</span>'}`;
            document.getElementById('liveContractResult').innerHTML = result;
        }
    </script>
    
    <!-- Additional content omitted for brevity -->
    
</body>
</html>
<head>
    <!-- Chart.js CDN for advanced analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Advanced Price Transparency - Healthcare Revenue Optimization</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e3c72;
        }

        .role-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(30, 60, 114, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid rgba(30, 60, 114, 0.2);
        }

        .role-selector label {
            font-weight: 600;
            color: #1e3c72;
            font-size: 0.9rem;
        }

        .role-selector select {
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
            color: #333;
            cursor: pointer;
            min-width: 180px;
        }

        .role-selector select:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 2px rgba(30, 60, 114, 0.1);
        }
        
        .nav-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #1e3c72;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2a5298;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: transparent;
            color: #1e3c72;
            border: 2px solid #1e3c72;
        }
        
        .btn-secondary:hover {
            background: #1e3c72;
            color: white;
        }
        
        .hero {
            padding: 4rem 2rem;
            text-align: center;
            color: white;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 2.5rem 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-marketing {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-marketing:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 3rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #4ecdc4;
            display: block;
        }
        
        .stat-label {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .stages-section {
            background: white;
            margin: -3rem 2rem 3rem;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .stages-title {
            text-align: center;
            font-size: 2.5rem;
            color: #1e3c72;
            margin-bottom: 3rem;
        }
        
        .stages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .stage-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 2rem;
            border-radius: 15px;
            border-left: 5px solid #4ecdc4;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        
        .stage-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }

        .stage-card.interactive:hover {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }

        .stage-card.active {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            border-left: 5px solid #fff;
        }

        .stage-card.completed {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            color: white;
            border-left: 5px solid #fff;
        }

        .stage-status {
            margin-top: 1rem;
            text-align: center;
        }

        .status-indicator {
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-indicator.ready {
            background: #4ecdc4;
            color: white;
        }

        .status-indicator.pending {
            background: #ffc107;
            color: #333;
        }

        .status-indicator.processing {
            background: #ff9800;
            color: white;
            animation: pulse 1.5s infinite;
        }

        .status-indicator.completed {
            background: #4caf50;
            color: white;
        }

        .stage-progress {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .process-control {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            text-align: center;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .export-share-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e1e5e9;
        }

        .export-share-section h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #333;
        }

        .export-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-export {
            background: linear-gradient(135deg, #ff7675 0%, #e84393 100%);
            color: white;
        }

        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 118, 117, 0.4);
        }

        .btn-share {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
        }

        .btn-share:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }

        .btn-slack {
            background: linear-gradient(135deg, #4a154b 0%, #350d36 100%);
            color: white;
        }

        .btn-slack:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 21, 75, 0.4);
        }

        .btn-presentation {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
        }

        .btn-presentation:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253, 203, 110, 0.4);
        }

        /* Alerts Section Styling */
        .alerts-section {
            padding: 4rem 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .alerts-dashboard {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .alerts-header {
            margin-bottom: 2rem;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 1rem;
        }

        .alert-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .alerts-container {
            margin-bottom: 2rem;
        }

        .alert-item {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #e1e5e9;
            border-left: 4px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .alert-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .alert-item.contract-alert {
            border-left-color: #667eea;
        }

        .alert-item.market-alert {
            border-left-color: #f093fb;
        }

        .alert-item.opportunity-alert {
            border-left-color: #4ecdc4;
        }

        .alert-icon {
            font-size: 2rem;
            margin-right: 1rem;
            width: 50px;
            text-align: center;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .alert-message {
            color: #666;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .alert-time {
            font-size: 0.9rem;
            color: #999;
        }

        .alert-actions {
            margin-left: 1rem;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .alert-summary {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .summary-item {
            text-align: center;
        }

        .summary-number {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
        }

        .summary-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        /* Integration Dashboard Styling */
        .integration-section {
            padding: 4rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .integration-section h2 {
            color: white !important;
        }

        .integration-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .integration-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            color: #333;
        }

        .integration-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            background: white;
        }

        .integration-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .integration-card h3 {
            color: #1e3c72;
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .integration-card p {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .integration-status {
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
        }

        .integration-status.connected {
            background: #d4edda;
            color: #155724;
        }

        .integration-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .integration-status.highlight {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .quick-actions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .quick-actions h3 {
            color: white;
        }

        .actions-grid {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-color: transparent;
        }

        .action-btn.primary:hover {
            background: linear-gradient(135deg, #44a08d 0%, #4ecdc4 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }

        .action-icon {
            font-size: 1.5rem;
        }

        /* Payer Dashboard Styling */
        .payer-dashboard {
            padding: 4rem 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .payer-dashboard h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .payer-metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .payer-metric-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #333;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .payer-metric-card:hover {
            transform: translateY(-5px);
        }

        .payer-metric-card.cost-savings {
            border-left: 4px solid #4caf50;
        }

        .payer-metric-card.provider-performance {
            border-left: 4px solid #2196f3;
        }

        .payer-metric-card.collaboration-opportunities {
            border-left: 4px solid #ff9800;
        }

        .payer-metric-card.shared-savings {
            border-left: 4px solid #9c27b0;
        }

        .metric-icon {
            font-size: 2.5rem;
        }

        .metric-content h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #1e3c72;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e3c72;
        }

        .metric-detail {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.3rem;
        }

        .collaboration-tools {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .collaboration-tools h3 {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .tool-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            text-align: center;
        }

        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .tool-icon {
            font-size: 2rem;
        }

        /* Collaboration Platform Styling */
        .collaboration-platform {
            padding: 4rem 0;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
        }

        .collaboration-platform h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .collaboration-dashboard {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .collaboration-header h3 {
            margin-bottom: 1.5rem;
        }

        .status-indicators {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .status-dot.active {
            background: #ff9800;
        }

        .status-dot.success {
            background: #4caf50;
        }

        .status-dot.pending {
            background: #ffc107;
        }

        .shared-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .shared-metric {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .shared-metric h4 {
            margin-bottom: 1rem;
            text-align: center;
        }

        .metric-split {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .provider-share, .payer-share {
            text-align: center;
        }

        .share-label {
            display: block;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .share-value {
            display: block;
            font-size: 1.8rem;
            font-weight: 700;
            margin-top: 0.3rem;
        }

        .quality-metrics {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quality-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .improvement {
            font-weight: 700;
            color: #4caf50;
        }

        .overall-progress {
            margin-top: 2rem;
        }

        .progress-label {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 0.5rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-bar-full {
            flex: 1;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .progress-text {
            font-weight: 600;
            color: #1e3c72;
            min-width: 100px;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        .stage-number {
            background: #4ecdc4;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .stage-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 0.5rem;
        }
        
        .stage-description {
            color: #666;
            line-height: 1.6;
        }
        
        .features-section {
            background: #f8f9fa;
            padding: 4rem 0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 1rem;
        }
        
        .demo-section {
            padding: 4rem 0;
            background: white;
        }
        
        .demo-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
        }
        
        .demo-title {
            font-size: 2rem;
            color: #1e3c72;
            margin-bottom: 1rem;
        }
        
        .demo-dashboard {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-top: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .footer {
            background: #1e3c72;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }
        
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .stages-section {
                margin: -2rem 1rem 2rem;
                padding: 2rem;
            }
            
            .container {
                padding: 0 1rem;
            }

            .export-buttons {
                flex-direction: column;
                align-items: center;
            }

            .export-buttons .btn {
                width: 100%;
                max-width: 250px;
            }

            .alerts-dashboard {
                padding: 1rem;
            }

            .alert-controls {
                flex-direction: column;
                align-items: center;
            }

            .alert-item {
                flex-direction: column;
                text-align: center;
            }

            .alert-icon {
                margin-bottom: 0.5rem;
            }

            .alert-actions {
                margin-left: 0;
                margin-top: 1rem;
            }

            .alert-summary {
                flex-direction: column;
                gap: 1rem;
            }

            .integration-grid {
                grid-template-columns: 1fr;
            }

            .actions-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }

            .action-btn {
                min-width: auto;
                padding: 0.75rem 1rem;
            }

            .role-selector {
                flex-direction: column;
                align-items: center;
                text-align: center;
                margin: 1rem 0;
            }

            .payer-metrics-grid {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .shared-metrics {
                grid-template-columns: 1fr;
            }

            .status-indicators {
                flex-direction: column;
                gap: 1rem;
            }

            .metric-split {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Data Upload Sections */
        .data-upload-section, .provider-data-upload {
            background: #f8f9fa;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 12px;
            border: 2px dashed #dee2e6;
        }

        .upload-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .upload-header h2, .upload-header h3 {
            color: #1e3c72;
            margin: 0;
        }

        .security-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #28a745;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .upload-types, .upload-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .upload-category {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
        }

        .upload-category h4 {
            color: #1e3c72;
            margin: 0 0 1rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .upload-zone {
            border: 2px dashed #007bff;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .upload-zone:hover {
            border-color: #0056b3;
            background: #e7f3ff;
        }

        .upload-zone.dragover {
            border-color: #28a745;
            background: #e8f5e8;
        }

        .upload-content i {
            font-size: 3rem;
            color: #007bff;
            margin-bottom: 1rem;
        }

        .upload-content p {
            margin: 1rem 0;
            color: #6c757d;
            font-weight: 500;
        }

        .upload-btn, .link-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            margin: 0.5rem 0;
        }

        .link-btn {
            background: none;
            color: #007bff;
            text-decoration: underline;
            padding: 0;
        }

        .upload-content small {
            display: block;
            color: #6c757d;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }

        .privacy-notice, .provider-privacy {
            background: #e8f5e8;
            border: 1px solid #28a745;
            border-radius: 8px;
            padding: 1.5rem;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .privacy-notice i {
            color: #28a745;
            font-size: 1.5rem;
            margin-top: 0.2rem;
        }

        .privacy-text strong {
            color: #155724;
            display: block;
            margin-bottom: 0.5rem;
        }

        .privacy-text p {
            color: #155724;
            margin: 0;
            line-height: 1.5;
        }

        /* Upload Methods */
        .upload-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .upload-method {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid #e9ecef;
        }

        .method-header h3 {
            color: #1e3c72;
            margin: 0 0 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .method-header p {
            color: #6c757d;
            margin: 0 0 1.5rem 0;
        }

        /* EMR Integration */
        .emr-connections {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .emr-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .emr-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .emr-logo {
            width: 60px;
            height: 24px;
            border-radius: 4px;
        }

        .emr-info h4 {
            margin: 0;
            color: #1e3c72;
            font-size: 1rem;
        }

        .emr-info p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .custom-emr {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px dashed #dee2e6;
        }

        .custom-emr h4 {
            margin: 0 0 1rem 0;
            color: #1e3c72;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .custom-emr-form {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .custom-emr-form input {
            flex: 1;
            min-width: 150px;
            padding: 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
        }

        /* Responsive Design for Upload Sections */
        @media (max-width: 768px) {
            .upload-methods {
                grid-template-columns: 1fr;
            }
            
            .upload-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .custom-emr-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .emr-option {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }

        /* Uploaded Files Display */
        .uploaded-files {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e9ecef;
        }

        .uploaded-files h5 {
            color: #28a745;
            margin: 0 0 0.5rem 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .uploaded-file-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        .uploaded-file-item i:first-child {
            color: #007bff;
        }

        .uploaded-file-item i:last-child {
            color: #28a745;
            margin-left: auto;
        }

        .file-size {
            color: #6c757d;
            font-size: 0.8rem;
        }

        /* EMR Connection Status */
        .emr-option button.connected {
            background: #28a745;
            color: white;
            cursor: default;
        }

        .emr-option button.connected:hover {
            background: #28a745;
        }

        /* Return to Home Button */
        .return-home-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            padding: 1rem 2rem;
        }

        .return-home-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* Mathematica Database Section */
        .mathematica-database-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 3rem 0;
            margin: 2rem 0;
        }

        .database-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .database-header h2 {
            color: #1e3c72;
            margin: 0;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .powered-by {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            color: #6c757d;
        }

        .mathematica-logo {
            height: 30px;
            border-radius: 4px;
        }

        /* Database Overview Stats */
        .overview-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #FF6600, #FF8800);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .stat-content {
            flex: 1;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Mathematical Models */
        .mathematical-models {
            margin-bottom: 3rem;
        }

        .mathematical-models h3 {
            color: #1e3c72;
            margin-bottom: 2rem;
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .model-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .model-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .model-header h4 {
            color: #1e3c72;
            margin: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .complexity-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            background: #28a745;
            color: white;
        }

        .complexity-badge:contains("High"), .complexity-badge:contains("Advanced") {
            background: #dc3545;
        }

        .complexity-badge:contains("Medium") {
            background: #ffc107;
            color: #212529;
        }

        .model-formula {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #495057;
            text-align: center;
        }

        .model-description p {
            color: #6c757d;
            line-height: 1.5;
            margin-bottom: 1.5rem;
        }

        .model-actions {
            display: flex;
            gap: 1rem;
        }

        .model-actions .btn {
            flex: 1;
            padding: 0.75rem;
            font-size: 0.9rem;
        }

        /* Database Queries */
        .database-queries {
            margin-bottom: 3rem;
        }

        .database-queries h3 {
            color: #1e3c72;
            margin-bottom: 2rem;
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .query-interface {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .query-builder h4 {
            color: #1e3c72;
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #495057;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 1rem;
        }

        .query-actions {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Query Results */
        .query-results {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #dee2e6;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .result-metric {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-label {
            display: block;
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e3c72;
        }

        .results-chart {
            margin: 2rem 0;
            text-align: center;
        }

        .results-export {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* Data Sources */
        .data-sources h3 {
            color: #1e3c72;
            margin-bottom: 2rem;
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .source-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .source-card.active {
            border-color: #28a745;
        }

        .source-card.pending {
            border-color: #ffc107;
        }

        .source-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #007bff, #0056b3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .source-card.active .source-icon {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .source-card.pending .source-icon {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
        }

        .source-info h4 {
            margin: 0 0 0.5rem 0;
            color: #1e3c72;
            font-size: 1.1rem;
        }

        .source-info p {
            margin: 0 0 0.5rem 0;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .source-status {
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .source-card.active .source-status {
            color: #28a745;
        }

        .source-card.pending .source-status {
            color: #ffc107;
        }

        /* Provider Analytics Tool */
        .provider-analytics-tool {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3rem 0;
            margin: 2rem 0;
            color: white;
        }

        .analytics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .analytics-header h2 {
            color: white;
            margin: 0;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .data-sources-indicator {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .source-badge {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .source-badge.active {
            background: rgba(40,167,69,0.8);
            border-color: #28a745;
        }

        .analytics-workspace {
            display: grid;
            grid-template-columns: 1fr 2fr;
            grid-template-rows: auto auto;
            gap: 2rem;
            grid-template-areas: 
                "selection visualization"
                "manipulation export";
        }

        /* Data Selection Panel */
        .data-selection-panel {
            grid-area: selection;
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 2rem;
            color: #333;
            height: fit-content;
        }

        .data-selection-panel h3 {
            color: #1e3c72;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .data-source-selector h4, .filter-controls h4 {
            color: #495057;
            margin: 1rem 0 0.5rem 0;
            font-size: 1.1rem;
        }

        .source-checkboxes {
            margin-bottom: 2rem;
        }

        .checkbox-container {
            display: block;
            position: relative;
            padding-left: 2rem;
            margin-bottom: 1rem;
            cursor: pointer;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .checkbox-container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 1.2rem;
            width: 1.2rem;
            background-color: #eee;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        .checkbox-container:hover input ~ .checkmark {
            background-color: #ccc;
        }

        .checkbox-container input:checked ~ .checkmark {
            background-color: #007bff;
            border-color: #007bff;
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        .checkbox-container input:checked ~ .checkmark:after {
            display: block;
        }

        .checkbox-container .checkmark:after {
            left: 4px;
            top: 1px;
            width: 3px;
            height: 7px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .filter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #495057;
        }

        .filter-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
        }

        .filter-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
        }

        /* Visualization Panel */
        .visualization-panel {
            grid-area: visualization;
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 2rem;
            color: #333;
        }

        .viz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .viz-controls h3 {
            color: #1e3c72;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-type-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .chart-btn {
            padding: 0.75rem 1rem;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .chart-btn:hover, .chart-btn.active {
            border-color: #007bff;
            background: #007bff;
            color: white;
        }

        .main-chart-container {
            position: relative;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(248,249,250,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .loading-spinner {
            text-align: center;
        }

        .loading-spinner i {
            font-size: 2rem;
            color: #007bff;
            margin-bottom: 1rem;
        }

        .chart-insights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .insight-card {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            background: #007bff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .insight-content h4 {
            margin: 0 0 0.5rem 0;
            color: #1e3c72;
            font-size: 1rem;
        }

        .insight-content p {
            margin: 0;
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Data Manipulation Panel */
        .data-manipulation-panel {
            grid-area: manipulation;
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 2rem;
            color: #333;
        }

        .data-manipulation-panel h3 {
            color: #1e3c72;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .manipulation-tools {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .tool-section h4 {
            color: #495057;
            margin: 0 0 1rem 0;
            font-size: 1.1rem;
        }

        .tool-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
        }

        .tool-btn {
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            text-align: left;
        }

        .tool-btn:hover {
            border-color: #007bff;
            background: #f8f9ff;
        }

        .fed-btn:hover {
            border-color: #28a745;
            background: #f8fff8;
        }

        .math-btn:hover {
            border-color: #ff6600;
            background: #fff8f0;
        }

        .analysis-results {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #dee2e6;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .result-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .result-section h5 {
            margin: 0 0 1rem 0;
            color: #1e3c72;
        }

        /* Export & Reporting Panel */
        .export-reporting-panel {
            grid-area: export;
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 2rem;
            color: #333;
        }

        .export-reporting-panel h3 {
            color: #1e3c72;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .export-options {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .export-format h4, .report-generation h4, .sharing-options h4 {
            color: #495057;
            margin: 0 0 1rem 0;
            font-size: 1.1rem;
        }

        .export-buttons, .share-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
        }

        .export-btn, .share-btn {
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .export-btn:hover, .share-btn:hover {
            border-color: #007bff;
            background: #f8f9ff;
        }

        .report-schedule {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .report-schedule select {
            flex: 1;
            min-width: 150px;
            padding: 0.75rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
        }

        /* Responsive Design for Analytics */
        @media (max-width: 1200px) {
            .analytics-workspace {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "selection"
                    "visualization"
                    "manipulation"
                    "export";
            }
        }

        @media (max-width: 768px) {
            .analytics-header {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .analytics-header h2 {
                font-size: 2rem;
            }

            .filter-grid {
                grid-template-columns: 1fr;
            }

            .chart-type-selector {
                justify-content: center;
            }

            .tool-buttons {
                grid-template-columns: 1fr;
            }

            .export-buttons, .share-buttons {
                grid-template-columns: 1fr;
            }

            .report-schedule {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* Healthcare Applications Suite */
        .healthcare-apps-suite {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 4rem 0;
            margin: 2rem 0;
        }

        .suite-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .suite-header h2 {
            color: #1e3c72;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .suite-description {
            font-size: 1.2rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .app-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            border: 1px solid #e3f2fd;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #007bff, #28a745);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .app-card.featured::before {
            opacity: 1;
        }

        .app-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 48px rgba(0,0,0,0.15);
        }

        .app-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 1.8rem;
        }

        .app-card.featured .app-icon {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .app-content h3 {
            color: #1e3c72;
            font-size: 1.4rem;
            margin: 0 0 1rem 0;
            font-weight: 600;
        }

        .app-tags {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .tag {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            color: white;
        }

        .tag.wearable { background: #6f42c1; }
        .tag.biometric { background: #e83e8c; }
        .tag.cultural { background: #fd7e14; }
        .tag.telemedicine { background: #20c997; }
        .tag.medication { background: #dc3545; }
        .tag.automation { background: #6610f2; }
        .tag.records { background: #495057; }
        .tag.storage { background: #17a2b8; }
        .tag.ai { background: #28a745; }
        .tag.bias-aware { background: #ffc107; color: #212529; }
        .tag.network { background: #007bff; }
        .tag.search { background: #6c757d; }
        .tag.analytics { background: #e83e8c; }
        .tag.equity { background: #fd7e14; }

        .app-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            text-align: justify;
        }

        .app-features {
            margin-bottom: 1.5rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #495057;
        }

        .feature-item i {
            color: #28a745;
            font-size: 0.8rem;
        }

        .app-launch-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .app-card.featured .app-launch-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .app-launch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .app-card.featured .app-launch-btn:hover {
            box-shadow: 0 4px 12px rgba(40,167,69,0.3);
        }

        /* Suite Integration Section */
        .suite-integration {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .suite-integration h3 {
            color: #1e3c72;
            font-size: 1.8rem;
            margin-bottom: 2rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .integration-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .integration-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .integration-item i {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
            margin-top: 0.25rem;
        }

        .integration-item h4 {
            color: #1e3c72;
            margin: 0 0 0.5rem 0;
            font-size: 1.1rem;
        }

        .integration-item p {
            color: #666;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* App Modal Interface */
        .app-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .app-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .app-modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .app-modal.active .app-modal-content {
            transform: translateY(0);
        }

        .app-modal-header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 1.5rem 2rem;
            border-radius: 16px 16px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-modal-header h3 {
            margin: 0;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .app-modal-body {
            padding: 2rem;
        }

        .app-demo-interface {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .demo-status {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .demo-status h4 {
            margin: 0 0 0.5rem 0;
            color: #1e3c72;
        }

        .status-active {
            color: #28a745;
            font-weight: bold;
        }

        .demo-status p {
            margin: 0;
            color: #666;
        }

        .demo-features {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .demo-features h4 {
            margin: 0 0 1rem 0;
            color: #1e3c72;
        }

        .demo-features ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .demo-features li {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            color: #495057;
        }

        .demo-features li i {
            color: #28a745;
        }

        .demo-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
        }

        .demo-btn {
            padding: 1rem;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .demo-note {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
        }

        .demo-note p {
            margin: 0;
            color: #1565c0;
            font-size: 0.9rem;
        }

        /* Responsive Design for Healthcare Apps */
        @media (max-width: 768px) {
            .suite-header h2 {
                font-size: 2rem;
            }

            .apps-grid {
                grid-template-columns: 1fr;
            }

            .app-card {
                padding: 1.5rem;
            }

            .app-tags {
                justify-content: center;
            }

            .integration-features {
                grid-template-columns: 1fr;
            }
        }

        /* Responsive Design for Mathematica Section */
        @media (max-width: 768px) {
            .database-header {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }

            .database-header h2 {
                font-size: 2rem;
            }

            .models-grid {
                grid-template-columns: 1fr;
            }

            .model-actions {
                flex-direction: column;
            }

            .form-row {
                flex-direction: column;
            }

            .query-actions {
                flex-direction: column;
            }

            .results-export {
                flex-direction: column;
            }
        }
    </style>
        /* Mobile and accessibility improvements */
        @media (max-width: 600px) {
            .modal-content {
                width: 95vw !important;
                padding: 1rem !important;
                font-size: 1rem !important;
            }
            .hero-buttons, .metrics-grid, .payer-metrics-grid, .tools-grid {
                flex-direction: column !important;
                gap: 0.5rem !important;
            }
            .btn, button {
                width: 100% !important;
                font-size: 1rem !important;
            }
            .container {
                padding: 0.5rem !important;
            }
            .demo-dashboard, .integration-section, .payer-dashboard {
                padding: 1rem !important;
            }
        }
</head>
<body>
        <!-- Simulator / What-If Dashboard Modal -->
        <div id="simulatorModal" class="modal" style="display:none;z-index:4400;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeSimulatorModal()" aria-label="Close">&times;</span>
                <h2>Simulator / What-If Dashboard</h2>
                <p>Model payment outcomes for shared revenue %, CPT enhancements %, and risk corridors. Predict impact on cost, volume, and quality.</p>
                <form id="simulatorForm" onsubmit="submitSimulator(event)">
                    <label for="sharedRevenue">Shared Revenue (%):</label>
                    <input type="number" id="sharedRevenue" name="sharedRevenue" min="0" max="100" required><br><br>
                    <label for="cptEnhancements">CPT Enhancements (%):</label>
                    <input type="number" id="cptEnhancements" name="cptEnhancements" min="0" max="100" required><br><br>
                    <label for="riskCorridor">Risk Corridor (%):</label>
                    <input type="number" id="riskCorridor" name="riskCorridor" min="0" max="100" required><br><br>
                    <button type="submit" class="btn btn-primary">Simulate</button>
                </form>
                <div id="simulatorResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Care Cycle Cost Savings Tracker Modal -->
        <div id="costSavingsModal" class="modal" style="display:none;z-index:4300;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeCostSavingsModal()" aria-label="Close">&times;</span>
                <h2>Care Cycle Cost Savings Tracker</h2>
                <p>Track baseline and post-contract costs for each care cycle. View provider and payer savings, ROI, and contract impact.</p>
                <form id="costSavingsForm" onsubmit="submitCostSavings(event)">
                    <label for="cycleName">Care Cycle Name:</label>
                    <input type="text" id="cycleName" name="cycleName" required><br><br>
                    <label for="baselineCost">Baseline Cost ($):</label>
                    <input type="number" id="baselineCost" name="baselineCost" required><br><br>
                    <label for="postContractCost">Post-Contract Cost ($):</label>
                    <input type="number" id="postContractCost" name="postContractCost" required><br><br>
                    <button type="submit" class="btn btn-primary">Track Savings</button>
                </form>
                <div id="costSavingsResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Protocol Builder Modal -->
        <div id="protocolBuilderModal" class="modal" style="display:none;z-index:4200;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeProtocolBuilderModal()" aria-label="Close">&times;</span>
                <h2>Care Protocol Builder</h2>
                <p>Payers can design care protocols for providers to follow, improving cost savings and outcomes.</p>
                <form id="protocolBuilderForm" onsubmit="submitProtocolBuilder(event)">
                    <label for="protocolName">Protocol Name:</label>
                    <input type="text" id="protocolName" name="protocolName" required><br><br>
                    <label for="protocolDescription">Description:</label>
                    <textarea id="protocolDescription" name="protocolDescription" rows="3" required></textarea><br><br>
                    <label for="protocolSteps">Steps (comma separated):</label>
                    <input type="text" id="protocolSteps" name="protocolSteps" required><br><br>
                    <button type="submit" class="btn btn-primary">Create Protocol</button>
                </form>
                <div id="protocolBuilderResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Automated Payment Model Engine Modal -->
        <div id="paymentEngineModal" class="modal" style="display:none;z-index:4100;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closePaymentEngineModal()" aria-label="Close">&times;</span>
                <h2>Automated Payment Model Engine</h2>
                <p>Providers can bill payers directly using contract terms. Simulate payment routing and reimbursement efficiency.</p>
                <form id="paymentEngineForm" onsubmit="submitPaymentEngine(event)">
                    <label for="providerTIN">Provider TIN:</label>
                    <input type="text" id="providerTIN" name="providerTIN" required><br><br>
                    <label for="payerID">Payer ID:</label>
                    <input type="text" id="payerID" name="payerID" required><br><br>
                    <label for="contractTerms">Contract Terms:</label>
                    <textarea id="contractTerms" name="contractTerms" rows="3" required></textarea><br><br>
                    <label for="billingAmount">Billing Amount ($):</label>
                    <input type="number" id="billingAmount" name="billingAmount" required><br><br>
                    <button type="submit" class="btn btn-primary">Submit Bill</button>
                </form>
                <div id="paymentEngineResult" style="margin-top:2rem;"></div>
            </div>
        </div>
        <!-- Collaborative Payment Options Modal -->
        <div id="collabPaymentModal" class="modal" style="display:none;z-index:4000;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closeCollabPaymentModal()" aria-label="Close">&times;</span>
                <h2>Collaborative Payment Options</h2>
                <p>Enable both parties to co-design innovative value-based payment models.</p>
                <div style="margin-top:2rem;">
                    <button class="btn btn-primary" onclick="selectPaymentModel('shared')">Shared Revenue Model</button>
                    <button class="btn btn-secondary" onclick="selectPaymentModel('enhanced')">Enhanced Reimbursement (Selective CPT Codes)</button>
                    <button class="btn btn-secondary" onclick="selectPaymentModel('risk')">Risk Sharing Model</button>
                </div>
                <div id="paymentModelDetails" style="margin-top:2rem;"></div>
                <button class="btn btn-success" style="margin-top:2rem;" onclick="openPaymentEngineModal()">Automated Payment Model Engine</button>
            </div>
        </div>
        <!-- Payer Workflow Modal -->
        <div id="payerWorkflowModal" class="modal" style="display:none;z-index:4000;">
            <div class="modal-content" tabindex="0" aria-modal="true" role="dialog">
                <span class="close" onclick="closePayerWorkflowModal()" aria-label="Close">&times;</span>
                <h2>Payer Workflow ‚Äì Five Stages of Contract Negotiation</h2>
                <div id="payerStageNav" style="display:flex;gap:1rem;margin-bottom:2rem;justify-content:center;">
                    <button onclick="showPayerStage(1)" class="btn btn-primary">Stage 1: Data Upload</button>
                    <button onclick="showPayerStage(2)" class="btn btn-secondary">Stage 2: Market Comparison</button>
                    <button onclick="showPayerStage(3)" class="btn btn-secondary">Stage 3: Negotiation</button>
                    <button onclick="showPayerStage(4)" class="btn btn-secondary">Stage 4: Analysis</button>
                    <button onclick="showPayerStage(5)" class="btn btn-secondary">Stage 5: Optimization</button>
                     <button onclick="openProtocolBuilderModal()" class="btn btn-success">Protocol Builder</button>
                     <button onclick="openCostSavingsModal()" class="btn btn-info">Cost Savings Tracker</button>
                     <button onclick="openSimulatorModal()" class="btn btn-warning">Simulator / What-If</button>
                </div>
                <div id="payerStageContent" style="min-height:200px;"></div>
            </div>
        </div>
        <!-- Entry Screen -->
    <div id="entryScreen" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(30,60,114,0.97);z-index:5000;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;">
<!-- Utility function for Return to Home Page -->
<script>
function returnToHomePage() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
    document.querySelectorAll('.modal-content').forEach(m => m.parentElement.style.display = 'none');
}
</script>
            <h1 style="font-size:2.5rem;margin-bottom:2rem;">Welcome to MedPact Price Transparency Platform</h1>
            <div style="display:flex;gap:2rem;">
                <button onclick="enterProvider()" class="btn btn-primary" style="font-size:1.5rem;">Provider</button>
                <button onclick="enterPayer()" class="btn btn-secondary" style="font-size:1.5rem;">Payer</button>
            </div>
        </div>
    <!-- Notification Center -->
    <div id="notificationCenter" style="position:fixed;top:20px;right:20px;z-index:3000;width:320px;"></div>
    <header class="header">
        <div class="header-content">
            <div class="logo">ü§ù MedPact Collaboration Platform</div>
            <div class="role-selector">
                <label for="userRole">Role:</label>
                <select id="userRole" onchange="updateRolePanels()">
                    <option value="admin">Admin</option>
                    <option value="physician">Physician</option>
                    <option value="staff">Staff</option>
                </select>
            </div>
            <div class="nav-buttons">
                <a href="#demo" class="btn btn-secondary">Live Demo</a>
                <a href="#contact" class="btn btn-primary" id="nav-primary">Enterprise Trial</a>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
                        <h1 id="hero-title">Payer-Provider Collaboration Platform</h1>
                        <p id="hero-subtitle">AI-Powered Cost Optimization & Incentive Modeling for Collaborative Healthcare</p>
                        <!-- Role-Based Panels -->
                        <div id="adminPanel" style="display:none; margin-top:2rem;">
                            <h2>Admin Dashboard</h2>
                            <ul>
                                <li>System-wide analytics</li>
                                <li>Audit logs</li>
                                <li>User management</li>
                                <li>Compliance reports</li>
                            </ul>
                        </div>
                        <div id="physicianPanel" style="display:none; margin-top:2rem;">
                            <h2>Physician Dashboard</h2>
                            <ul>
                                <li>Practice-level contract analysis</li>
                                <li>Revenue projections</li>
                                <li>Denial/underpayment flags</li>
                                <li>Benchmark comparison</li>
                            </ul>
                        </div>
                        <div id="staffPanel" style="display:none; margin-top:2rem;">
                            <h2>Staff Dashboard</h2>
                            <ul>
                                <li>Upload and sync data</li>
                                <li>View analytics dashboard</li>
                                <li>Export reports</li>
                            </ul>
                        </div>
            
            <div class="hero-buttons">
                <button onclick="showAuditLogModal()" class="btn btn-secondary">View Audit Log</button>
        <!-- Audit Log Viewer Modal -->
        <div id="auditLogModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close" onclick="closeAuditLogModal()" aria-label="Close">&times;</span>
                <h2>Audit Log Viewer</h2>
                <div id="auditLogList" style="max-height:300px;overflow-y:auto;margin-top:1rem;"></div>
            </div>
        </div>
                <button onclick="startFullProcess()" class="btn btn-primary">üöÄ Start Full Optimization</button>
                <button onclick="openMarketingApp()" class="btn btn-marketing">üéØ Launch Marketing App</button>
                <button onclick="openROICalculator()" class="btn btn-secondary">üí∞ ROI Calculator</button>
                <button onclick="showPatientRosterModal()" class="btn btn-info">Upload Patient Roster</button>
                <button onclick="showSubscriberUploadModal()" class="btn btn-info">Upload Enrolled Subscriber List</button>
                <button onclick="showClearinghouseModal()" class="btn btn-success">Clearinghouse Verification</button>
<!-- Patient Roster Upload Modal (Provider Side) -->
<div id="patientRosterModal" class="modal" style="display:none;z-index:4100;">
    <div class="modal-content">
        <span class="close" onclick="closePatientRosterModal()" aria-label="Close">&times;</span>
        <h2>Upload Patient Roster</h2>
        <input type="file" id="patientRosterFile" accept=".csv,.xlsx">
        <button onclick="uploadPatientRoster()" class="btn btn-primary">Upload</button>
        <div id="patientRosterStatus"></div>
    </div>
</div>
<!-- Enrolled Subscriber Upload Modal (Payer Side) -->
<div id="subscriberUploadModal" class="modal" style="display:none;z-index:4100;">
    <div class="modal-content">
        <span class="close" onclick="closeSubscriberUploadModal()" aria-label="Close">&times;</span>
        <h2>Upload Enrolled Subscriber List</h2>
        <input type="file" id="subscriberFile" accept=".csv,.xlsx">
        <button onclick="uploadSubscriberList()" class="btn btn-primary">Upload</button>
        <div id="subscriberStatus"></div>
    </div>
</div>
<!-- Clearinghouse Verification Modal -->
<div id="clearinghouseModal" class="modal" style="display:none;z-index:4200;">
    <div class="modal-content">
        <span class="close" onclick="closeClearinghouseModal()" aria-label="Close">&times;</span>
        <h2>Clearinghouse Verification</h2>
        <p>Verify enrollee status for both provider and payer.</p>
        <button onclick="runClearinghouseVerification()" class="btn btn-success">Run Verification</button>
        <div id="clearinghouseStatus"></div>
    </div>
</div>
// Patient Roster Modal Logic
function showPatientRosterModal() {
    document.getElementById('patientRosterModal').style.display = 'block';
}
function closePatientRosterModal() {
    document.getElementById('patientRosterModal').style.display = 'none';
}
function uploadPatientRoster() {
    const file = document.getElementById('patientRosterFile').files[0];
    if (!file) return showNotification('No file selected.', 'error');
    showNotification('Uploading patient roster...', 'info');
    const reader = new FileReader();
    reader.onload = function(e) {
        fetch('https://my-backend-env.eba-xxxxxx.us-west-2.elasticbeanstalk.com/api/patient-roster', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ fileName: file.name, data: e.target.result })
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById('patientRosterStatus').innerText = '‚úÖ ' + data.status;
            showNotification('Patient roster uploaded.', 'success');
        })
        .catch(() => showNotification('Upload failed.', 'error'));
    };
    reader.readAsDataURL(file);
}
// Subscriber Upload Modal Logic
function showSubscriberUploadModal() {
    document.getElementById('subscriberUploadModal').style.display = 'block';
}
function closeSubscriberUploadModal() {
    document.getElementById('subscriberUploadModal').style.display = 'none';
}
function uploadSubscriberList() {
    const file = document.getElementById('subscriberFile').files[0];
    if (!file) return showNotification('No file selected.', 'error');
    showNotification('Uploading enrolled subscriber list...', 'info');
    const reader = new FileReader();
    reader.onload = function(e) {
        fetch('http://localhost:4000/api/subscriber-list', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ fileName: file.name, data: e.target.result })
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById('subscriberStatus').innerText = '‚úÖ ' + data.status;
            showNotification('Subscriber list uploaded.', 'success');
        })
        .catch(() => showNotification('Upload failed.', 'error'));
    };
    reader.readAsDataURL(file);
}
// Clearinghouse Modal Logic
function showClearinghouseModal() {
    document.getElementById('clearinghouseModal').style.display = 'block';
}
function closeClearinghouseModal() {
    document.getElementById('clearinghouseModal').style.display = 'none';
}
function runClearinghouseVerification() {
    showNotification('Running clearinghouse verification...', 'info');
    Promise.all([
        fetch('http://localhost:4000/api/patient-roster').then(r=>r.json()),
        fetch('http://localhost:4000/api/subscriber-list').then(r=>r.json())
    ]).then(([roster, subscriber]) => {
        fetch('http://localhost:4000/api/clearinghouse-verify', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ patientRoster: roster, subscriberList: subscriber })
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById('clearinghouseStatus').innerText = '‚úÖ ' + data.status;
            showNotification('Clearinghouse verification complete.', 'success');
        })
        .catch(() => showNotification('Verification failed.', 'error'));
    });
}
                <button onclick="showPayerCollaboration()" class="btn btn-collaboration">ü§ù Payer Collaboration</button>
                <button onclick="showContractAnalysisModal()" class="btn btn-analysis">üìÑ Real-Time Contract Analysis</button>
                <button onclick="showBenchmarkingModal()" class="btn btn-benchmark">üìä Market Benchmarking (Mathematica + Federal Reserve Data)</button>
        <!-- Real-Time Contract Analysis Modal -->
        <div id="contractAnalysisModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close" onclick="closeContractAnalysisModal()" aria-label="Close">&times;</span>
                <h2>Real-Time Contract Analysis</h2>
                <p>Select a data integration option:</p>
                <button onclick="showUploadSection()" class="btn btn-upload">Upload Files</button>
                <button onclick="showEmrSyncSection()" class="btn btn-emr">Sync with EMR/Practice Management</button>
                <div id="uploadSection" style="display:none;">
                                <h3>Secure File Upload</h3>
                                <input type="file" id="contractUpload" multiple accept=".csv,.xls,.xlsx,.json" />
                                <div id="uploadProgress" style="display:none; margin: 1rem 0;">
                                    <label>Upload Progress:</label>
                                    <progress id="progressBar" value="0" max="100" style="width: 80%;"></progress>
                                </div>
                                <div id="uploadError" style="color: #d32f2f; margin: 0.5rem 0; display:none;"></div>
                                <button onclick="uploadContractFiles()" class="btn btn-primary">Upload & Analyze</button>
                                <p>All files are encrypted and HIPAA compliant.</p>
                </div>
                <div id="emrSyncSection" style="display:none;">
                                <h3>Connect to EMR/Practice Management</h3>
                                <label>Are your EMR and Practice Management system separate vendors or a unified platform?</label>
                                <div style="margin: 0.5rem 0;">
                                    <input type="radio" id="emrSeparate" name="emrType" value="separate" checked>
                                    <label for="emrSeparate">Separate Vendors</label>
                                    <input type="radio" id="emrUnified" name="emrType" value="unified">
                                    <label for="emrUnified">Unified Platform</label>
                                </div>
                                <div id="emrVendorOptions">
                                    <label>Select EMR System:</label>
                                    <select id="emrSystem">
                                        <option value="">Select EMR System</option>
                                        <option value="Epic">Epic</option>
                                        <option value="Athenahealth">Athenahealth</option>
                                        <option value="NextGen">NextGen</option>
                                    </select>
                                    <label>Select Practice Management System:</label>
                                    <select id="pmSystem">
                                        <option value="">Select PM System</option>
                                        <option value="CareCloud">CareCloud</option>
                                        <option value="AdvancedMD">AdvancedMD</option>
                                        <option value="Kareo">Kareo</option>
                                    </select>
                                </div>
                                <div id="emrUnifiedOptions" style="display:none;">
                                    <label>Select Unified Platform:</label>
                                    <select id="unifiedSystem">
                                        <option value="">Select Unified Platform</option>
                                        <option value="Epic">Epic</option>
                                        <option value="Athenahealth">Athenahealth</option>
                                        <option value="NextGen">NextGen</option>
                                    </select>
                                </div>
                                <button onclick="connectEmrSystem()" class="btn btn-primary">Authorize & Sync</button>
                                <p>FHIR-based secure connection. Data syncs nightly or on-demand.</p>
                </div>
            </div>
        </div>

        <!-- Market Benchmarking Modal -->
        <div id="benchmarkingModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close" onclick="closeBenchmarkingModal()" aria-label="Close">&times;</span>
                <h2>Market Benchmarking (Mathematica + Federal Reserve Data)</h2>
                <form id="benchmarkForm">
                    <div style="margin-top:1rem;display:flex;gap:1rem;flex-wrap:wrap;">
                        <label for="dateRange">Date Range:</label>
                        <input type="date" id="dateStart" name="dateStart" />
                        <span>to</span>
                        <input type="date" id="dateEnd" name="dateEnd" />
                        <label for="region">Region:</label>
                        <select id="region" name="region">
                            <option value="">All</option>
                            <option value="Region A">Region A</option>
                            <option value="Region B">Region B</option>
                            <option value="Region C">Region C</option>
                            <option value="Region D">Region D</option>
                        </select>
                        <button type="button" onclick="saveBenchmarkQuery()" class="btn btn-secondary">Save Query</button>
                        <button type="button" onclick="loadSavedQueries()" class="btn btn-secondary">Load Saved</button>
                    </div>
        <!-- Saved Queries Modal -->
        <div id="savedQueriesModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close" onclick="closeSavedQueriesModal()" aria-label="Close">&times;</span>
                <h2>Saved Benchmark Queries</h2>
                <div id="savedQueriesList" style="max-height:300px;overflow-y:auto;margin-top:1rem;"></div>
            </div>
        </div>
                    <label for="tin">TIN (Tax ID):</label>
                    <input type="text" id="tin" name="tin" autocomplete="on" />
                    <label for="plan">Insurance Plan:</label>
                    <input type="text" id="plan" name="plan" autocomplete="on" />
                    <label for="cpt">CPT Code:</label>
                    <input type="text" id="cpt" name="cpt" autocomplete="on" />
                                <button type="button" onclick="runBenchmarkAnalysis()" class="btn btn-primary">Run Benchmark</button>
                                <div style="margin-top:1rem;">
                                    <label for="practiceOverlay">Overlay My Practice Data:</label>
                                    <input type="text" id="practiceOverlay" name="practiceOverlay" placeholder="Comma-separated values (e.g. 125,140,115,150)" style="width:60%;" />
                                    <button type="button" onclick="runBenchmarkAnalysis(true)" class="btn btn-secondary" style="margin-left:1rem;">Overlay</button>
                                </div>
                </form>
                <div id="benchmarkDashboard" style="display:none;">
                    <div class="panel">
                        <h3>Federal Reserve Data</h3>
                        <canvas id="fedChart"></canvas>
                    </div>
                    <div class="panel">
                        <h3>Mathematica Transparency Data</h3>
                        <canvas id="mathematicaChart"></canvas>
                    </div>
                      <button onclick="exportBenchmarkResults('csv')" class="btn btn-secondary">Export CSV</button>
                      <button onclick="exportBenchmarkResults('pdf')" class="btn btn-secondary">Export PDF</button>
                      <button onclick="showEmailExportModal()" class="btn btn-secondary">Share via Email</button>
        <!-- Email Export Modal -->
        <div id="emailExportModal" class="modal" style="display:none;">
            <div class="modal-content">
                <span class="close" onclick="closeEmailExportModal()" aria-label="Close">&times;</span>
                <h2>Share Benchmark Report via Email</h2>
                <input type="email" id="exportEmail" placeholder="Recipient Email" style="width:80%;margin-bottom:1rem;" />
                <button onclick="sendEmailExport()" class="btn btn-primary">Send Report</button>
                <div id="emailExportStatus" style="margin-top:1rem;color:#1565c0;"></div>
            </div>
        </div>
                </div>
            </div>
        </div>

        <script>
    // Simulator / What-If Dashboard logic
    function openSimulatorModal() {
        document.getElementById('simulatorModal').style.display = 'block';
        document.getElementById('simulatorResult').innerHTML = '';
    }
    function closeSimulatorModal() {
        document.getElementById('simulatorModal').style.display = 'none';
    }
    function submitSimulator(event) {
        event.preventDefault();
        const shared = parseFloat(document.getElementById('sharedRevenue').value);
        const cpt = parseFloat(document.getElementById('cptEnhancements').value);
        const risk = parseFloat(document.getElementById('riskCorridor').value);
        // Simple predictive model (for demo)
        const costImpact = (100 - shared) + (100 - cpt) + risk;
        const volumeImpact = shared * 0.5 + cpt * 0.3 - risk * 0.2;
        const qualityImpact = cpt * 0.4 + shared * 0.2;
        let result = `<strong>Simulation Results</strong><br>
            <b>Shared Revenue:</b> ${shared}%<br>
            <b>CPT Enhancements:</b> ${cpt}%<br>
            <b>Risk Corridor:</b> ${risk}%<br>
            <b>Predicted Cost Impact:</b> ${costImpact}<br>
            <b>Predicted Volume Impact:</b> ${volumeImpact}<br>
            <b>Predicted Quality Impact:</b> ${qualityImpact}<br>
            <span style='color:blue;'>Use these results to guide contract negotiations and payment model design.</span>`;
        document.getElementById('simulatorResult').innerHTML = result;
    }
    // Care Cycle Cost Savings Tracker logic
    function openCostSavingsModal() {
        document.getElementById('costSavingsModal').style.display = 'block';
        document.getElementById('costSavingsResult').innerHTML = '';
    }
    function closeCostSavingsModal() {
        document.getElementById('costSavingsModal').style.display = 'none';
    }
    function submitCostSavings(event) {
        event.preventDefault();
        const name = document.getElementById('cycleName').value;
        const baseline = parseFloat(document.getElementById('baselineCost').value);
        const post = parseFloat(document.getElementById('postContractCost').value);
        const savings = baseline - post;
        const roi = ((savings / baseline) * 100).toFixed(2);
        let result = `<strong>Care Cycle Tracked!</strong><br>
            <b>Name:</b> ${name}<br>
            <b>Baseline Cost:</b> $${baseline}<br>
            <b>Post-Contract Cost:</b> $${post}<br>
            <b>Savings:</b> $${savings}<br>
            <b>ROI:</b> ${roi}%<br>
            <span style='color:green;'>Provider and payer savings tracked for this care cycle.</span>`;
        document.getElementById('costSavingsResult').innerHTML = result;
    }
    // Protocol Builder logic
    function openProtocolBuilderModal() {
        document.getElementById('protocolBuilderModal').style.display = 'block';
        document.getElementById('protocolBuilderResult').innerHTML = '';
    }
    function closeProtocolBuilderModal() {
        document.getElementById('protocolBuilderModal').style.display = 'none';
    }
    function submitProtocolBuilder(event) {
        event.preventDefault();
        const name = document.getElementById('protocolName').value;
        const desc = document.getElementById('protocolDescription').value;
        const steps = document.getElementById('protocolSteps').value.split(',').map(s => s.trim());
        let result = `<strong>Protocol Created!</strong><br>
            <b>Name:</b> ${name}<br>
            <b>Description:</b> ${desc}<br>
            <b>Steps:</b> <ul>${steps.map(step => `<li>${step}</li>`).join('')}</ul>
            <span style='color:green;'>Providers can now use this protocol to improve cost savings for the payer.</span>`;
        document.getElementById('protocolBuilderResult').innerHTML = result;
    }
    // Automated Payment Model Engine logic
    function openPaymentEngineModal() {
        document.getElementById('paymentEngineModal').style.display = 'block';
        document.getElementById('paymentEngineResult').innerHTML = '';
    }
    function closePaymentEngineModal() {
        document.getElementById('paymentEngineModal').style.display = 'none';
    }
    function submitPaymentEngine(event) {
        event.preventDefault();
        const providerTIN = document.getElementById('providerTIN').value;
        const payerID = document.getElementById('payerID').value;
        const contractTerms = document.getElementById('contractTerms').value;
        const billingAmount = document.getElementById('billingAmount').value;
        // Simulate payment routing and reimbursement
        let result = `<strong>Payment Submitted!</strong><br>
            Provider TIN: ${providerTIN}<br>
            Payer ID: ${payerID}<br>
            Contract Terms: ${contractTerms}<br>
            Billing Amount: $${billingAmount}<br>
            <span style='color:green;'>Reimbursement processed efficiently via platform.</span>`;
        document.getElementById('paymentEngineResult').innerHTML = result;
    }
            // Collaborative payment options modal logic
            function showCollabPaymentModal() {
                document.getElementById('collabPaymentModal').style.display = 'block';
                document.getElementById('paymentModelDetails').innerHTML = '';
            }
            function closeCollabPaymentModal() {
                document.getElementById('collabPaymentModal').style.display = 'none';
            }
            function selectPaymentModel(model) {
                var details = '';
                if (model === 'shared') {
                    details = `<h3>Shared Revenue Model</h3><p>Equitable distribution of revenue between payer and provider based on outcomes or utilization.</p>`;
                } else if (model === 'enhanced') {
                    details = `<h3>Enhanced Reimbursement (Selective CPT Codes)</h3><p>Incentivizes higher reimbursements for strategic services or performance targets.</p>`;
                } else if (model === 'risk') {
                    details = `<h3>Risk Sharing Model</h3><p>Both sides share upside and downside risk tied to cost, quality, or population outcomes.</p>`;
                }
                document.getElementById('paymentModelDetails').innerHTML = details;
            }
            // Payer workflow modal logic
            function showPayerWorkflow() {
                document.getElementById('payerWorkflowModal').style.display = 'block';
                showPayerStage(1);
            }
            function closePayerWorkflowModal() {
                document.getElementById('payerWorkflowModal').style.display = 'none';
            }
            function showPayerStage(stage) {
                var content = '';
                        if (stage === 1) {
                            content = `<h3>Stage 1: Data Upload / Integration</h3>
                                <p>Payer uploads data related to practices or TINs. Option to upload manually (CSV/JSON) or connect to internal databases for live sync. HIPAA-compliant, encrypted ingestion identical to the provider system.</p>
                                <button class='btn btn-primary' onclick='alert("Upload functionality coming soon!")'>Upload Data</button>
                                <div style='margin-top:2rem;'>
                                    <h4>Payer Dashboard</h4>
                                    <ul>
                                        <li>Practice/TIN Data Overview</li>
                                        <li>Upload Status & History</li>
                                        <li>Data Quality & Completeness</li>
                                    </ul>
                                </div>`;
                        } else if (stage === 2) {
                            content = `<h3>Stage 2: Market Comparison</h3>
                                <p>System compares payer data against Federal Reserve and Mathematica transparency datasets. Displays benchmarking and economic indicators for each TIN, insurance plan, and CPT code.</p>
                                <button class='btn btn-secondary' onclick='alert("Market comparison coming soon!")'>Run Comparison</button>
                                <div style='margin-top:2rem;'>
                                    <h4>Payer Market Analytics</h4>
                                    <ul>
                                        <li>Benchmarking vs. National/Regional Data</li>
                                        <li>Economic Indicators (Fed Reserve)</li>
                                        <li>Mathematica Transparency Comparison</li>
                                    </ul>
                                </div>`;
                        } else if (stage === 3) {
                            content = `<h3>Stage 3: Negotiation</h3>
                                <p>Analytics, predictive modeling, and contract optimization tools. Visualizations, KPIs, and recommendations shown through the payer lens (cost control, contract efficiency, reimbursement forecasting).</p>
                                <button class='btn btn-secondary' onclick='alert("Negotiation tools coming soon!")'>Open Negotiation Tools</button>
                                <div style='margin-top:2rem;'>
                                    <h4>Payer Negotiation Dashboard</h4>
                                    <ul>
                                        <li>Cost Control KPIs</li>
                                        <li>Contract Efficiency Metrics</li>
                                        <li>Reimbursement Forecasting</li>
                                    </ul>
                                </div>`;
                        } else if (stage === 4) {
                            content = `<h3>Stage 4: Analysis</h3>
                                <p>Advanced analytics and reporting for contract performance and cost management.</p>
                                <button class='btn btn-secondary' onclick='alert("Analysis dashboard coming soon!")'>View Analysis</button>
                                <div style='margin-top:2rem;'>
                                    <h4>Payer Analysis Dashboard</h4>
                                    <ul>
                                        <li>Performance Trends</li>
                                        <li>Cost Management Reports</li>
                                        <li>Predictive Analytics</li>
                                    </ul>
                                </div>`;
                        } else if (stage === 5) {
                            content = `<h3>Stage 5: Optimization</h3>
                                <p>Recommendations and optimization strategies for value-based contract performance.</p>
                                <button class='btn btn-secondary' onclick='alert(\"Optimization strategies coming soon!\")'>Show Optimization</button>
                                <div style='margin-top:2rem;'>
                                    <h4>Payer Optimization Dashboard</h4>
                                    <ul>
                                        <li>Value-Based Contract Recommendations</li>
                                        <li>Efficiency Improvement Suggestions</li>
                                        <li>Outcome-Based Payment Models</li>
                                    </ul>
                                </div>
                                <button class='btn btn-primary' style='margin-top:2rem;' onclick='showCollabPaymentModal()'>Collaborative Payment Options</button>`;
                        }
                        document.getElementById('payerStageContent').innerHTML = content;
            }
            // Entry screen navigation
            function enterProvider() {
                document.getElementById('entryScreen').style.display = 'none';
                document.body.classList.remove('payer-mode');
                document.body.classList.add('provider-mode');
                // ...existing provider workflow logic...
            }
            function enterPayer() {
                document.getElementById('entryScreen').style.display = 'none';
                document.body.classList.remove('provider-mode');
                document.body.classList.add('payer-mode');
                // ...activate payer workflow logic...
                showPayerWorkflow();
            }
            // Payer workflow stub
            function showPayerWorkflow() {
                // TODO: Implement five-stage payer workflow and dashboards
                // For now, show a placeholder modal
                alert('Payer workflow coming next!');
            }
            // Modal keyboard navigation for accessibility
            document.addEventListener('keydown', function(e) {
                var modals = document.querySelectorAll('.modal');
                modals.forEach(function(modal){
                    if (modal.style.display === 'block' && e.key === 'Escape') {
                        var closeBtn = modal.querySelector('.close');
                        if (closeBtn) closeBtn.click();
                    }
                });
            });
            // Notification logic
            function showNotificationCenter(message, type) {
                var center = document.getElementById('notificationCenter');
                var color = {
                    success: '#43a047',
                    info: '#1565c0',
                    warning: '#ff9800',
                    error: '#d32f2f'
                }[type] || '#1565c0';
                var note = document.createElement('div');
                note.style = `background:${color};color:#fff;padding:1rem;margin-bottom:1rem;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);font-weight:600;`;
                note.textContent = message;
                center.appendChild(note);
                setTimeout(function(){ note.remove(); }, 4000);
            }
            // Example triggers for notifications
            function notifyBenchmarkUpdate() {
                showNotificationCenter('üìä New benchmark data available!','info');
            }
            function notifyEmrSyncComplete() {
                showNotificationCenter('‚úÖ EMR sync completed successfully.','success');
            }
            function notifyContractAnomaly() {
                showNotificationCenter('‚ö†Ô∏è Contract anomaly detected!','warning');
            }
            // Custom filters and saved searches logic
            function saveBenchmarkQuery() {
                var query = {
                    tin: document.getElementById('tin').value,
                    plan: document.getElementById('plan').value,
                    cpt: document.getElementById('cpt').value,
                    dateStart: document.getElementById('dateStart').value,
                    dateEnd: document.getElementById('dateEnd').value,
                    region: document.getElementById('region').value
                };
                var saved = JSON.parse(localStorage.getItem('benchmarkQueries') || '[]');
                saved.push(query);
                localStorage.setItem('benchmarkQueries', JSON.stringify(saved));
                alert('Query saved!');
            }
            function loadSavedQueries() {
                var saved = JSON.parse(localStorage.getItem('benchmarkQueries') || '[]');
                var html = '<ul style="list-style:none;padding:0;">';
                saved.forEach(function(q, i){
                    html += `<li style='margin-bottom:1rem;'><strong>#${i+1}</strong> TIN: ${q.tin}, Plan: ${q.plan}, CPT: ${q.cpt}, Date: ${q.dateStart} to ${q.dateEnd}, Region: ${q.region} <button onclick='applySavedQuery(${i})' class='btn btn-primary' style='margin-left:1rem;'>Apply</button></li>`;
                });
                html += '</ul>';
                document.getElementById('savedQueriesList').innerHTML = html;
                document.getElementById('savedQueriesModal').style.display = 'block';
            }
            function closeSavedQueriesModal() {
                document.getElementById('savedQueriesModal').style.display = 'none';
            }
            function applySavedQuery(idx) {
                var saved = JSON.parse(localStorage.getItem('benchmarkQueries') || '[]');
                var q = saved[idx];
                document.getElementById('tin').value = q.tin;
                document.getElementById('plan').value = q.plan;
                document.getElementById('cpt').value = q.cpt;
                document.getElementById('dateStart').value = q.dateStart;
                document.getElementById('dateEnd').value = q.dateEnd;
                document.getElementById('region').value = q.region;
                closeSavedQueriesModal();
            }
            // Audit log modal logic
            function showAuditLogModal() {
                document.getElementById('auditLogModal').style.display = 'block';
                // Example log data
                var logs = [
                    { time: '2025-11-01 09:12', action: 'File Upload', user: 'Dr. Williams', details: 'contracts_nov.csv uploaded.' },
                    { time: '2025-11-01 09:15', action: 'EMR Sync', user: 'Staff', details: 'Epic sync completed.' },
                    { time: '2025-11-01 09:18', action: 'Benchmark Export', user: 'Dr. Williams', details: 'Exported PDF report.' },
                    { time: '2025-11-01 09:20', action: 'Access Log', user: 'Admin', details: 'Viewed audit log.' }
                ];
                var html = '<table style="width:100%;border-collapse:collapse;">';
                html += '<tr style="background:#f5f5f5;"><th>Time</th><th>Action</th><th>User</th><th>Details</th></tr>';
                logs.forEach(function(log){
                    html += `<tr><td>${log.time}</td><td>${log.action}</td><td>${log.user}</td><td>${log.details}</td></tr>`;
                });
                html += '</table>';
                document.getElementById('auditLogList').innerHTML = html;
            }
            function closeAuditLogModal() {
                document.getElementById('auditLogModal').style.display = 'none';
            }
            // Email export modal logic
            function showEmailExportModal() {
                document.getElementById('emailExportModal').style.display = 'block';
                document.getElementById('emailExportStatus').textContent = '';
            }
            function closeEmailExportModal() {
                document.getElementById('emailExportModal').style.display = 'none';
            }
            function sendEmailExport() {
                var email = document.getElementById('exportEmail').value;
                var statusDiv = document.getElementById('emailExportStatus');
                if (!email || !email.includes('@')) {
                    statusDiv.textContent = 'Please enter a valid email address.';
                    return;
                }
                statusDiv.textContent = 'Sending report to ' + email + '...';
                setTimeout(function(){
                    statusDiv.textContent = '‚úÖ Report sent successfully!';
                }, 1500);
                setTimeout(closeEmailExportModal, 2500);
            }
            // EMR/PM system selection logic
            document.addEventListener('DOMContentLoaded', function() {
                var emrSeparate = document.getElementById('emrSeparate');
                var emrUnified = document.getElementById('emrUnified');
                var emrVendorOptions = document.getElementById('emrVendorOptions');
                var emrUnifiedOptions = document.getElementById('emrUnifiedOptions');
                function updateEmrOptions() {
                    if (emrSeparate.checked) {
                        emrVendorOptions.style.display = 'block';
                        emrUnifiedOptions.style.display = 'none';
                    } else {
                        emrVendorOptions.style.display = 'none';
                        emrUnifiedOptions.style.display = 'block';
                    }
                }
                emrSeparate.addEventListener('change', updateEmrOptions);
                emrUnified.addEventListener('change', updateEmrOptions);
                updateEmrOptions();
            });
            // Role-based dashboard logic
            function updateRolePanels() {
                var role = document.getElementById('userRole').value;
                document.getElementById('adminPanel').style.display = (role === 'admin') ? 'block' : 'none';
                document.getElementById('physicianPanel').style.display = (role === 'physician') ? 'block' : 'none';
                document.getElementById('staffPanel').style.display = (role === 'staff') ? 'block' : 'none';
            }
            window.onload = function() {
                updateRolePanels();
            };
            // Modal logic
            function showContractAnalysisModal() {
                document.getElementById('contractAnalysisModal').style.display = 'block';
                document.getElementById('uploadSection').style.display = 'none';
                document.getElementById('emrSyncSection').style.display = 'none';
            }
            function closeContractAnalysisModal() {
                document.getElementById('contractAnalysisModal').style.display = 'none';
            }
            function showUploadSection() {
                document.getElementById('uploadSection').style.display = 'block';
                document.getElementById('emrSyncSection').style.display = 'none';
            }
            function showEmrSyncSection() {
                document.getElementById('emrSyncSection').style.display = 'block';
                document.getElementById('uploadSection').style.display = 'none';
            }
                    function uploadContractFiles() {
                        var files = document.getElementById('contractUpload').files;
                        var errorDiv = document.getElementById('uploadError');
                        var progressDiv = document.getElementById('uploadProgress');
                        var progressBar = document.getElementById('progressBar');
                        errorDiv.style.display = 'none';
                        progressDiv.style.display = 'none';
                        if (!files.length) {
                            errorDiv.textContent = 'Please select at least one file to upload.';
                            errorDiv.style.display = 'block';
                            return;
                        }
                        // Validate file types
                        for (var i = 0; i < files.length; i++) {
                            var ext = files[i].name.split('.').pop().toLowerCase();
                            if (!["csv","xls","xlsx","json"].includes(ext)) {
                                errorDiv.textContent = 'Unsupported file format: ' + files[i].name;
                                errorDiv.style.display = 'block';
                                return;
                            }
                        }
                        // Simulate upload progress
                        progressDiv.style.display = 'block';
                        progressBar.value = 0;
                        var progress = 0;
                        var interval = setInterval(function() {
                            progress += 10;
                            progressBar.value = progress;
                            if (progress >= 100) {
                                clearInterval(interval);
                                setTimeout(function() {
                                    progressDiv.style.display = 'none';
                                    alert('Files uploaded and sent for analysis.');
                                    closeContractAnalysisModal();
                                }, 500);
                            }
                        }, 150);
                    }
            function connectEmrSystem() {
                // Placeholder for EMR sync logic
                alert('EMR system authorized and sync started.');
                closeContractAnalysisModal();
            }
            // Benchmarking modal logic
            function showBenchmarkingModal() {
                document.getElementById('benchmarkingModal').style.display = 'block';
                document.getElementById('benchmarkDashboard').style.display = 'none';
            }
            function closeBenchmarkingModal() {
                document.getElementById('benchmarkingModal').style.display = 'none';
            }
                            function runBenchmarkAnalysis(overlay) {
                                document.getElementById('benchmarkDashboard').style.display = 'block';
                                var fedCtx = document.getElementById('fedChart').getContext('2d');
                                var matCtx = document.getElementById('mathematicaChart').getContext('2d');
                                if (window.fedChartObj) window.fedChartObj.destroy();
                                if (window.matChartObj) window.matChartObj.destroy();
                                // Federal Reserve trend line
                                window.fedChartObj = new Chart(fedCtx, {
                                    type: 'line',
                                    data: {
                                        labels: ['Q1','Q2','Q3','Q4'],
                                        datasets: [{
                                            label: 'Inflation Index',
                                            data: [2.1, 2.4, 3.2, 2.8],
                                            borderColor: '#1565c0',
                                            backgroundColor: 'rgba(21,101,192,0.1)',
                                            fill: true,
                                            tension: 0.3
                                        },{
                                            label: 'Healthcare Cost Index',
                                            data: [1.8, 2.0, 2.5, 2.3],
                                            borderColor: '#43a047',
                                            backgroundColor: 'rgba(67,160,71,0.1)',
                                            fill: true,
                                            tension: 0.3
                                        }]
                                    },
                                    options: {
                                        plugins: { legend: { position: 'top' } },
                                        responsive: true
                                    }
                                });
                                // Mathematica heatmap with overlay
                                var benchmarkData = [120, 135, 110, 145];
                                var overlayData = [];
                                if (overlay) {
                                    var overlayInput = document.getElementById('practiceOverlay').value;
                                    overlayData = overlayInput.split(',').map(function(v){ return parseInt(v.trim(),10)||0; });
                                    if (overlayData.length !== benchmarkData.length) {
                                        alert('Please enter ' + benchmarkData.length + ' values for overlay, separated by commas.');
                                        overlayData = [];
                                    }
                                }
                                var datasets = [{
                                    label: 'Avg Payment per CPT',
                                    data: benchmarkData,
                                    backgroundColor: ['#ffb300','#29b6f6','#66bb6a','#ef5350']
                                }];
                                if (overlayData.length === benchmarkData.length) {
                                    datasets.push({
                                        label: 'My Practice',
                                        data: overlayData,
                                        backgroundColor: 'rgba(21,101,192,0.3)',
                                        borderColor: '#1565c0',
                                        type: 'line',
                                        fill: false,
                                        tension: 0.3
                                    });
                                }
                                window.matChartObj = new Chart(matCtx, {
                                    type: 'bar',
                                    data: {
                                        labels: ['Region A','Region B','Region C','Region D'],
                                        datasets: datasets
                                    },
                                    options: {
                                        plugins: { legend: { position: 'top' } },
                                        responsive: true,
                                        scales: { y: { beginAtZero: true } }
                                    }
                                });
                                // Anomaly detection
                                var anomalies = benchmarkData.map(v => v > 140 ? '‚ö†Ô∏è' : '').join(' ');
                                document.getElementById('benchmarkDashboard').insertAdjacentHTML('beforeend', `<div style='margin-top:1rem;color:#d32f2f;font-weight:600;'>Anomaly Detection: ${anomalies}</div>`);
                            }
            function exportBenchmarkResults(type) {
                alert('Exported benchmark results as ' + type + '.');
            }
        </script>
            </div>

            <div class="hero-stats" id="hero-stats">
                <div class="stat-item" id="stat-1">
                    <span class="stat-number">47%</span>
                    <span class="stat-label">Average Revenue Increase</span>
                </div>
                <div class="stat-item" id="stat-2">
                    <span class="stat-number">$2.3M</span>
                    <span class="stat-label">Average Annual Savings</span>
                </div>
                <div class="stat-item" id="stat-3">
                    <span class="stat-number">AI</span>
                    <span class="stat-label">Federal Reserve Integration</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Payer Dashboard Section -->
    <section class="payer-dashboard" id="payer-dashboard" style="display: none;">
        <div class="container">
            <h2>üîç Payer Cost Analysis & Collaboration Opportunities</h2>
            
            <div class="payer-metrics-grid">
                <div class="payer-metric-card cost-savings">
                    <div class="metric-icon">üí∞</div>
                    <div class="metric-content">
                        <h3>Potential Cost Savings</h3>
                        <div class="metric-value">$8.4M</div>
                        <div class="metric-detail">Through provider collaboration</div>
                    </div>
                </div>

                <div class="payer-metric-card provider-performance">
                    <div class="metric-icon">üìä</div>
                    <div class="metric-content">
                        <h3>Provider Performance Score</h3>
                        <div class="metric-value">87%</div>
                        <div class="metric-detail">Quality & efficiency metrics</div>
                    </div>
                </div>

                <div class="payer-metric-card collaboration-opportunities">
                    <div class="metric-icon">ü§ù</div>
                    <div class="metric-content">
                        <h3>Active Collaborations</h3>
                        <div class="metric-value">23</div>
                        <div class="metric-detail">Ongoing partnerships</div>
                    </div>
                </div>

                <div class="payer-metric-card shared-savings">
                    <div class="metric-icon">üéØ</div>
                    <div class="metric-content">
                        <h3>Shared Savings Pool</h3>
                        <div class="metric-value">$2.1M</div>
                        <div class="metric-detail">Available for distribution</div>
                    </div>
                </div>
            </div>

            <div class="collaboration-tools">
                <h3>üõ†Ô∏è Payer Collaboration Tools</h3>
                <div class="tools-grid">
                    <button onclick="openProviderAnalytics()" class="tool-btn">
                        <span class="tool-icon">üìà</span>
                        <span>Provider Analytics</span>
                    </button>
                    <button onclick="openIncentiveModeler()" class="tool-btn">
                        <span class="tool-icon">üí°</span>
                        <span>Incentive Modeler</span>
                    </button>
                    <button onclick="openNegotiationPlatform()" class="tool-btn">
                        <span class="tool-icon">ü§ù</span>
                        <span>Negotiation Platform</span>
                    </button>
                    <button onclick="openCostAnalyzer()" class="tool-btn">
                        <span class="tool-icon">üîç</span>
                        <span>Cost Analyzer</span>
                    </button>
                </div>
            </div>

            <!-- Payer Data Upload Section -->
            <div class="data-upload-section payer-only">
                <div class="upload-header">
                    <h3><i class="fas fa-upload"></i> Secure Payer Data Upload</h3>
                    <div class="security-badge">
                        <i class="fas fa-lock"></i>
                        <span>256-bit Encrypted & HIPAA Compliant</span>
                    </div>
                </div>
                
                <div class="upload-types">
                    <div class="upload-category">
                        <h4><i class="fas fa-file-medical"></i> Claims Data</h4>
                        <div class="upload-zone" id="payerClaimsUpload">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop claims files here</p>
                                <span>or <button class="link-btn" onclick="triggerFileInput('payerClaimsInput')">browse files</button></span>
                                <small>Supports: CSV, Excel, HL7, X12</small>
                            </div>
                            <input type="file" id="payerClaimsInput" multiple accept=".csv,.xlsx,.hl7,.txt" style="display: none;">
                        </div>
                    </div>

                    <div class="upload-category">
                        <h4><i class="fas fa-dollar-sign"></i> Cost Analysis Data</h4>
                        <div class="upload-zone" id="payerCostUpload">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Upload cost and utilization data</p>
                                <span>or <button class="link-btn" onclick="triggerFileInput('payerCostInput')">browse files</button></span>
                                <small>Supports: CSV, Excel, JSON</small>
                            </div>
                            <input type="file" id="payerCostInput" multiple accept=".csv,.xlsx,.json" style="display: none;">
                        </div>
                    </div>

                    <div class="upload-category">
                        <h4><i class="fas fa-file-contract"></i> Contract Data</h4>
                        <div class="upload-zone" id="payerContractUpload">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Upload contract terms and rates</p>
                                <span>or <button class="link-btn" onclick="triggerFileInput('payerContractInput')">browse files</button></span>
                                <small>Supports: PDF, CSV, Excel</small>
                            </div>
                            <input type="file" id="payerContractInput" multiple accept=".pdf,.csv,.xlsx" style="display: none;">
                        </div>
                    </div>
                </div>

                <div class="privacy-notice">
                    <i class="fas fa-shield-alt"></i>
                    <div class="privacy-text">
                        <strong>Data Privacy Guarantee:</strong>
                        <p>Your payer data is encrypted and stored separately from provider data. Only aggregated, de-identified insights are shared for collaborative analysis.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Collaboration Platform Section -->
    <section class="collaboration-platform" id="collaboration-platform" style="display: none;">
        <div class="container">
            <h2>ü§ù Joint Payer-Provider Platform</h2>
            
            <div class="collaboration-dashboard">
                <div class="collaboration-header">
                    <div class="partnership-status">
                        <h3>Partnership Overview</h3>
                        <div class="status-indicators">
                            <div class="status-item">
                                <span class="status-dot active"></span>
                                <span>Active Negotiations: 5</span>
                            </div>
                            <div class="status-item">
                                <span class="status-dot success"></span>
                                <span>Completed Agreements: 12</span>
                            </div>
                            <div class="status-item">
                                <span class="status-dot pending"></span>
                                <span>Pending Reviews: 3</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="shared-metrics">
                    <div class="shared-metric">
                        <h4>Collaborative Savings</h4>
                        <div class="metric-split">
                            <div class="provider-share">
                                <span class="share-label">Provider</span>
                                <span class="share-value">$1.2M</span>
                            </div>
                            <div class="payer-share">
                                <span class="share-label">Payer</span>
                                <span class="share-value">$3.8M</span>
                            </div>
                        </div>
                    </div>

                    <div class="shared-metric">
                        <h4>Quality Improvements</h4>
                        <div class="quality-metrics">
                            <div class="quality-item">
                                <span>Patient Satisfaction</span>
                                <span class="improvement">+15%</span>
                            </div>
                            <div class="quality-item">
                                <span>Readmission Rate</span>
                                <span class="improvement">-22%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>

    <section class="stages-section">
        <h2 class="stages-title">5-Stage Revenue Optimization Process</h2>
        
        <div class="stages-grid">
            <div class="stage-card interactive" data-stage="1" onclick="activateStage(1)">
                <div class="stage-number">1</div>
                <h3 class="stage-title">Real-Time Contract Analysis</h3>
                <p class="stage-description">AI-powered analysis of payer contracts, identifying optimization opportunities and pricing gaps in real-time across all service lines.</p>
                <div class="stage-status" id="status-1">
                    <span class="status-indicator ready">Ready</span>
                </div>
                <div class="stage-progress" id="progress-1">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stage-card interactive" data-stage="2" onclick="activateStage(2)">
                <div class="stage-number">2</div>
                <h3 class="stage-title">Market Benchmarking</h3>
                <p class="stage-description">Federal Reserve economic data integration with regional market analysis to establish competitive pricing strategies and reimbursement targets.</p>
                <div class="stage-status" id="status-2">
                    <span class="status-indicator pending">Pending Stage 1</span>
                </div>
                <div class="stage-progress" id="progress-2">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stage-card interactive" data-stage="3" onclick="activateStage(3)">
                <div class="stage-number">3</div>
                <h3 class="stage-title">Automated Payer Negotiations</h3>
                <p class="stage-description">Intelligent negotiation algorithms that automatically engage with payers using data-driven proposals and real-time market intelligence.</p>
                <div class="stage-status" id="status-3">
                    <span class="status-indicator pending">Pending Stages 1-2</span>
                </div>
                <div class="stage-progress" id="progress-3">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stage-card interactive" data-stage="4" onclick="activateStage(4)">
                <div class="stage-number">4</div>
                <h3 class="stage-title">Revenue Maximization</h3>
                <p class="stage-description">Dynamic pricing optimization with predictive analytics to maximize revenue while maintaining competitive positioning and patient access.</p>
                <div class="stage-status" id="status-4">
                    <span class="status-indicator pending">Pending Stages 1-3</span>
                </div>
                <div class="stage-progress" id="progress-4">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stage-card interactive" data-stage="5" onclick="activateStage(5)">
                <div class="stage-number">5</div>
                <h3 class="stage-title">Continuous Optimization</h3>
                <p class="stage-description">Machine learning algorithms continuously monitor performance, adjust strategies, and identify new optimization opportunities across the revenue cycle.</p>
                <div class="stage-status" id="status-5">
                    <span class="status-indicator pending">Pending All Stages</span>
                </div>
                <div class="stage-progress" id="progress-5">
                    <div class="progress-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Interactive Process Control -->
        <div class="process-control">
            <h3>Revenue Optimization Control Center</h3>
            <div class="control-buttons">
                <button class="btn btn-primary" onclick="startFullProcess()">üöÄ Start Full Process</button>
                <button class="btn btn-secondary" onclick="pauseProcess()">‚è∏Ô∏è Pause</button>
                <button class="btn btn-secondary" onclick="resetProcess()">üîÑ Reset</button>
            </div>

            <div class="export-share-section">
                <h4>üìä Export & Share Results</h4>
                <div class="export-buttons">
                    <button onclick="exportToPDF()" class="btn btn-export">üìÑ Export PDF</button>
                    <button onclick="shareViaEmail()" class="btn btn-share">üìß Email Report</button>
                    <button onclick="shareToSlack()" class="btn btn-slack">üí¨ Share to Slack</button>
                    <button onclick="generatePresentation()" class="btn btn-presentation">üìà Presentation</button>
                </div>
            </div>
            <div class="overall-progress">
                <div class="progress-label">Overall Progress</div>
                <div class="progress-container">
                    <div class="progress-bar-full" id="overall-progress">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <span class="progress-text" id="progress-text">0% Complete</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Provider Data Upload Section -->
    <section class="provider-data-upload provider-only" id="provider-data-upload">
        <div class="container">
            <div class="upload-header">
                <h2><i class="fas fa-database"></i> Provider Data Integration</h2>
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>HIPAA Compliant & Encrypted</span>
                </div>
            </div>

            <div class="upload-methods">
                <div class="upload-method">
                    <div class="method-header">
                        <h3><i class="fas fa-upload"></i> Manual Data Upload</h3>
                        <p>Upload files directly from your computer</p>
                    </div>
                    
                    <div class="upload-categories">
                        <div class="upload-category">
                            <h4><i class="fas fa-file-medical-alt"></i> Patient Data</h4>
                            <div class="upload-zone" id="providerPatientUpload">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drop patient data files here</p>
                                    <button class="upload-btn" onclick="triggerFileInput('providerPatientInput')">Choose Files</button>
                                    <small>CSV, Excel, HL7, FHIR</small>
                                </div>
                                <input type="file" id="providerPatientInput" multiple accept=".csv,.xlsx,.hl7,.json" style="display: none;">
                            </div>
                        </div>

                        <div class="upload-category">
                            <h4><i class="fas fa-dollar-sign"></i> Revenue Data</h4>
                            <div class="upload-zone" id="providerRevenueUpload">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload billing and revenue files</p>
                                    <button class="upload-btn" onclick="triggerFileInput('providerRevenueInput')">Choose Files</button>
                                    <small>CSV, Excel, EDI</small>
                                </div>
                                <input type="file" id="providerRevenueInput" multiple accept=".csv,.xlsx,.edi" style="display: none;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="upload-method">
                    <div class="method-header">
                        <h3><i class="fas fa-hospital"></i> EMR Integration</h3>
                        <p>Connect directly to your Electronic Medical Records</p>
                    </div>
                    
                    <div class="emr-connections">
                        <div class="emr-option">
                            <div class="emr-info">
                                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'><rect width='100' height='40' fill='%23007bff'/><text x='50' y='25' fill='white' text-anchor='middle' font-family='Arial' font-size='12'>EPIC</text></svg>" alt="Epic EMR" class="emr-logo">
                                <div>
                                    <h4>Epic MyChart</h4>
                                    <p>Real-time patient data sync</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="connectEMR('epic')">Connect Epic</button>
                        </div>

                        <div class="emr-option">
                            <div class="emr-info">
                                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'><rect width='100' height='40' fill='%2328a745'/><text x='50' y='25' fill='white' text-anchor='middle' font-family='Arial' font-size='12'>Cerner</text></svg>" alt="Cerner EMR" class="emr-logo">
                                <div>
                                    <h4>Cerner PowerChart</h4>
                                    <p>Automated data integration</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="connectEMR('cerner')">Connect Cerner</button>
                        </div>

                        <div class="emr-option">
                            <div class="emr-info">
                                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'><rect width='100' height='40' fill='%23ff6b35'/><text x='50' y='25' fill='white' text-anchor='middle' font-family='Arial' font-size='10'>Allscripts</text></svg>" alt="Allscripts EMR" class="emr-logo">
                                <div>
                                    <h4>Allscripts</h4>
                                    <p>Secure API connection</p>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="connectEMR('allscripts')">Connect Allscripts</button>
                        </div>
                    </div>

                    <div class="custom-emr">
                        <h4><i class="fas fa-plug"></i> Other EMR System</h4>
                        <div class="custom-emr-form">
                            <input type="text" placeholder="EMR System Name" id="customEmrName">
                            <input type="text" placeholder="API Endpoint" id="customEmrEndpoint">
                            <button class="btn btn-secondary" onclick="connectCustomEMR()">Connect Custom EMR</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="privacy-notice provider-privacy">
                <i class="fas fa-lock"></i>
                <div class="privacy-text">
                    <strong>Provider Data Security:</strong>
                    <p>All provider data is encrypted, HIPAA compliant, and kept completely separate from payer information. Only aggregated insights are shared for collaborative analysis.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mathematica Database Integration Section -->
    <section class="mathematica-database-section" id="mathematica-database">
        <div class="container">
            <div class="database-header">
                <h2><i class="fas fa-calculator"></i> Mathematica Price Transparency Database</h2>
                <div class="powered-by">
                    <span>Powered by </span>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'><rect width='120' height='40' fill='%23FF6600'/><text x='60' y='25' fill='white' text-anchor='middle' font-family='Arial' font-size='14' font-weight='bold'>Mathematica</text></svg>" alt="Mathematica" class="mathematica-logo">
                </div>
            </div>

            <div class="database-overview">
                <div class="overview-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-database"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">47.2M+</div>
                            <div class="stat-label">Healthcare Transactions</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-hospital"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">12,847</div>
                            <div class="stat-label">Healthcare Facilities</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">99.7%</div>
                            <div class="stat-label">Prediction Accuracy</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-globe"></i></div>
                        <div class="stat-content">
                            <div class="stat-value">50 States</div>
                            <div class="stat-label">Coverage Area</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mathematical-models">
                <h3><i class="fas fa-function"></i> Advanced Mathematical Models</h3>
                
                <div class="models-grid">
                    <div class="model-card">
                        <div class="model-header">
                            <h4><i class="fas fa-wave-square"></i> Price Optimization Algorithm</h4>
                            <div class="complexity-badge">High</div>
                        </div>
                        <div class="model-formula">
                            <code>P* = arg min Œ£(C_i √ó Q_i) + Œª √ó R(P_i)</code>
                        </div>
                        <div class="model-description">
                            <p>Multi-variable optimization using Lagrangian multipliers to determine optimal pricing strategies across provider networks.</p>
                        </div>
                        <div class="model-actions">
                            <button onclick="runPriceOptimization()" class="btn btn-primary">Run Model</button>
                            <button onclick="viewModelDetails('price-optimization')" class="btn btn-secondary">View Details</button>
                        </div>
                    </div>

                    <div class="model-card">
                        <div class="model-header">
                            <h4><i class="fas fa-chart-area"></i> Market Prediction Engine</h4>
                            <div class="complexity-badge">Medium</div>
                        </div>
                        <div class="model-formula">
                            <code>M_t+1 = Œ± √ó M_t + Œ≤ √ó X_t + Œ≥ √ó E_t</code>
                        </div>
                        <div class="model-description">
                            <p>Time-series forecasting model incorporating market trends, economic indicators, and policy changes.</p>
                        </div>
                        <div class="model-actions">
                            <button onclick="runMarketPrediction()" class="btn btn-primary">Run Model</button>
                            <button onclick="viewModelDetails('market-prediction')" class="btn btn-secondary">View Details</button>
                        </div>
                    </div>

                    <div class="model-card">
                        <div class="model-header">
                            <h4><i class="fas fa-network-wired"></i> Network Analysis Model</h4>
                            <div class="complexity-badge">High</div>
                        </div>
                        <div class="model-formula">
                            <code>G(V,E) ‚Üí C = Œ£ w_ij √ó d_ij^(-Œ±)</code>
                        </div>
                        <div class="model-description">
                            <p>Graph-based network analysis to optimize provider-payer relationships and identify cost reduction opportunities.</p>
                        </div>
                        <div class="model-actions">
                            <button onclick="runNetworkAnalysis()" class="btn btn-primary">Run Model</button>
                            <button onclick="viewModelDetails('network-analysis')" class="btn btn-secondary">View Details</button>
                        </div>
                    </div>

                    <div class="model-card">
                        <div class="model-header">
                            <h4><i class="fas fa-brain"></i> AI Risk Assessment</h4>
                            <div class="complexity-badge">Advanced</div>
                        </div>
                        <div class="model-formula">
                            <code>R = Œ¶(W^T √ó X + b) √ó exp(-Œªt)</code>
                        </div>
                        <div class="model-description">
                            <p>Neural network-based risk assessment using deep learning to predict financial and clinical outcomes.</p>
                        </div>
                        <div class="model-actions">
                            <button onclick="runRiskAssessment()" class="btn btn-primary">Run Model</button>
                            <button onclick="viewModelDetails('risk-assessment')" class="btn btn-secondary">View Details</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="database-queries">
                <h3><i class="fas fa-search"></i> Real-Time Database Queries</h3>
                
                <div class="query-interface">
                    <div class="query-builder">
                        <h4>Price Transparency Query Builder</h4>
                        <div class="query-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Procedure Code (CPT/DRG)</label>
                                    <input type="text" id="procedureCode" placeholder="e.g., 99213, DRG-470">
                                </div>
                                <div class="form-group">
                                    <label>Geographic Region</label>
                                    <select id="geoRegion">
                                        <option value="">Select Region</option>
                                        <option value="northeast">Northeast</option>
                                        <option value="southeast">Southeast</option>
                                        <option value="midwest">Midwest</option>
                                        <option value="southwest">Southwest</option>
                                        <option value="west">West</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Payer Type</label>
                                    <select id="payerType">
                                        <option value="">All Payers</option>
                                        <option value="medicare">Medicare</option>
                                        <option value="medicaid">Medicaid</option>
                                        <option value="commercial">Commercial</option>
                                        <option value="self-pay">Self-Pay</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Date Range</label>
                                    <input type="date" id="startDate">
                                    <span> to </span>
                                    <input type="date" id="endDate">
                                </div>
                                <div class="form-group">
                                    <label>Analysis Type</label>
                                    <select id="analysisType">
                                        <option value="pricing">Price Analysis</option>
                                        <option value="trends">Trend Analysis</option>
                                        <option value="benchmarking">Benchmarking</option>
                                        <option value="optimization">Optimization</option>
                                    </select>
                                </div>
                            </div>
                            <div class="query-actions">
                                <button onclick="runDatabaseQuery()" class="btn btn-primary">
                                    <i class="fas fa-play"></i> Execute Query
                                </button>
                                <button onclick="clearQueryForm()" class="btn btn-secondary">
                                    <i class="fas fa-trash"></i> Clear
                                </button>
                                <button onclick="saveQuery()" class="btn btn-secondary">
                                    <i class="fas fa-save"></i> Save Query
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="query-results" id="queryResults" style="display: none;">
                        <h4>Query Results</h4>
                        <div class="results-summary">
                            <div class="result-metric">
                                <span class="metric-label">Average Price:</span>
                                <span class="metric-value" id="avgPrice">$0</span>
                            </div>
                            <div class="result-metric">
                                <span class="metric-label">Price Range:</span>
                                <span class="metric-value" id="priceRange">$0 - $0</span>
                            </div>
                            <div class="result-metric">
                                <span class="metric-label">Sample Size:</span>
                                <span class="metric-value" id="sampleSize">0</span>
                            </div>
                            <div class="result-metric">
                                <span class="metric-label">Confidence:</span>
                                <span class="metric-value" id="confidence">0%</span>
                            </div>
                        </div>
                        <div class="results-chart">
                            <canvas id="priceDistributionChart" width="400" height="200"></canvas>
                        </div>
                        <div class="results-export">
                            <button onclick="exportResults('csv')" class="btn btn-secondary">Export CSV</button>
                            <button onclick="exportResults('excel')" class="btn btn-secondary">Export Excel</button>
                            <button onclick="exportResults('pdf')" class="btn btn-secondary">Export PDF</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="data-sources">
                <h3><i class="fas fa-link"></i> Connected Data Sources</h3>
                <div class="sources-grid">
                    <div class="source-card active">
                        <div class="source-icon"><i class="fas fa-university"></i></div>
                        <div class="source-info">
                            <h4>CMS Price Transparency</h4>
                            <p>Medicare & Medicaid Services</p>
                            <div class="source-status">
                                <i class="fas fa-check-circle"></i> Active
                            </div>
                        </div>
                    </div>
                    <div class="source-card active">
                        <div class="source-icon"><i class="fas fa-chart-bar"></i></div>
                        <div class="source-info">
                            <h4>Hospital Price Data</h4>
                            <p>National hospital networks</p>
                            <div class="source-status">
                                <i class="fas fa-check-circle"></i> Active
                            </div>
                        </div>
                    </div>
                    <div class="source-card active">
                        <div class="source-icon"><i class="fas fa-shield-alt"></i></div>
                        <div class="source-info">
                            <h4>Insurance Claims</h4>
                            <p>Commercial payer data</p>
                            <div class="source-status">
                                <i class="fas fa-check-circle"></i> Active
                            </div>
                        </div>
                    </div>
                    <div class="source-card pending">
                        <div class="source-icon"><i class="fas fa-stethoscope"></i></div>
                        <div class="source-info">
                            <h4>Clinical Outcomes</h4>
                            <p>Quality measure databases</p>
                            <div class="source-status">
                                <i class="fas fa-clock"></i> Connecting
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Provider Analytics & Data Visualization Tool -->
    <section class="provider-analytics-tool provider-only" id="provider-analytics-tool">
        <div class="container">
            <div class="analytics-header">
                <h2><i class="fas fa-chart-line"></i> Advanced Provider Analytics Dashboard</h2>
                <div class="data-sources-indicator">
                    <span class="source-badge active"><i class="fas fa-calculator"></i> Mathematica DB</span>
                    <span class="source-badge active"><i class="fas fa-university"></i> Federal Reserve</span>
                    <span class="source-badge active"><i class="fas fa-database"></i> Live Data</span>
                </div>
            </div>

            <div class="analytics-workspace">
                <!-- Data Selection Panel -->
                <div class="data-selection-panel">
                    <h3><i class="fas fa-filter"></i> Data Selection & Filters</h3>
                    
                    <div class="data-source-selector">
                        <h4>Primary Data Sources</h4>
                        <div class="source-checkboxes">
                            <label class="checkbox-container">
                                <input type="checkbox" id="mathematicaData" checked>
                                <span class="checkmark"></span>
                                Mathematica Price Database (47.2M records)
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" id="federalReserveData" checked>
                                <span class="checkmark"></span>
                                Federal Reserve Economic Data (FRED)
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" id="cmsData" checked>
                                <span class="checkmark"></span>
                                CMS Price Transparency Data
                            </label>
                            <label class="checkbox-container">
                                <input type="checkbox" id="providerData">
                                <span class="checkmark"></span>
                                Your Provider Data (Upload Required)
                            </label>
                        </div>
                    </div>

                    <div class="filter-controls">
                        <h4>Data Filters</h4>
                        <div class="filter-grid">
                            <div class="filter-group">
                                <label>Time Period</label>
                                <select id="timePeriod">
                                    <option value="last30days">Last 30 Days</option>
                                    <option value="last90days">Last 90 Days</option>
                                    <option value="last6months">Last 6 Months</option>
                                    <option value="lastyear" selected>Last Year</option>
                                    <option value="last2years">Last 2 Years</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Service Categories</label>
                                <select id="serviceCategories" multiple>
                                    <option value="emergency">Emergency Services</option>
                                    <option value="surgery">Surgical Procedures</option>
                                    <option value="imaging">Medical Imaging</option>
                                    <option value="cardiology">Cardiology</option>
                                    <option value="oncology">Oncology</option>
                                    <option value="orthopedics">Orthopedics</option>
                                    <option value="preventive">Preventive Care</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Geographic Scope</label>
                                <select id="geoScope">
                                    <option value="local">Local Market</option>
                                    <option value="regional">Regional</option>
                                    <option value="state">State-wide</option>
                                    <option value="national" selected>National</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Payer Mix</label>
                                <select id="payerMix" multiple>
                                    <option value="medicare" selected>Medicare</option>
                                    <option value="medicaid" selected>Medicaid</option>
                                    <option value="commercial" selected>Commercial</option>
                                    <option value="selfpay">Self-Pay</option>
                                </select>
                            </div>
                        </div>
                        <button onclick="applyFilters()" class="btn btn-primary filter-btn">
                            <i class="fas fa-play"></i> Apply Filters & Refresh Data
                        </button>
                    </div>
                </div>

                <!-- Visualization Panel -->
                <div class="visualization-panel">
                    <div class="viz-controls">
                        <h3><i class="fas fa-chart-bar"></i> Data Visualization</h3>
                        <div class="chart-type-selector">
                            <button onclick="switchChartType('line')" class="chart-btn active" data-type="line">
                                <i class="fas fa-chart-line"></i> Line Chart
                            </button>
                            <button onclick="switchChartType('bar')" class="chart-btn" data-type="bar">
                                <i class="fas fa-chart-bar"></i> Bar Chart
                            </button>
                            <button onclick="switchChartType('scatter')" class="chart-btn" data-type="scatter">
                                <i class="fas fa-braille"></i> Scatter Plot
                            </button>
                            <button onclick="switchChartType('heatmap')" class="chart-btn" data-type="heatmap">
                                <i class="fas fa-th"></i> Heatmap
                            </button>
                            <button onclick="switchChartType('geo')" class="chart-btn" data-type="geo">
                                <i class="fas fa-globe-americas"></i> Geographic
                            </button>
                        </div>
                    </div>

                    <div class="main-chart-container">
                        <canvas id="mainAnalyticsChart" width="800" height="400"></canvas>
                        <div class="chart-overlay" id="chartOverlay">
                            <div class="loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p>Loading analytics data...</p>
                            </div>
                        </div>
                    </div>

                    <div class="chart-insights">
                        <div class="insight-card">
                            <div class="insight-icon"><i class="fas fa-trending-up"></i></div>
                            <div class="insight-content">
                                <h4>Price Trend Analysis</h4>
                                <p id="priceTrendInsight">Average prices increased 3.2% compared to Federal Reserve inflation data</p>
                            </div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-icon"><i class="fas fa-bullseye"></i></div>
                            <div class="insight-content">
                                <h4>Optimization Opportunity</h4>
                                <p id="optimizationInsight">Mathematica models suggest 12.5% revenue increase potential</p>
                            </div>
                        </div>
                        <div class="insight-card">
                            <div class="insight-icon"><i class="fas fa-balance-scale"></i></div>
                            <div class="insight-content">
                                <h4>Market Position</h4>
                                <p id="marketPositionInsight">Your pricing is 8.3% below regional average per Federal Reserve benchmarks</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Manipulation Panel -->
                <div class="data-manipulation-panel">
                    <h3><i class="fas fa-cogs"></i> Data Manipulation & Analysis</h3>
                    
                    <div class="manipulation-tools">
                        <div class="tool-section">
                            <h4>Statistical Analysis</h4>
                            <div class="tool-buttons">
                                <button onclick="runStatisticalAnalysis('correlation')" class="tool-btn">
                                    <i class="fas fa-link"></i> Correlation Analysis
                                </button>
                                <button onclick="runStatisticalAnalysis('regression')" class="tool-btn">
                                    <i class="fas fa-chart-line"></i> Regression Analysis
                                </button>
                                <button onclick="runStatisticalAnalysis('forecast')" class="tool-btn">
                                    <i class="fas fa-crystal-ball"></i> Forecasting
                                </button>
                                <button onclick="runStatisticalAnalysis('clustering')" class="tool-btn">
                                    <i class="fas fa-project-diagram"></i> Clustering
                                </button>
                            </div>
                        </div>

                        <div class="tool-section">
                            <h4>Federal Reserve Integration</h4>
                            <div class="tool-buttons">
                                <button onclick="federalReserveAnalysis('inflation')" class="tool-btn fed-btn">
                                    <i class="fas fa-percentage"></i> Inflation Impact
                                </button>
                                <button onclick="federalReserveAnalysis('interest')" class="tool-btn fed-btn">
                                    <i class="fas fa-money-bill-wave"></i> Interest Rate Effects
                                </button>
                                <button onclick="federalReserveAnalysis('economic')" class="tool-btn fed-btn">
                                    <i class="fas fa-chart-area"></i> Economic Indicators
                                </button>
                                <button onclick="federalReserveAnalysis('regional')" class="tool-btn fed-btn">
                                    <i class="fas fa-map-marked-alt"></i> Regional Analysis
                                </button>
                            </div>
                        </div>

                        <div class="tool-section">
                            <h4>Mathematica Models</h4>
                            <div class="tool-buttons">
                                <button onclick="mathematicaAnalysis('optimization')" class="tool-btn math-btn">
                                    <i class="fas fa-calculator"></i> Price Optimization
                                </button>
                                <button onclick="mathematicaAnalysis('prediction')" class="tool-btn math-btn">
                                    <i class="fas fa-brain"></i> ML Predictions
                                </button>
                                <button onclick="mathematicaAnalysis('risk')" class="tool-btn math-btn">
                                    <i class="fas fa-shield-alt"></i> Risk Assessment
                                </button>
                                <button onclick="mathematicaAnalysis('simulation')" class="tool-btn math-btn">
                                    <i class="fas fa-play-circle"></i> Monte Carlo
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-results" id="analysisResults" style="display: none;">
                        <h4><i class="fas fa-chart-pie"></i> Analysis Results</h4>
                        <div class="results-grid">
                            <div class="result-section">
                                <h5>Key Metrics</h5>
                                <div id="keyMetrics"></div>
                            </div>
                            <div class="result-section">
                                <h5>Statistical Significance</h5>
                                <div id="significance"></div>
                            </div>
                            <div class="result-section">
                                <h5>Recommendations</h5>
                                <div id="recommendations"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export & Reporting Panel -->
                <div class="export-reporting-panel">
                    <h3><i class="fas fa-download"></i> Export & Reporting</h3>
                    
                    <div class="export-options">
                        <div class="export-format">
                            <h4>Data Export</h4>
                            <div class="export-buttons">
                                <button onclick="exportAnalyticsData('csv')" class="export-btn">
                                    <i class="fas fa-file-csv"></i> Export CSV
                                </button>
                                <button onclick="exportAnalyticsData('excel')" class="export-btn">
                                    <i class="fas fa-file-excel"></i> Export Excel
                                </button>
                                <button onclick="exportAnalyticsData('json')" class="export-btn">
                                    <i class="fas fa-code"></i> Export JSON
                                </button>
                                <button onclick="exportAnalyticsData('pdf')" class="export-btn">
                                    <i class="fas fa-file-pdf"></i> Export Report
                                </button>
                            </div>
                        </div>

                        <div class="report-generation">
                            <h4>Automated Reports</h4>
                            <div class="report-schedule">
                                <select id="reportFrequency">
                                    <option value="daily">Daily Reports</option>
                                    <option value="weekly" selected>Weekly Reports</option>
                                    <option value="monthly">Monthly Reports</option>
                                    <option value="quarterly">Quarterly Reports</option>
                                </select>
                                <button onclick="scheduleReport()" class="btn btn-secondary">
                                    <i class="fas fa-calendar-plus"></i> Schedule Report
                                </button>
                            </div>
                        </div>

                        <div class="sharing-options">
                            <h4>Share & Collaborate</h4>
                            <div class="share-buttons">
                                <button onclick="shareAnalytics('email')" class="share-btn">
                                    <i class="fas fa-envelope"></i> Email
                                </button>
                                <button onclick="shareAnalytics('slack')" class="share-btn">
                                    <i class="fab fa-slack"></i> Slack
                                </button>
                                <button onclick="shareAnalytics('teams')" class="share-btn">
                                    <i class="fab fa-microsoft"></i> Teams
                                </button>
                                <button onclick="shareAnalytics('link')" class="share-btn">
                                    <i class="fas fa-link"></i> Share Link
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Integrated Healthcare Applications Suite -->
    <section class="healthcare-apps-suite" id="healthcare-apps-suite">
        <div class="container">
            <div class="suite-header">
                <h2><i class="fas fa-heartbeat"></i> Integrated Healthcare Applications Suite</h2>
                <p class="suite-description">Comprehensive digital health platform with culturally competent care and advanced analytics</p>
            </div>

            <div class="apps-grid">
                <div class="app-card featured" data-app="health-analyzer">
                    <div class="app-icon">
                        <i class="fas fa-chart-pulse"></i>
                    </div>
                    <div class="app-content">
                        <h3>Health Analyzer</h3>
                        <div class="app-tags">
                            <span class="tag wearable">Wearable Integration</span>
                            <span class="tag biometric">Biometric Data</span>
                        </div>
                        <p class="app-description">
                            The Health Analyzer revolutionizes personal health monitoring through seamless integration with over 50+ wearable devices including Apple Watch, Fitbit, Garmin, and specialized medical-grade sensors. This sophisticated platform continuously collects and analyzes biometric data including heart rate variability, blood oxygen levels, sleep patterns, stress indicators, and activity metrics to provide real-time health insights. Advanced machine learning algorithms process this data to detect early warning signs of health issues, predict potential complications, and offer personalized wellness recommendations. The system maintains HIPAA-compliant data security while providing healthcare providers with comprehensive patient health trends, enabling proactive care management and improved patient outcomes through data-driven insights.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> 50+ Wearable Device Integration</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Real-time Biometric Monitoring</div>
                            <div class="feature-item"><i class="fas fa-check"></i> AI-Powered Health Predictions</div>
                            <div class="feature-item"><i class="fas fa-check"></i> HIPAA-Compliant Data Security</div>
                        </div>
                        <button onclick="launchApp('health-analyzer')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Launch Health Analyzer
                        </button>
                    </div>
                </div>

                <div class="app-card featured" data-app="telehealth-scheduling">
                    <div class="app-icon">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="app-content">
                        <h3>Telehealth Scheduling</h3>
                        <div class="app-tags">
                            <span class="tag cultural">Culturally Competent</span>
                            <span class="tag telemedicine">Telemedicine</span>
                        </div>
                        <p class="app-description">
                            The Telehealth Scheduling platform addresses healthcare disparities by providing culturally competent telemedicine services that prioritize diversity, equity, and inclusion in virtual care delivery. This innovative system matches patients with healthcare providers who share similar cultural backgrounds, languages, and understand specific health challenges faced by different communities. The platform includes built-in translation services supporting 40+ languages, culturally-sensitive health assessments, and bias-aware clinical decision support tools. Advanced scheduling algorithms consider cultural preferences, religious observances, and community-specific health needs while ensuring equitable access to quality healthcare. The system also provides cultural competency training for providers and tracks health equity metrics to continuously improve care delivery for underserved populations.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> Cultural Provider Matching</div>
                            <div class="feature-item"><i class="fas fa-check"></i> 40+ Language Translation</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Bias-Aware Clinical Tools</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Health Equity Tracking</div>
                        </div>
                        <button onclick="launchApp('telehealth-scheduling')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Schedule Telehealth Visit
                        </button>
                    </div>
                </div>

                <div class="app-card" data-app="prescription-refill">
                    <div class="app-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <div class="app-content">
                        <h3>Prescription Refill System</h3>
                        <div class="app-tags">
                            <span class="tag medication">Medication Management</span>
                            <span class="tag automation">Smart Refills</span>
                        </div>
                        <p class="app-description">
                            The Prescription Refill System streamlines medication management through intelligent automation and comprehensive patient safety protocols. This advanced platform integrates with electronic health records and pharmacy networks to automatically monitor prescription statuses, detect potential drug interactions, and schedule refills based on patient usage patterns. The system employs sophisticated algorithms to optimize medication adherence through personalized reminder systems, dosage tracking, and side effect monitoring. Features include automatic insurance verification, generic substitution recommendations for cost savings, and seamless coordination between multiple pharmacies and healthcare providers. The platform also provides medication counseling resources, tracks therapeutic outcomes, and generates detailed reports for healthcare providers to optimize treatment plans and ensure patient safety.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> Automated Refill Scheduling</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Drug Interaction Detection</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Adherence Monitoring</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Pharmacy Network Integration</div>
                        </div>
                        <button onclick="launchApp('prescription-refill')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Manage Prescriptions
                        </button>
                    </div>
                </div>

                <div class="app-card" data-app="visits-manager">
                    <div class="app-icon">
                        <i class="fas fa-folder-medical"></i>
                    </div>
                    <div class="app-content">
                        <h3>My Visits Manager</h3>
                        <div class="app-tags">
                            <span class="tag records">Medical Records</span>
                            <span class="tag storage">Cloud Storage</span>
                        </div>
                        <p class="app-description">
                            My Visits Manager serves as a comprehensive digital health repository that empowers patients to securely upload, store, and manage their complete medical history in one centralized, HIPAA-compliant platform. This sophisticated system allows patients to digitize paper records, upload lab results, imaging studies, and physician notes while maintaining complete control over data sharing permissions. Advanced optical character recognition (OCR) technology automatically extracts and categorizes medical information, creating searchable, structured health records. The platform integrates with multiple electronic health record systems, enabling seamless data exchange between healthcare providers while maintaining patient privacy. Features include visit timeline visualization, treatment outcome tracking, appointment summaries, and the ability to generate comprehensive health reports for new providers or second opinions.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> Complete Medical Record Storage</div>
                            <div class="feature-item"><i class="fas fa-check"></i> OCR Document Processing</div>
                            <div class="feature-item"><i class="fas fa-check"></i> EHR System Integration</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Privacy-Controlled Sharing</div>
                        </div>
                        <button onclick="launchApp('visits-manager')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Access Medical Records
                        </button>
                    </div>
                </div>

                <div class="app-card featured" data-app="cultural-health-ai">
                    <div class="app-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="app-content">
                        <h3>Cultural Health AI Assistant</h3>
                        <div class="app-tags">
                            <span class="tag ai">AI-Powered</span>
                            <span class="tag bias-aware">Bias-Aware</span>
                        </div>
                        <p class="app-description">
                            The Cultural Health AI Assistant represents a breakthrough in equitable healthcare technology, utilizing advanced artificial intelligence trained on diverse datasets to provide bias-aware health guidance that acknowledges and addresses healthcare disparities across different populations. This revolutionary AI system incorporates cultural, socioeconomic, and genetic factors specific to various ethnic and demographic groups to deliver personalized health recommendations that are culturally sensitive and medically accurate. The AI continuously learns from diverse patient outcomes to reduce algorithmic bias and improve health equity. Features include culturally-appropriate health education materials, risk assessments calibrated for different populations, medication efficacy predictions based on genetic markers, and lifestyle recommendations that respect cultural practices and dietary preferences while promoting optimal health outcomes.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> Bias-Aware AI Algorithms</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Cultural Health Assessments</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Population-Specific Guidance</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Continuous Bias Reduction</div>
                        </div>
                        <button onclick="launchApp('cultural-health-ai')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Chat with Health AI
                        </button>
                    </div>
                </div>

                <div class="app-card" data-app="provider-directory">
                    <div class="app-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="app-content">
                        <h3>Provider Directory Search</h3>
                        <div class="app-tags">
                            <span class="tag network">2,500+ Physicians</span>
                            <span class="tag search">Advanced Search</span>
                        </div>
                        <p class="app-description">
                            The Provider Directory Search platform offers access to an extensive, carefully curated network of over 2,500+ board-certified physicians, specialists, and healthcare providers committed to delivering culturally competent and equitable care. This comprehensive directory goes beyond basic provider listings by incorporating detailed profiles that include cultural backgrounds, languages spoken, specialty certifications, patient satisfaction ratings, and specific expertise in treating diverse populations. Advanced search algorithms allow patients to filter providers based on insurance acceptance, location preferences, cultural compatibility, gender preferences, and specialized treatment approaches. The platform includes real-time appointment availability, virtual consultation options, provider reviews from diverse patient populations, and detailed information about each provider's commitment to health equity and inclusive care practices.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> 2,500+ Verified Providers</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Cultural Compatibility Matching</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Real-time Availability</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Diverse Patient Reviews</div>
                        </div>
                        <button onclick="launchApp('provider-directory')" class="app-launch-btn">
                            <i class="fas fa-play"></i> Find Providers
                        </button>
                    </div>
                </div>

                <div class="app-card featured" data-app="health-equity-analytics">
                    <div class="app-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="app-content">
                        <h3>Health Equity Analytics</h3>
                        <div class="app-tags">
                            <span class="tag analytics">Population Analytics</span>
                            <span class="tag equity">Health Equity</span>
                        </div>
                        <p class="app-description">
                            Health Equity Analytics provides comprehensive, population-specific health metrics and insights designed to identify, track, and address healthcare disparities across different demographic groups. This powerful analytics platform aggregates and analyzes health data from diverse sources to reveal patterns of inequity in care access, treatment outcomes, and health determinants. The system generates detailed reports on health disparities by race, ethnicity, socioeconomic status, geographic location, and other social determinants of health. Advanced visualization tools display trends in health outcomes, access barriers, and care quality across populations, enabling healthcare organizations to develop targeted interventions. The platform includes predictive modeling to forecast health trends, risk stratification tools for vulnerable populations, and benchmarking capabilities that compare organizational performance against national health equity standards and best practices.
                        </p>
                        <div class="app-features">
                            <div class="feature-item"><i class="fas fa-check"></i> Population Health Tracking</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Disparity Identification</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Predictive Health Modeling</div>
                            <div class="feature-item"><i class="fas fa-check"></i> Equity Benchmarking</div>
                        </div>
                        <button onclick="launchApp('health-equity-analytics')" class="app-launch-btn">
                            <i class="fas fa-play"></i> View Analytics Dashboard
                        </button>
                    </div>
                </div>
            </div>

            <div class="suite-integration">
                <h3><i class="fas fa-link"></i> Integrated Platform Benefits</h3>
                <div class="integration-features">
                    <div class="integration-item">
                        <i class="fas fa-sync"></i>
                        <div>
                            <h4>Seamless Data Flow</h4>
                            <p>All applications share data seamlessly while maintaining privacy controls</p>
                        </div>
                    </div>
                    <div class="integration-item">
                        <i class="fas fa-shield-alt"></i>
                        <div>
                            <h4>Unified Security</h4>
                            <p>Enterprise-grade security across all healthcare applications</p>
                        </div>
                    </div>
                    <div class="integration-item">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <h4>Comprehensive Analytics</h4>
                            <p>Cross-application insights for better health outcomes</p>
                        </div>
                    </div>
                    <div class="integration-item">
                        <i class="fas fa-users"></i>
                        <div>
                            <h4>Cultural Competency</h4>
                            <p>Bias-aware technology across all healthcare interactions</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Real-time Alerts Section -->
    <section class="alerts-section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; color: #1e3c72; margin-bottom: 2rem;">üîî Real-time Revenue Alerts</h2>
            <div class="alerts-dashboard">
                <div class="alerts-header">
                    <div class="alert-controls">
                        <button onclick="toggleAlerts()" class="btn btn-secondary" id="alert-toggle">üîî Enable Alerts</button>
                        <button onclick="showAlertSettings()" class="btn btn-secondary">‚öôÔ∏è Settings</button>
                        <button onclick="clearAllAlerts()" class="btn btn-warning">üóëÔ∏è Clear All</button>
                    </div>
                </div>
                
                <div class="alerts-container" id="alerts-container">
                    <div class="alert-item contract-alert">
                        <div class="alert-icon">üìã</div>
                        <div class="alert-content">
                            <div class="alert-title">Contract Renewal Opportunity</div>
                            <div class="alert-message">Blue Cross contract expires in 45 days - negotiate 15% rate increase</div>
                            <div class="alert-time">2 hours ago</div>
                        </div>
                        <div class="alert-actions">
                            <button onclick="handleAlert(this, 'contract')" class="btn-small btn-primary">Review</button>
                        </div>
                    </div>
                    
                    <div class="alert-item market-alert">
                        <div class="alert-icon">üìä</div>
                        <div class="alert-content">
                            <div class="alert-title">Market Price Change Detected</div>
                            <div class="alert-message">Regional MRI pricing increased 8% - adjust rates accordingly</div>
                            <div class="alert-time">4 hours ago</div>
                        </div>
                        <div class="alert-actions">
                            <button onclick="handleAlert(this, 'pricing')" class="btn-small btn-marketing">Update</button>
                        </div>
                    </div>

                    <div class="alert-item opportunity-alert">
                        <div class="alert-icon">üí∞</div>
                        <div class="alert-content">
                            <div class="alert-title">Revenue Optimization Opportunity</div>
                            <div class="alert-message">Cardiology dept. showing 23% underperformance - optimize now</div>
                            <div class="alert-time">6 hours ago</div>
                        </div>
                        <div class="alert-actions">
                            <button onclick="handleAlert(this, 'optimize')" class="btn-small btn-secondary">Optimize</button>
                        </div>
                    </div>
                </div>
                
                <div class="alert-summary">
                    <div class="summary-item">
                        <span class="summary-number" id="active-alerts">3</span>
                        <span class="summary-label">Active Alerts</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-number" id="potential-revenue">$1.2M</span>
                        <span class="summary-label">Potential Revenue</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-number" id="time-sensitive">2</span>
                        <span class="summary-label">Time Sensitive</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Integration Dashboard Section -->
    <section class="integration-section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; color: #1e3c72; margin-bottom: 2rem;">üîó MedPact Integration Hub</h2>
            <p style="text-align: center; font-size: 1.2rem; color: #666; margin-bottom: 3rem;">Seamless access to your entire healthcare technology ecosystem</p>
            
            <div class="integration-grid">
                <div class="integration-card" onclick="openIntegration('ehr')">
                    <div class="integration-icon">üè•</div>
                    <h3>Electronic Health Records</h3>
                    <p>Access patient data, clinical workflows, and documentation systems</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('billing')">
                    <div class="integration-icon">üí∞</div>
                    <h3>Billing & Claims</h3>
                    <p>Manage revenue cycle, claims processing, and payment workflows</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('analytics')">
                    <div class="integration-icon">üìä</div>
                    <h3>Healthcare Analytics</h3>
                    <p>Business intelligence, reporting, and performance dashboards</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('patient-portal')">
                    <div class="integration-icon">üë•</div>
                    <h3>Patient Portal</h3>
                    <p>Patient engagement, scheduling, and communication tools</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('pharmacy')">
                    <div class="integration-icon">üíä</div>
                    <h3>Pharmacy Management</h3>
                    <p>Medication management, inventory, and prescription workflows</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('compliance')">
                    <div class="integration-icon">üõ°Ô∏è</div>
                    <h3>Compliance & Security</h3>
                    <p>HIPAA compliance, security monitoring, and audit management</p>
                    <div class="integration-status connected">‚úÖ Connected</div>
                </div>

                <div class="integration-card" onclick="openIntegration('lab')">
                    <div class="integration-icon">üî¨</div>
                    <h3>Laboratory Systems</h3>
                    <p>Lab orders, results management, and diagnostic workflows</p>
                    <div class="integration-status pending">‚è≥ Pending</div>
                </div>

                <div class="integration-card" onclick="openIntegration('marketplace')">
                    <div class="integration-icon">üõí</div>
                    <h3>Full Marketplace</h3>
                    <p>Access all 64+ healthcare applications and services</p>
                    <div class="integration-status highlight">‚≠ê Explore</div>
                </div>
            </div>

            <div class="quick-actions">
                <h3 style="text-align: center; margin-bottom: 1.5rem;">üöÄ Quick Actions</h3>
                <div class="actions-grid">
                    <button onclick="openIntegration('ehr')" class="action-btn">
                        <span class="action-icon">üë§</span>
                        <span>View Patients</span>
                    </button>
                    <button onclick="openIntegration('billing')" class="action-btn">
                        <span class="action-icon">üí≥</span>
                        <span>Process Claims</span>
                    </button>
                    <button onclick="openIntegration('analytics')" class="action-btn">
                        <span class="action-icon">üìà</span>
                        <span>View Reports</span>
                    </button>
                    <button onclick="syncAllSystems()" class="action-btn primary">
                        <span class="action-icon">üîÑ</span>
                        <span>Sync All Systems</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="features-section">
        <div class="container">
            <h2 style="text-align: center; font-size: 2.5rem; color: #1e3c72; margin-bottom: 3rem;">Enterprise Features</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üß†</div>
                    <h3 class="feature-title">AI Analysis Engine</h3>
                    <p>Advanced machine learning algorithms analyze contract terms, market conditions, and reimbursement patterns to identify optimization opportunities.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üè¶</div>
                    <h3 class="feature-title">Federal Reserve Integration</h3>
                    <p>Real-time economic data integration provides market intelligence and inflation-adjusted pricing recommendations for strategic positioning.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3 class="feature-title">Real-Time Processing</h3>
                    <p>Instant contract analysis and pricing optimization with live market data integration for immediate strategic decision making.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3 class="feature-title">Automated Negotiations</h3>
                    <p>Intelligent payer negotiation systems that automatically generate proposals and manage contract renewal processes.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3 class="feature-title">Revenue Analytics</h3>
                    <p>Comprehensive revenue tracking with predictive modeling and performance benchmarking against industry standards.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3 class="feature-title">HIPAA Compliance</h3>
                    <p>Enterprise-grade security with full HIPAA compliance and SOC2 certification for healthcare data protection.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="demo-section" id="demo">
        <div class="container">
            <div class="demo-container">
                <h2 class="demo-title">Live Revenue Optimization Dashboard</h2>
                <p style="color: #666; margin-bottom: 2rem;">Real-time view of your healthcare revenue optimization performance</p>
                
                <div class="demo-dashboard">
                    <h3 style="color: #1e3c72; margin-bottom: 1.5rem;">Enterprise Healthcare System - October 2025</h3>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">$47.2M</div>
                            <div class="metric-label">Monthly Revenue</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-value">+31%</div>
                            <div class="metric-label">YoY Growth</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-value">94%</div>
                            <div class="metric-label">Contract Optimization</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-value">$2.1M</div>
                            <div class="metric-label">Monthly Savings</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-value">847</div>
                            <div class="metric-label">Active Negotiations</div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-value">99.7%</div>
                            <div class="metric-label">Uptime</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem; padding: 1rem; background: #e3f2fd; border-radius: 8px;">
                        <p style="color: #1565c0; font-weight: 600;">üí° AI Insight: Federal Reserve data indicates 3.2% inflation adjustment opportunity in cardiology contracts. Automated negotiation initiated with top 3 payers.</p>
                    </div>
                </div>
                
                <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button onclick="returnToHome()" class="btn btn-secondary return-home-btn">
                        <i class="fas fa-home"></i> Return to Home
                    </button>
                    <a href="#trial" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">Start 30-Day Enterprise Trial</a>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer" id="contact">
        <div class="container">
            <h3>Ready to Optimize Your Healthcare Revenue?</h3>
            <p style="margin: 1rem 0;">Enterprise-grade price transparency with AI-powered optimization</p>
            <p style="opacity: 0.8;">Contact: enterprise@medpact.com | 1-800-MEDPACT</p>
            <p style="margin-top: 2rem; opacity: 0.6;">&copy; 2025 MedPact Enterprise - Advanced Price Transparency. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Revenue Optimization Process State
        let processState = {
            currentStage: 0,
            completedStages: [],
            isRunning: false,
            isPaused: false
        };

        // Stage data and processing functions
        const stageData = {
            1: {
                name: 'Contract Analysis',
                duration: 3000,
                steps: [
                    'Scanning payer contracts...',
                    'Identifying pricing gaps...',
                    'Analyzing reimbursement rates...',
                    'Generating optimization report...'
                ]
            },
            2: {
                name: 'Market Benchmarking',
                duration: 2500,
                steps: [
                    'Connecting to Federal Reserve...',
                    'Downloading market data...',
                    'Analyzing regional trends...',
                    'Calculating benchmarks...'
                ]
            },
            3: {
                name: 'Payer Negotiations',
                duration: 4000,
                steps: [
                    'Preparing negotiation proposals...',
                    'Engaging with payer systems...',
                    'Processing counteroffers...',
                    'Finalizing agreements...'
                ]
            },
            4: {
                name: 'Revenue Maximization',
                duration: 3500,
                steps: [
                    'Optimizing pricing models...',
                    'Running predictive analytics...',
                    'Calculating revenue impact...',
                    'Implementing changes...'
                ]
            },
            5: {
                name: 'Continuous Optimization',
                duration: 2000,
                steps: [
                    'Setting up monitoring...',
                    'Configuring alerts...',
                    'Activating ML algorithms...',
                    'Process complete!'
                ]
            }
        };

        // Activate individual stage
        function activateStage(stageNum) {
            if (processState.isRunning && processState.currentStage !== stageNum) {
                showNotification('Process is currently running. Please wait or reset to start a different stage.', 'warning');
                return;
            }

            if (stageNum > 1 && !processState.completedStages.includes(stageNum - 1)) {
                showNotification(`Please complete Stage ${stageNum - 1} first.`, 'warning');
                return;
            }

            runStage(stageNum);
        }

        // Run a specific stage
        async function runStage(stageNum) {
            if (processState.completedStages.includes(stageNum)) {
                showNotification(`Stage ${stageNum} already completed!`, 'info');
                return;
            }

            processState.isRunning = true;
            processState.currentStage = stageNum;

            const stageCard = document.querySelector(`[data-stage="${stageNum}"]`);
            const statusElement = document.getElementById(`status-${stageNum}`);
            const progressElement = document.querySelector(`#progress-${stageNum} .progress-bar`);

            // Reset progress
            progressElement.style.width = '0%';
            
            // Set stage as active
            stageCard.classList.add('active');
            statusElement.innerHTML = '<span class="status-indicator processing">Processing</span>';

            // Run stage steps
            const steps = stageData[stageNum].steps;
            const stepDuration = stageData[stageNum].duration / steps.length;

            for (let i = 0; i < steps.length; i++) {
                if (processState.isPaused) {
                    await waitForResume();
                }

                showStageProgress(stageNum, steps[i]);
                progressElement.style.width = `${((i + 1) / steps.length) * 100}%`;
                
                await sleep(stepDuration);
            }

            // Complete stage
            completeStage(stageNum);
        }

        // Complete a stage
        function completeStage(stageNum) {
            const stageCard = document.querySelector(`[data-stage="${stageNum}"]`);
            const statusElement = document.getElementById(`status-${stageNum}`);

            stageCard.classList.remove('active');
            stageCard.classList.add('completed');
            statusElement.innerHTML = '<span class="status-indicator completed">‚úÖ Completed</span>';

            processState.completedStages.push(stageNum);
            processState.currentStage = 0;

            // Update next stage status
            if (stageNum < 5) {
                const nextStatusElement = document.getElementById(`status-${stageNum + 1}`);
                nextStatusElement.innerHTML = '<span class="status-indicator ready">Ready</span>';
            }

            // Update overall progress
            updateOverallProgress();

            showNotification(`Stage ${stageNum}: ${stageData[stageNum].name} completed successfully!`, 'success');

            // If all stages complete, show final success
            if (processState.completedStages.length === 5) {
                processState.isRunning = false;
                showNotification('üéâ All stages completed! Revenue optimization process is now active.', 'success');
                updateDashboardMetrics();
            } else {
                processState.isRunning = false;
            }
        }

        // Start full process (all stages sequentially)
        async function startFullProcess() {
            if (processState.isRunning) {
                showNotification('Process is already running!', 'warning');
                return;
            }

            showNotification('Starting full revenue optimization process...', 'info');
            
            for (let stage = 1; stage <= 5; stage++) {
                if (!processState.completedStages.includes(stage)) {
                    await new Promise(resolve => {
                        const originalComplete = completeStage;
                        window.completeStage = function(stageNum) {
                            originalComplete(stageNum);
                            if (stageNum === stage) {
                                resolve();
                            }
                        };
                        runStage(stage);
                    });
                    
                    // Small delay between stages
                    await sleep(500);
                }
            }
        }

        // Pause process
        function pauseProcess() {
            if (!processState.isRunning) {
                showNotification('No process is currently running.', 'warning');
                return;
            }

            processState.isPaused = !processState.isPaused;
            const btn = event.target;
            
            if (processState.isPaused) {
                btn.innerHTML = '‚ñ∂Ô∏è Resume';
                showNotification('Process paused.', 'info');
            } else {
                btn.innerHTML = '‚è∏Ô∏è Pause';
                showNotification('Process resumed.', 'info');
            }
        }

        // Reset process
        function resetProcess() {
            processState = {
                currentStage: 0,
                completedStages: [],
                isRunning: false,
                isPaused: false
            };

            // Reset all stage cards
            for (let i = 1; i <= 5; i++) {
                const stageCard = document.querySelector(`[data-stage="${i}"]`);
                const statusElement = document.getElementById(`status-${i}`);
                const progressElement = document.querySelector(`#progress-${i} .progress-bar`);

                stageCard.classList.remove('active', 'completed');
                progressElement.style.width = '0%';

                if (i === 1) {
                    statusElement.innerHTML = '<span class="status-indicator ready">Ready</span>';
                } else {
                    statusElement.innerHTML = `<span class="status-indicator pending">Pending Stages 1-${i-1}</span>`;
                }
            }

            // Reset overall progress
            document.querySelector('#overall-progress .progress-fill').style.width = '0%';
            document.getElementById('progress-text').textContent = '0% Complete';

            // Reset pause button
            document.querySelector('.control-buttons button:nth-child(2)').innerHTML = '‚è∏Ô∏è Pause';

            showNotification('Process reset successfully.', 'info');
        }

        // Helper functions
        function showStageProgress(stageNum, message) {
            const statusElement = document.getElementById(`status-${stageNum}`);
            statusElement.innerHTML = `<span class="status-indicator processing">${message}</span>`;
        }

        function updateOverallProgress() {
            const progress = (processState.completedStages.length / 5) * 100;
            document.querySelector('#overall-progress .progress-fill').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progress)}% Complete`;
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            // Style the notification
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;

            // Set background color based on type
            const colors = {
                success: '#4caf50',
                warning: '#ff9800',
                info: '#2196f3',
                error: '#f44336'
            };
            notification.style.backgroundColor = colors[type] || colors.info;

            document.body.appendChild(notification);

            // Remove after 4 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        function updateDashboardMetrics() {
            // Update the dashboard with optimized metrics
            const metrics = document.querySelectorAll('.metric-value');
            if (metrics.length > 0) {
                // Simulate improved metrics after optimization
                setTimeout(() => {
                    metrics[0].textContent = '$52.1M'; // Increased revenue
                    metrics[1].textContent = '+38%';   // Better growth
                    metrics[2].textContent = '98%';    // Higher optimization
                    metrics[3].textContent = '$2.8M';  // More savings
                }, 1000);
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function waitForResume() {
            return new Promise(resolve => {
                const checkPause = () => {
                    if (!processState.isPaused) {
                        resolve();
                    } else {
                        setTimeout(checkPause, 100);
                    }
                };
                checkPause();
            });
        }

        // New Feature Functions
        function openMarketingApp() {
            showNotification('Opening Healthcare Marketing Application...', 'info');
            
            // Check if marketplace app exists, otherwise open new window with marketing features
            const marketplaceUrl = 'http://localhost:8080/index.html';
            
            // Try to open the marketplace with focus on healthcare marketing app
            try {
                const marketingWindow = window.open(marketplaceUrl + '#healthcare-marketing', '_blank');
                if (marketingWindow) {
                    showNotification('üéØ Marketing App launched! Create campaigns based on your price transparency data.', 'success');
                } else {
                    // Fallback: show marketing integration modal
                    showMarketingIntegrationModal();
                }
            } catch (error) {
                showMarketingIntegrationModal();
            }
        }

        function showMarketingIntegrationModal() {
            const modal = document.createElement('div');
            modal.className = 'marketing-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>
                    <h2>üéØ Healthcare Marketing App</h2>
                    <p>Manage, analyze, and optimize your marketing campaigns:</p>
                    <div class="marketing-tabs">
                        <button onclick="showMarketingTab('campaigns')" class="tab-btn">Campaigns</button>
                        <button onclick="showMarketingTab('analytics')" class="tab-btn">Analytics</button>
                        <button onclick="showMarketingTab('audience')" class="tab-btn">Audience</button>
                        <button onclick="showMarketingTab('outreach')" class="tab-btn">Outreach</button>
                        <button onclick="showMarketingTab('content')" class="tab-btn">Content</button>
                        <button onclick="showMarketingTab('collab')" class="tab-btn">Collaboration</button>
                        <button onclick="showMarketingTab('compliance')" class="tab-btn">Compliance</button>
                        <button onclick="showMarketingTab('benchmark')" class="tab-btn">Benchmarking</button>
                        <button onclick="showMarketingTab('recommend')" class="tab-btn">Recommendations</button>
                        <button onclick="showMarketingTab('integration')" class="tab-btn">Integration</button>
                    </div>
                    <div id="marketing-tab-content">
                        <!-- Default tab: Campaigns -->
                    </div>
                </div>
            `;
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            const content = modal.querySelector('.modal-content');
            content.style.cssText = `
                background: white; padding: 2rem; border-radius: 12px;
                max-width: 700px; width: 95%; position: relative;
            `;
            document.body.appendChild(modal);
            showMarketingTab('campaigns');
        }

        function showMarketingTab(tab) {
            const tabContent = document.getElementById('marketing-tab-content');
            if (!tabContent) return;
            switch(tab) {
                case 'campaigns':
                    tabContent.innerHTML = `
                        <h3>Campaign Management</h3>
                        <button onclick="createMarketingCampaign()" class="btn btn-marketing">Create New Campaign</button>
                        <div id="campaign-list"></div>
                    `;
                    fetch('/api/marketing/campaigns').then(r=>r.json()).then(data=>{
                        document.getElementById('campaign-list').innerHTML = data.map(c=>`<div class='campaign-item'><b>${c.name}</b> - ${c.status} <button onclick='editCampaign(${c.id})'>Edit</button></div>`).join('');
                    });
                    break;
                case 'analytics':
                    tabContent.innerHTML = `
                        <h3>Analytics Dashboard</h3>
                        <canvas id="marketing-analytics-chart" width="400" height="200"></canvas>
                    `;
                    fetch('/api/marketing/analytics').then(r=>r.json()).then(data=>{
                        if(window.Chart) new Chart(document.getElementById('marketing-analytics-chart').getContext('2d'), {type:'bar',data:data});
                    });
                    break;
                case 'audience':
                    tabContent.innerHTML = `
                        <h3>Audience Segmentation</h3>
                        <div id="audience-list"></div>
                    `;
                    fetch('/api/marketing/audience').then(r=>r.json()).then(data=>{
                        document.getElementById('audience-list').innerHTML = data.map(a=>`<div>${a.segment} (${a.count})</div>`).join('');
                    });
                    break;
                case 'outreach':
                    tabContent.innerHTML = `
                        <h3>Automated Outreach</h3>
                        <button onclick="sendOutreach('email')">Send Email</button>
                        <button onclick="sendOutreach('sms')">Send SMS</button>
                        <button onclick="sendOutreach('inapp')">Send In-App Notification</button>
                    `;
                    break;
                case 'content':
                    tabContent.innerHTML = `
                        <h3>Content Library</h3>
                        <div id="content-list"></div>
                        <button onclick="uploadContentTemplate()">Upload Template</button>
                    `;
                    fetch('/api/marketing/content').then(r=>r.json()).then(data=>{
                        document.getElementById('content-list').innerHTML = data.map(t=>`<div>${t.title} <button onclick='reviewContent(${t.id})'>Review</button></div>`).join('');
                    });
                    break;
                case 'collab':
                    tabContent.innerHTML = `
                        <h3>Collaboration</h3>
                        <div id="collab-comments"></div>
                        <input id="collab-input" placeholder="Add comment..." />
                        <button onclick="addCollabComment()">Comment</button>
                    `;
                    fetch('/api/marketing/collab').then(r=>r.json()).then(data=>{
                        document.getElementById('collab-comments').innerHTML = data.map(c=>`<div>${c.user}: ${c.text}</div>`).join('');
                    });
                    break;
                case 'compliance':
                    tabContent.innerHTML = `
                        <h3>Regulatory Compliance</h3>
                        <button onclick="runMarketingComplianceCheck()">Run Compliance Check</button>
                        <div id="compliance-result"></div>
                    `;
                    break;
                case 'benchmark':
                    tabContent.innerHTML = `
                        <h3>Benchmarking</h3>
                        <div id="benchmark-list"></div>
                    `;
                    fetch('/api/marketing/benchmark').then(r=>r.json()).then(data=>{
                        document.getElementById('benchmark-list').innerHTML = data.map(b=>`<div>${b.metric}: ${b.value}</div>`).join('');
                    });
                    break;
                case 'recommend':
                    tabContent.innerHTML = `
                        <h3>Smart Recommendations</h3>
                        <div id="recommend-list"></div>
                    `;
                    fetch('/api/marketing/recommend').then(r=>r.json()).then(data=>{
                        document.getElementById('recommend-list').innerHTML = data.map(r=>`<div>${r.suggestion}</div>`).join('');
                    });
                    break;
                case 'integration':
                    tabContent.innerHTML = `
                        <h3>Integration</h3>
                        <button onclick="openIntegrationSettings()">Integration Settings</button>
                    `;
                    break;
            }
        }

        function createMarketingCampaign() {
            showNotification('üéØ Creating price transparency marketing campaign...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Campaign "Transparent Healthcare Pricing" created with current optimization data!', 'success');
                document.querySelector('.marketing-modal')?.remove();
            }, 2000);
        }

        function editCampaign(id) {
            showNotification('Editing campaign ' + id, 'info');
            // Implement campaign edit modal or logic here
        }

        function sendOutreach(type) {
            showNotification('Sending ' + type + ' outreach...', 'info');
            // Implement outreach logic here
        }

        function uploadContentTemplate() {
            showNotification('Uploading content template...', 'info');
            // Implement upload logic here
        }

        function reviewContent(id) {
            showNotification('Reviewing content template ' + id, 'info');
            // Implement review logic here
        }

        function addCollabComment() {
            const input = document.getElementById('collab-input');
            if (input && input.value) {
                showNotification('Comment added: ' + input.value, 'success');
                // Implement backend comment save here
            }
        }

        function runMarketingComplianceCheck() {
            showNotification('Running compliance check...', 'info');
            setTimeout(() => {
                document.getElementById('compliance-result').innerText = '‚úÖ All campaigns and content are compliant with HIPAA, CMS, and state regulations.';
            }, 1500);
        }

        function openIntegrationSettings() {
            showNotification('Opening integration settings...', 'info');
            // Implement integration settings modal or logic here
        }

        function createMarketingCampaign() {
            showNotification('üéØ Creating price transparency marketing campaign...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Campaign "Transparent Healthcare Pricing" created with current optimization data!', 'success');
                document.querySelector('.marketing-modal')?.remove();
            }, 2000);
        }

        function openROICalculator() {
            showROICalculatorModal();
        }

        function showROICalculatorModal() {
            const modal = document.createElement('div');
            modal.className = 'roi-modal';
            modal.innerHTML = `
                <div class="modal-content roi-calculator">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>
    document.getElementById('patientRosterModal').style.display = 'block';
    document.getElementById('patientRosterModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('subscriberUploadModal').style.display = 'block';
    document.getElementById('subscriberUploadModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('clearinghouseModal').style.display = 'block';
    document.getElementById('clearinghouseModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('auditLogModal').style.display = 'block';
    document.getElementById('auditLogModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('complianceDashboardModal').style.display = 'block';
    document.getElementById('complianceDashboardModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('protocolBuilderModal').style.display = 'block';
    document.getElementById('protocolBuilderModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('costSavingsModal').style.display = 'block';
    document.getElementById('costSavingsModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
    document.getElementById('simulatorModal').style.display = 'block';
    document.getElementById('simulatorModal').querySelector('.modal-content').insertAdjacentHTML('afterbegin', '<button onclick="returnToHomePage()" class="btn btn-secondary" style="float:right;margin-bottom:1rem;">Return to Home Page</button>');
                    <h2>üí∞ ROI Calculator</h2>
                    <div class="calculator-inputs">
                        <div class="input-group">
                            <label>Current Annual Revenue:</label>
                            <input type="number" id="current-revenue" value="50000000" placeholder="$50,000,000">
                        </div>
                        <div class="input-group">
                            <label>Number of Contracts:</label>
                            <input type="number" id="contract-count" value="150" placeholder="150">
                        </div>
                        <div class="input-group">
                            <label>Implementation Timeline (months):</label>
                            <input type="number" id="timeline" value="6" placeholder="6">
                        </div>
                    </div>
                    <button onclick="calculateROI()" class="btn btn-primary">Calculate ROI</button>
                    <div id="roi-results" class="roi-results"></div>
                    <button onclick="closeROIModalAndReturnHome()" class="btn btn-secondary" style="margin-top:1rem;">Return to Home Page</button>
                </div>
            `;
        function closeROIModalAndReturnHome() {
            document.querySelector('.roi-modal')?.remove();
            // Optionally scroll to top or focus home UI
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            const content = modal.querySelector('.modal-content');
            content.style.cssText = `
                background: white; padding: 2rem; border-radius: 12px;
                max-width: 600px; width: 90%; position: relative;
            `;
            
            document.body.appendChild(modal);
        }

        function calculateROI() {
            const revenue = parseFloat(document.getElementById('current-revenue').value) || 50000000;
            const contracts = parseInt(document.getElementById('contract-count').value) || 150;
            const timeline = parseInt(document.getElementById('timeline').value) || 6;
            
            // ROI calculations based on industry averages
            const revenueIncrease = revenue * 0.47; // 47% average increase
            const annualSavings = 2300000; // $2.3M average savings
            const implementationCost = 500000; // Estimated implementation cost
            
            const totalBenefit = revenueIncrease + annualSavings;
            const roi = ((totalBenefit - implementationCost) / implementationCost) * 100;
            const paybackMonths = Math.round((implementationCost / (totalBenefit / 12)) * 10) / 10;
            
            document.getElementById('roi-results').innerHTML = `
                <div class="roi-summary">
                    <h3>üìä ROI Analysis Results</h3>
                    <div class="roi-metrics">
                        <div class="metric">
                            <div class="metric-value">$${(totalBenefit).toLocaleString()}</div>
                            <div class="metric-label">Total Annual Benefit</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${Math.round(roi)}%</div>
                            <div class="metric-label">Return on Investment</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${paybackMonths} months</div>
                            <div class="metric-label">Payback Period</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">$${(revenueIncrease).toLocaleString()}</div>
                            <div class="metric-label">Revenue Increase (47%)</div>
                        </div>
                    </div>
                    <div class="roi-recommendation">
                        <p><strong>üí° Recommendation:</strong> ${roi > 200 ? 'Excellent ROI - Immediate implementation recommended' : roi > 100 ? 'Strong ROI - Implementation highly recommended' : 'Positive ROI - Consider implementation'}</p>
                    </div>
                </div>
            `;
        }

        // Export and Share Functions
        function exportToPDF() {
            showNotification('üìÑ Generating comprehensive PDF report...', 'info');
            
            // Simulate PDF generation
            setTimeout(() => {
                const reportData = generateReportData();
                
                // Create download link (simulated)
                const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `MedPact_Revenue_Optimization_Report_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                
                showNotification('‚úÖ PDF report generated and downloaded! Contains full optimization analysis and recommendations.', 'success');
            }, 2000);
        }

        function shareViaEmail() {
            showEmailShareModal();
        }

        function shareToSlack() {
            showSlackShareModal();
        }

        function generatePresentation() {
            showNotification('üìà Creating executive presentation...', 'info');
            
            setTimeout(() => {
                showPresentationModal();
            }, 1500);
        }

        function generateReportData() {
            return {
                reportTitle: "Healthcare Revenue Optimization Analysis",
                generatedDate: new Date().toISOString(),
                completedStages: processState.completedStages.length,
                totalStages: 5,
                optimizationStatus: processState.completedStages.length === 5 ? 'Complete' : 'In Progress',
                keyMetrics: {
                    projectedRevenueIncrease: '47%',
                    estimatedAnnualSavings: '$2.3M',
                    averageROI: '340%',
                    paybackPeriod: '8 months'
                },
                stageDetails: processState.completedStages.map(stage => ({
                    stage: stage,
                    name: stageData[stage]?.name || `Stage ${stage}`,
                    status: 'Completed',
                    completedAt: new Date().toISOString()
                })),
                recommendations: [
                    'Implement automated contract analysis system',
                    'Establish Federal Reserve data integration',
                    'Deploy AI-powered payer negotiation tools',
                    'Activate continuous revenue monitoring',
                    'Train staff on new optimization processes'
                ]
            };
        }

        function showEmailShareModal() {
            const modal = document.createElement('div');
            modal.className = 'email-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üìß Email Revenue Report</h2>
                    <div class="email-form">
                        <div class="input-group">
                            <label>To (Email addresses, comma separated):</label>
                            <input type="email" id="email-recipients" placeholder="ceo@hospital.com, cfo@hospital.com" multiple>
                        </div>
                        <div class="input-group">
                            <label>Subject:</label>
                            <input type="text" id="email-subject" value="MedPact Revenue Optimization Results - ${new Date().toLocaleDateString()}">
                        </div>
                        <div class="input-group">
                            <label>Message:</label>
                            <textarea id="email-message" rows="4" placeholder="Please find attached our latest revenue optimization analysis..."></textarea>
                        </div>
                        <div class="email-preview">
                            <h4>üìã Report Preview:</h4>
                            <ul>
                                <li>‚úÖ ${processState.completedStages.length}/5 optimization stages completed</li>
                                <li>üí∞ Projected 47% revenue increase</li>
                                <li>üí≤ $2.3M estimated annual savings</li>
                                <li>üìä Complete stage-by-stage analysis</li>
                                <li>üéØ Implementation recommendations</li>
                            </ul>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button onclick="sendEmailReport()" class="btn btn-primary">üìß Send Report</button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function showSlackShareModal() {
            const modal = document.createElement('div');
            modal.className = 'slack-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üí¨ Share to Slack</h2>
                    <div class="slack-options">
                        <div class="channel-selector">
                            <label>Select Channel:</label>
                            <select id="slack-channel">
                                <option value="general">#general</option>
                                <option value="finance">#finance</option>
                                <option value="executive">#executive</option>
                                <option value="revenue-optimization">#revenue-optimization</option>
                                <option value="custom">Custom channel...</option>
                            </select>
                        </div>
                        <div class="slack-preview">
                            <div class="slack-message-preview">
                                <strong>üè• MedPact Revenue Optimization Update</strong><br>
                                üìä Progress: ${processState.completedStages.length}/5 stages completed<br>
                                üí∞ Projected Impact: 47% revenue increase ($2.3M savings)<br>
                                üéØ Status: ${processState.completedStages.length === 5 ? 'Optimization Complete!' : 'In Progress'}<br>
                                üìà <i>Full report attached</i>
                            </div>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button onclick="sendSlackMessage()" class="btn btn-slack">üí¨ Post to Slack</button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function showPresentationModal() {
            const modal = document.createElement('div');
            modal.className = 'presentation-modal';
            modal.innerHTML = `
                <div class="modal-content presentation-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üìà Executive Presentation Generated</h2>
                    <div class="presentation-preview">
                        <div class="slide-preview">
                            <h3>üéØ Key Highlights</h3>
                            <ul>
                                <li><strong>Revenue Optimization:</strong> 47% projected increase</li>
                                <li><strong>Cost Savings:</strong> $2.3M annually</li>
                                <li><strong>ROI:</strong> 340% return on investment</li>
                                <li><strong>Implementation:</strong> ${processState.completedStages.length}/5 stages complete</li>
                                <li><strong>Payback Period:</strong> 8 months</li>
                            </ul>
                        </div>
                        <div class="slide-features">
                            <h4>üìã Presentation Includes:</h4>
                            <div class="features-grid">
                                <div>‚úÖ Executive Summary</div>
                                <div>‚úÖ ROI Analysis</div>
                                <div>‚úÖ Stage Progress</div>
                                <div>‚úÖ Implementation Timeline</div>
                                <div>‚úÖ Risk Assessment</div>
                                <div>‚úÖ Next Steps</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button onclick="downloadPresentation()" class="btn btn-presentation">üì• Download PPT</button>
                        <button onclick="emailPresentation()" class="btn btn-share">üìß Email Presentation</button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-secondary">Close</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function sendEmailReport() {
            const recipients = document.getElementById('email-recipients').value;
            if (!recipients) {
                showNotification('Please enter at least one email recipient.', 'warning');
                return;
            }
            
            showNotification('üìß Sending revenue optimization report...', 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Report successfully sent to ${recipients.split(',').length} recipient(s)!`, 'success');
                document.querySelector('.email-modal')?.remove();
            }, 2500);
        }

        function sendSlackMessage() {
            const channel = document.getElementById('slack-channel').value;
            showNotification(`üí¨ Posting to Slack channel #${channel}...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Revenue optimization update posted to #${channel}!`, 'success');
                document.querySelector('.slack-modal')?.remove();
            }, 2000);
        }

        function downloadPresentation() {
            showNotification('üì• Downloading executive presentation...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Presentation downloaded! Ready for board meetings and stakeholder reviews.', 'success');
                document.querySelector('.presentation-modal')?.remove();
            }, 1500);
        }

        function emailPresentation() {
            showNotification('üìß Emailing presentation to stakeholders...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Executive presentation emailed successfully!', 'success');
            }, 2000);
        }

        // Alerts System Functions
        let alertsEnabled = false;
        let alertInterval;

        function toggleAlerts() {
            alertsEnabled = !alertsEnabled;
            const toggleBtn = document.getElementById('alert-toggle');
            
            if (alertsEnabled) {
                toggleBtn.innerHTML = 'üîï Disable Alerts';
                toggleBtn.classList.add('btn-warning');
                toggleBtn.classList.remove('btn-secondary');
                startAlertMonitoring();
                showNotification('üîî Real-time alerts activated! You\'ll be notified of revenue opportunities.', 'success');
            } else {
                toggleBtn.innerHTML = 'üîî Enable Alerts';
                toggleBtn.classList.add('btn-secondary');
                toggleBtn.classList.remove('btn-warning');
                stopAlertMonitoring();
                showNotification('üîï Alert monitoring disabled.', 'info');
            }
        }

        function startAlertMonitoring() {
            // Simulate periodic alert generation
            alertInterval = setInterval(() => {
                if (alertsEnabled && Math.random() > 0.7) {
                    generateRandomAlert();
                }
            }, 15000); // Check every 15 seconds
        }

        function stopAlertMonitoring() {
            if (alertInterval) {
                clearInterval(alertInterval);
            }
        }

        function generateRandomAlert() {
            const alertTypes = [
                {
                    type: 'contract',
                    icon: 'üìã',
                    title: 'Contract Renewal Due',
                    messages: [
                        'UnitedHealth contract expires in 30 days - negotiate 12% increase',
                        'Aetna agreement up for renewal - market rates suggest 18% boost',
                        'Medicare Advantage contract review scheduled - prepare pricing analysis'
                    ]
                },
                {
                    type: 'market',
                    icon: 'üìä',
                    title: 'Market Opportunity',
                    messages: [
                        'Competitor raised surgical rates 6% - opportunity to follow',
                        'Regional hospital closed - capture 15% market share increase',
                        'New CPT codes approved - implement pricing immediately'
                    ]
                },
                {
                    type: 'opportunity',
                    icon: 'üí∞',
                    title: 'Revenue Optimization',
                    messages: [
                        'Emergency dept. showing $400K underperformance - optimize pricing',
                        'Outpatient surgery rates 22% below market - immediate adjustment needed',
                        'Lab services significantly under-priced compared to regional average'
                    ]
                }
            ];

            const alertType = alertTypes[Math.floor(Math.random() * alertTypes.length)];
            const message = alertType.messages[Math.floor(Math.random() * alertType.messages.length)];
            
            addNewAlert(alertType.type, alertType.icon, alertType.title, message);
        }

        function addNewAlert(type, icon, title, message) {
            const alertsContainer = document.getElementById('alerts-container');
            const alertItem = document.createElement('div');
            alertItem.className = `alert-item ${type}-alert new-alert`;
            alertItem.innerHTML = `
                <div class="alert-icon">${icon}</div>
                <div class="alert-content">
                    <div class="alert-title">${title}</div>
                    <div class="alert-message">${message}</div>
                    <div class="alert-time">Just now</div>
                </div>
                <div class="alert-actions">
                    <button onclick="handleAlert(this, '${type}')" class="btn-small btn-primary">Review</button>
                </div>
            `;
            
            // Add animation for new alerts
            alertItem.style.opacity = '0';
            alertItem.style.transform = 'translateX(-20px)';
            alertsContainer.insertBefore(alertItem, alertsContainer.firstChild);
            
            setTimeout(() => {
                alertItem.style.transition = 'all 0.3s ease';
                alertItem.style.opacity = '1';
                alertItem.style.transform = 'translateX(0)';
                alertItem.classList.remove('new-alert');
            }, 100);

            updateAlertSummary();
            showNotification(`üîî New ${title.toLowerCase()} alert!`, 'info');
        }

        function handleAlert(button, alertType) {
            const alertItem = button.closest('.alert-item');
            
            switch(alertType) {
                case 'contract':
                    showNotification('üìã Opening contract management system...', 'info');
                    break;
                case 'pricing':
                    showNotification('üìä Launching pricing optimization tool...', 'info');
                    break;
                case 'optimize':
                    showNotification('üí∞ Starting revenue optimization analysis...', 'info');
                    break;
                default:
                    showNotification('üîç Reviewing alert details...', 'info');
            }

            // Mark alert as handled
            setTimeout(() => {
                alertItem.style.opacity = '0.5';
                button.innerHTML = '‚úÖ Handled';
                button.disabled = true;
                button.classList.add('btn-success');
                
                showNotification('‚úÖ Alert resolved successfully!', 'success');
            }, 1500);
        }

        function showAlertSettings() {
            const modal = document.createElement('div');
            modal.className = 'alert-settings-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>‚öôÔ∏è Alert Settings</h2>
                    <div class="settings-form">
                        <div class="setting-group">
                            <label>Alert Frequency:</label>
                            <select id="alert-frequency">
                                <option value="real-time">Real-time</option>
                                <option value="hourly">Hourly Summary</option>
                                <option value="daily">Daily Summary</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <h4>Alert Types:</h4>
                            <div class="checkbox-group">
                                <label><input type="checkbox" checked> Contract Renewals</label>
                                <label><input type="checkbox" checked> Market Changes</label>
                                <label><input type="checkbox" checked> Revenue Opportunities</label>
                                <label><input type="checkbox" checked> Pricing Updates</label>
                                <label><input type="checkbox"> Competitor Analysis</label>
                                <label><input type="checkbox"> Regulatory Changes</label>
                            </div>
                        </div>
                        <div class="setting-group">
                            <label>Minimum Impact Threshold:</label>
                            <select id="impact-threshold">
                                <option value="low">$10K+ impact</option>
                                <option value="medium" selected>$50K+ impact</option>
                                <option value="high">$100K+ impact</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>Notification Methods:</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" checked> Browser Notifications</label>
                                <label><input type="checkbox"> Email Alerts</label>
                                <label><input type="checkbox"> SMS Notifications</label>
                                <label><input type="checkbox"> Slack Integration</label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button onclick="saveAlertSettings()" class="btn btn-primary">üíæ Save Settings</button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function saveAlertSettings() {
            showNotification('‚öôÔ∏è Saving alert preferences...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Alert settings saved successfully!', 'success');
                document.querySelector('.alert-settings-modal')?.remove();
            }, 1500);
        }

        function clearAllAlerts() {
            const alertsContainer = document.getElementById('alerts-container');
            const alerts = alertsContainer.querySelectorAll('.alert-item');
            
            if (alerts.length === 0) {
                showNotification('No alerts to clear.', 'info');
                return;
            }

            if (confirm(`Clear all ${alerts.length} alerts?`)) {
                alerts.forEach(alert => {
                    alert.style.opacity = '0';
                    alert.style.transform = 'translateX(-100%)';
                });
                
                setTimeout(() => {
                    alertsContainer.innerHTML = '<div style="text-align: center; padding: 2rem; color: #666;">No active alerts</div>';
                    updateAlertSummary(true);
                    showNotification('üóëÔ∏è All alerts cleared.', 'success');
                }, 300);
            }
        }

        function updateAlertSummary(cleared = false) {
            const activeAlerts = document.querySelectorAll('.alert-item').length;
            const potentialRevenue = cleared ? '$0' : `$${(activeAlerts * 400).toLocaleString()}K`;
            const timeSensitive = cleared ? 0 : Math.max(1, Math.floor(activeAlerts * 0.6));

            document.getElementById('active-alerts').textContent = cleared ? 0 : activeAlerts;
            document.getElementById('potential-revenue').textContent = potentialRevenue;
            document.getElementById('time-sensitive').textContent = timeSensitive;
        }

        // Integration Dashboard Functions
        function openIntegration(system) {
            const integrations = {
                'ehr': {
                    name: 'Electronic Health Records',
                    url: 'http://localhost:9000/index.html#ehr-system',
                    description: 'Access comprehensive patient records, clinical workflows, and medical documentation.',
                    features: ['Patient Demographics', 'Medical History', 'Clinical Notes', 'Medication Lists', 'Lab Results']
                },
                'billing': {
                    name: 'Billing & Claims Management',
                    url: 'http://localhost:9000/index.html#billing-system',
                    description: 'Streamlined revenue cycle management and claims processing.',
                    features: ['Claims Processing', 'Payment Tracking', 'Denial Management', 'Revenue Analytics', 'Insurance Verification']
                },
                'analytics': {
                    name: 'Healthcare Analytics Platform',
                    url: 'http://localhost:9000/index.html#analytics-system',
                    description: 'Advanced business intelligence and performance insights.',
                    features: ['Performance Dashboards', 'Financial Reports', 'Quality Metrics', 'Predictive Analytics', 'Custom Reports']
                },
                'patient-portal': {
                    name: 'Patient Engagement Portal',
                    url: 'http://localhost:9000/index.html#patient-portal',
                    description: 'Enhanced patient communication and engagement tools.',
                    features: ['Appointment Scheduling', 'Secure Messaging', 'Lab Results', 'Bill Pay', 'Educational Resources']
                },
                'pharmacy': {
                    name: 'Pharmacy Management System',
                    url: 'http://localhost:9000/index.html#pharmacy-system',
                    description: 'Comprehensive medication and inventory management.',
                    features: ['Prescription Management', 'Inventory Tracking', 'Drug Interactions', 'Refill Automation', 'Compliance Monitoring']
                },
                'compliance': {
                    name: 'Compliance & Security Center',
                    url: 'http://localhost:9000/index.html#compliance-system',
                    description: 'HIPAA compliance, security monitoring, and risk management.',
                    features: ['HIPAA Compliance', 'Security Audits', 'Risk Assessment', 'Access Controls', 'Incident Management']
                },
                'lab': {
                    name: 'Laboratory Information System',
                    url: 'http://localhost:9000/index.html#lab-system',
                    description: 'Complete laboratory workflow and results management.',
                    features: ['Order Management', 'Results Processing', 'Quality Control', 'Instrument Integration', 'Report Generation']
                },
                'marketplace': {
                    name: 'MedPact Application Marketplace',
                    url: 'http://localhost:9000/index.html',
                    description: 'Access the complete ecosystem of 64+ healthcare applications.',
                    features: ['Healthcare Apps', 'MyOS Platform', 'Wellness Tools', 'Integration Hub', 'Custom Solutions']
                }
            };

            const integration = integrations[system];
            if (!integration) {
                showNotification(`Integration for ${system} not found.`, 'warning');
                return;
            }

            showNotification(`üîó Connecting to ${integration.name}...`, 'info');

            // Try to open the system
            setTimeout(() => {
                try {
                    window.open(integration.url, '_blank');
                    showNotification(`‚úÖ ${integration.name} opened successfully!`, 'success');
                } catch (error) {
                    // Fallback: Show integration modal
                    showIntegrationModal(system, integration);
                }
            }, 1000);
        }

        function showIntegrationModal(systemKey, integration) {
            const modal = document.createElement('div');
            modal.className = 'integration-modal';
            modal.innerHTML = `
                <div class="modal-content integration-modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üîó ${integration.name}</h2>
                    <p>${integration.description}</p>
                    
                    <div class="integration-features">
                        <h4>üåü Key Features:</h4>
                        <ul>
                            ${integration.features.map(feature => `<li>‚úÖ ${feature}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="integration-actions">
                        <button onclick="launchSystem('${systemKey}')" class="btn btn-primary">üöÄ Launch System</button>
                        <button onclick="window.open('http://localhost:9000/index.html', '_blank')" class="btn btn-secondary">üõí View Marketplace</button>
                        <button onclick="scheduleDemo('${systemKey}')" class="btn btn-marketing">üìÖ Schedule Demo</button>
                    </div>

                    <div class="integration-status-info">
                        <div class="status-badge connected">
                            <span class="status-dot"></span>
                            <span>System Connected & Ready</span>
                        </div>
                        <div class="sync-info">
                            <small>Last sync: ${new Date().toLocaleString()}</small>
                        </div>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            const content = modal.querySelector('.modal-content');
            content.style.cssText = `
                background: white; padding: 2rem; border-radius: 12px;
                max-width: 600px; width: 90%; position: relative;
                max-height: 80vh; overflow-y: auto;
            `;
            
            document.body.appendChild(modal);
        }

        function launchSystem(systemKey) {
            showNotification(`üöÄ Launching ${systemKey.replace('-', ' ')} system...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ ${systemKey.replace('-', ' ')} system launched successfully!`, 'success');
                document.querySelector('.integration-modal')?.remove();
            }, 2000);
        }

        function scheduleDemo(systemKey) {
            showNotification(`üìÖ Scheduling demo for ${systemKey.replace('-', ' ')} system...`, 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Demo scheduled! You will receive a calendar invitation shortly.', 'success');
            }, 1500);
        }

        function syncAllSystems() {
            showNotification('üîÑ Initiating system-wide synchronization...', 'info');
            
            const systems = ['EHR', 'Billing', 'Analytics', 'Patient Portal', 'Pharmacy', 'Compliance'];
            let syncProgress = 0;
            
            const syncInterval = setInterval(() => {
                syncProgress++;
                
                if (syncProgress <= systems.length) {
                    showNotification(`üîÑ Syncing ${systems[syncProgress - 1]} system...`, 'info');
                }
                
                if (syncProgress >= systems.length) {
                    clearInterval(syncInterval);
                    setTimeout(() => {
                        showNotification('‚úÖ All systems synchronized successfully! Data is now up-to-date across all platforms.', 'success');
                        
                        // Update integration status indicators
                        document.querySelectorAll('.integration-status.connected').forEach(status => {
                            status.style.animation = 'pulse 2s ease-in-out';
                        });
                    }, 1000);
                }
            }, 800);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }

            .close-modal {
                position: absolute;
                top: 15px;
                right: 20px;
                font-size: 28px;
                cursor: pointer;
                color: #999;
            }

            .close-modal:hover {
                color: #333;
            }

            .modal-buttons {
                margin-top: 1.5rem;
                display: flex;
                gap: 1rem;
                justify-content: center;
            }

            .input-group {
                margin-bottom: 1rem;
            }

            .input-group label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 600;
                color: #333;
            }

            .input-group input {
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e1e5e9;
                border-radius: 8px;
                font-size: 1rem;
            }

            .input-group input:focus {
                outline: none;
                border-color: #667eea;
            }

            .roi-results {
                margin-top: 2rem;
            }

            .roi-summary {
                background: #f8f9fa;
                padding: 1.5rem;
                border-radius: 8px;
                margin-top: 1rem;
            }

            .roi-metrics {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
                margin: 1rem 0;
            }

            .metric {
                text-align: center;
                padding: 1rem;
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .metric-value {
                font-size: 1.5rem;
                font-weight: 700;
                color: #667eea;
            }

            .metric-label {
                font-size: 0.9rem;
                color: #666;
                margin-top: 0.5rem;
            }

            .roi-recommendation {
                background: #e8f5e8;
                padding: 1rem;
                border-radius: 8px;
                border-left: 4px solid #4caf50;
                margin-top: 1rem;
            }
        `;
        document.head.appendChild(style);

        // Original initialization code
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        });

        document.querySelectorAll('.stage-card, .feature-card').forEach((card) => {
            if (!card.classList.contains('interactive')) {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(card);
            }
        });

        // Role Management System
        let currentUserRole = 'provider';

        function switchUserRole(role) {
            currentUserRole = role;
            updateInterfaceForRole(role);
            showNotification(`Switched to ${role === 'provider' ? 'Healthcare Provider' : role === 'payer' ? 'Insurance Payer' : 'Joint Collaboration'} view`, 'info');
        }

        function updateInterfaceForRole(role) {
            const heroTitle = document.getElementById('hero-title');
            const heroSubtitle = document.getElementById('hero-subtitle');
            const heroStats = document.getElementById('hero-stats');
            const payerDashboard = document.getElementById('payer-dashboard');
            const collaborationPlatform = document.getElementById('collaboration-platform');
            const stagesSection = document.querySelector('.stages-section');
            const navPrimary = document.getElementById('nav-primary');

            // Update hero content based on role
            switch(role) {
                case 'provider':
                    heroTitle.textContent = 'Healthcare Revenue Optimization';
                    heroSubtitle.textContent = '5-Stage AI-Powered System with Federal Reserve Integration for Maximum Revenue Capture';
                    navPrimary.textContent = 'Optimize Revenue';
                    
                    // Update stats for provider view
                    document.getElementById('stat-1').innerHTML = '<span class="stat-number">47%</span><span class="stat-label">Average Revenue Increase</span>';
                    document.getElementById('stat-2').innerHTML = '<span class="stat-number">$2.3M</span><span class="stat-label">Average Annual Savings</span>';
                    document.getElementById('stat-3').innerHTML = '<span class="stat-number">AI</span><span class="stat-label">Federal Reserve Integration</span>';
                    
                    // Show/hide sections
                    stagesSection.style.display = 'block';
                    payerDashboard.style.display = 'none';
                    collaborationPlatform.style.display = 'none';
                    break;

                case 'payer':
                    heroTitle.textContent = 'Payer Cost Optimization Platform';
                    heroSubtitle.textContent = 'AI-Powered Provider Analysis & Collaborative Savings Opportunities';
                    navPrimary.textContent = 'Analyze Costs';
                    
                    // Update stats for payer view
                    document.getElementById('stat-1').innerHTML = '<span class="stat-number">32%</span><span class="stat-label">Cost Reduction Potential</span>';
                    document.getElementById('stat-2').innerHTML = '<span class="stat-number">$8.4M</span><span class="stat-label">Projected Savings</span>';
                    document.getElementById('stat-3').innerHTML = '<span class="stat-number">87%</span><span class="stat-label">Provider Performance Score</span>';
                    
                    // Show/hide sections
                    stagesSection.style.display = 'none';
                    payerDashboard.style.display = 'block';
                    collaborationPlatform.style.display = 'none';
                    break;

                case 'collaboration':
                    heroTitle.textContent = 'Joint Payer-Provider Platform';
                    heroSubtitle.textContent = 'Collaborative Cost Optimization & Shared Savings Distribution';
                    navPrimary.textContent = 'Collaborate';
                    
                    // Update stats for collaboration view
                    document.getElementById('stat-1').innerHTML = '<span class="stat-number">$5.0M</span><span class="stat-label">Total Shared Savings</span>';
                    document.getElementById('stat-2').innerHTML = '<span class="stat-number">23</span><span class="stat-label">Active Partnerships</span>';
                    document.getElementById('stat-3').innerHTML = '<span class="stat-number">95%</span><span class="stat-label">Success Rate</span>';
                    
                    // Show/hide sections
                    stagesSection.style.display = 'none';
                    payerDashboard.style.display = 'none';
                    collaborationPlatform.style.display = 'block';
                    break;
            }

            // Update button text in hero section
            const heroButtons = document.querySelectorAll('.hero-buttons button');
            if (heroButtons.length > 0) {
                switch(role) {
                    case 'provider':
                        if (heroButtons[0]) heroButtons[0].innerHTML = 'üöÄ Start Revenue Optimization';
                        break;
                    case 'payer':
                        if (heroButtons[0]) heroButtons[0].innerHTML = 'üîç Analyze Provider Costs';
                        break;
                    case 'collaboration':
                        if (heroButtons[0]) heroButtons[0].innerHTML = 'ü§ù Start Collaboration';
                        break;
                }
            }
        }

        // Payer-specific Functions
        function openProviderAnalytics() {
            showProviderAnalyticsModal();
        }

        function showProviderAnalyticsModal() {
            const modal = document.createElement('div');
            modal.className = 'provider-analytics-modal';
            modal.innerHTML = `
                <div class="modal-content analytics-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üìà Provider Performance Analytics</h2>
                    
                    <div class="analytics-dashboard">
                        <div class="provider-scorecard">
                            <h3>Overall Provider Score: 87%</h3>
                            <div class="score-breakdown">
                                <div class="score-item">
                                    <span>Cost Efficiency</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 92%"></div>
                                    </div>
                                    <span>92%</span>
                                </div>
                                <div class="score-item">
                                    <span>Quality Metrics</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 85%"></div>
                                    </div>
                                    <span>85%</span>
                                </div>
                                <div class="score-item">
                                    <span>Patient Satisfaction</span>
                                    <div class="score-bar">
                                        <div class="score-fill" style="width: 89%"></div>
                                    </div>
                                    <span>89%</span>
                                </div>
                            </div>
                        </div>

                        <div class="cost-analysis">
                            <h4>Cost Analysis by Procedure</h4>
                            <div class="procedure-costs">
                                <div class="cost-item">
                                    <span>Cardiac Surgery</span>
                                    <span class="cost-value">$45,200 (8% below market)</span>
                                    <span class="savings-opportunity">üí∞ High collaboration potential</span>
                                </div>
                                <div class="cost-item">
                                    <span>Orthopedic Procedures</span>
                                    <span class="cost-value">$28,500 (12% below market)</span>
                                    <span class="savings-opportunity">üéØ Excellent value</span>
                                </div>
                                <div class="cost-item">
                                    <span>Emergency Care</span>
                                    <span class="cost-value">$8,900 (5% above market)</span>
                                    <span class="savings-opportunity">‚ö†Ô∏è Optimization needed</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-buttons">
                        <button onclick="proposeIncentive()" class="btn btn-primary">üí° Propose Incentive</button>
                        <button onclick="scheduleNegotiation()" class="btn btn-secondary">üìÖ Schedule Meeting</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function openIncentiveModeler() {
            showIncentiveModelerModal();
        }

        function showIncentiveModelerModal() {
            const modal = document.createElement('div');
            modal.className = 'incentive-modeler-modal';
            modal.innerHTML = `
                <div class="modal-content incentive-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>üí° Collaborative Incentive Modeler</h2>
                    
                    <div class="incentive-builder">
                        <div class="incentive-inputs">
                            <div class="input-section">
                                <h4>Shared Savings Model</h4>
                                <div class="input-group">
                                    <label>Total Cost Savings Target:</label>
                                    <input type="number" id="cost-target" value="1200000" placeholder="$1,200,000">
                                </div>
                                <div class="input-group">
                                    <label>Provider Share (%):</label>
                                    <input type="range" id="provider-share" min="20" max="80" value="40" onchange="updateIncentiveModel()">
                                    <span id="provider-percentage">40%</span>
                                </div>
                            </div>

                            <div class="quality-bonuses">
                                <h4>Quality Bonuses</h4>
                                <div class="bonus-item">
                                    <label><input type="checkbox" checked> Patient Satisfaction > 90%</label>
                                    <span class="bonus-value">+$50,000</span>
                                </div>
                                <div class="bonus-item">
                                    <label><input type="checkbox" checked> Readmission Rate < 5%</label>
                                    <span class="bonus-value">+$75,000</span>
                                </div>
                                <div class="bonus-item">
                                    <label><input type="checkbox"> Early Discharge Rate > 15%</label>
                                    <span class="bonus-value">+$30,000</span>
                                </div>
                            </div>
                        </div>

                        <div class="incentive-results">
                            <h4>üí∞ Projected Incentive Distribution</h4>
                            <div class="distribution-chart">
                                <div class="provider-allocation">
                                    <span class="allocation-label">Provider Earnings</span>
                                    <span class="allocation-value" id="provider-earnings">$480,000</span>
                                    <span class="allocation-detail">Base share + quality bonuses</span>
                                </div>
                                <div class="payer-allocation">
                                    <span class="allocation-label">Payer Savings</span>
                                    <span class="allocation-value" id="payer-savings">$720,000</span>
                                    <span class="allocation-detail">Net cost reduction</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-buttons">
                        <button onclick="saveIncentiveModel()" class="btn btn-primary">üíæ Save Model</button>
                        <button onclick="proposeToProvider()" class="btn btn-marketing">üì§ Send Proposal</button>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function updateIncentiveModel() {
            const providerShare = document.getElementById('provider-share').value;
            const costTarget = parseFloat(document.getElementById('cost-target').value) || 1200000;
            
            document.getElementById('provider-percentage').textContent = `${providerShare}%`;
            
            const providerEarnings = (costTarget * providerShare / 100) + 125000; // Base + quality bonuses
            const payerSavings = costTarget - providerEarnings;
            
            document.getElementById('provider-earnings').textContent = `$${providerEarnings.toLocaleString()}`;
            document.getElementById('payer-savings').textContent = `$${payerSavings.toLocaleString()}`;
        }

        function openNegotiationPlatform() {
            showNegotiationPlatformModal();
        }

        function showNegotiationPlatformModal() {
            const modal = document.createElement('div');
            modal.className = 'negotiation-platform-modal';
            modal.innerHTML = `
                <div class="modal-content negotiation-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>ü§ù Real-time Negotiation Platform</h2>
                    
                    <div class="negotiation-dashboard">
                        <div class="active-negotiations">
                            <h4>Active Negotiations</h4>
                            <div class="negotiation-item">
                                <div class="negotiation-header">
                                    <span class="procedure-name">Cardiac Surgery Bundle</span>
                                    <span class="status-badge active">In Progress</span>
                                </div>
                                <div class="negotiation-details">
                                    <div class="current-rates">
                                        <span>Current: $45,200</span>
                                        <span>Proposed: $42,800</span>
                                        <span class="savings">Savings: $2,400</span>
                                    </div>
                                    <button onclick="respondToNegotiation('cardiac')" class="btn btn-small btn-primary">Respond</button>
                                </div>
                            </div>

                            <div class="negotiation-item">
                                <div class="negotiation-header">
                                    <span class="procedure-name">Quality Incentive Package</span>
                                    <span class="status-badge pending">Awaiting Response</span>
                                </div>
                                <div class="negotiation-details">
                                    <div class="incentive-terms">
                                        <span>Shared Savings: 45/55 split</span>
                                        <span>Quality Bonus: $150K</span>
                                    </div>
                                    <button onclick="reviewIncentive()" class="btn btn-small btn-secondary">Review</button>
                                </div>
                            </div>
                        </div>

                        <div class="negotiation-tools">
                            <h4>Negotiation Tools</h4>
                            <button onclick="createNewProposal()" class="negotiation-tool">
                                <span class="tool-icon">üìù</span>
                                <span>Create Proposal</span>
                            </button>
                            <button onclick="compareMarketRates()" class="negotiation-tool">
                                <span class="tool-icon">üìä</span>
                                <span>Market Comparison</span>
                            </button>
                            <button onclick="scheduleNegotiationMeeting()" class="negotiation-tool">
                                <span class="tool-icon">üìÖ</span>
                                <span>Schedule Meeting</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 2000;
            `;
            
            document.body.appendChild(modal);
        }

        function openCostAnalyzer() {
            showNotification('üîç Opening comprehensive cost analysis dashboard...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Cost analyzer ready! Analyze provider efficiency and identify savings opportunities.', 'success');
            }, 2000);
        }

        // Collaboration Functions
        function proposeIncentive() {
            showNotification('üí° Creating incentive proposal based on performance data...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Incentive proposal created and sent to provider for review!', 'success');
                document.querySelector('.provider-analytics-modal')?.remove();
            }, 2000);
        }

        function scheduleNegotiation() {
            showNotification('üìÖ Scheduling negotiation meeting...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Meeting scheduled for next Tuesday at 2:00 PM EST.', 'success');
            }, 1500);
        }

        function saveIncentiveModel() {
            showNotification('üíæ Saving incentive model...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Incentive model saved successfully!', 'success');
            }, 1500);
        }

        function proposeToProvider() {
            showNotification('üì§ Sending proposal to provider...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Proposal sent! Provider will receive notification and can respond within the platform.', 'success');
                document.querySelector('.incentive-modeler-modal')?.remove();
            }, 2500);
        }

        // Data Upload Functions
        function triggerFileInput(inputId) {
            document.getElementById(inputId).click();
        }

        function handleFileUpload(files, category, userType) {
            if (files.length === 0) return;

            const fileList = Array.from(files);
            const allowedTypes = {
                'claims': ['.csv', '.xlsx', '.hl7', '.txt'],
                'cost': ['.csv', '.xlsx', '.json'],
                'contract': ['.pdf', '.csv', '.xlsx'],
                'patient': ['.csv', '.xlsx', '.hl7', '.json'],
                'revenue': ['.csv', '.xlsx', '.edi']
            };

            // Validate file types
            const invalidFiles = fileList.filter(file => {
                const fileExt = '.' + file.name.split('.').pop().toLowerCase();
                return !allowedTypes[category] || !allowedTypes[category].includes(fileExt);
            });

            if (invalidFiles.length > 0) {
                showNotification(`‚ùå Invalid file types detected. Please upload only supported formats.`, 'error');
                return;
            }

            // Show upload progress
            showNotification(`üîÑ Uploading ${fileList.length} file(s) for ${userType} ${category} data...`, 'info');

            // Simulate upload process
            let progress = 0;
            const uploadInterval = setInterval(() => {
                progress += 10;
                if (progress <= 100) {
                    showNotification(`üì§ Upload progress: ${progress}% - Encrypting and processing ${category} data...`, 'info');
                }
                
                if (progress >= 100) {
                    clearInterval(uploadInterval);
                    setTimeout(() => {
                        showNotification(`‚úÖ ${userType} ${category} data uploaded successfully! Files encrypted and secured.`, 'success');
                        
                        // Update UI to show uploaded files
                        updateUploadedFilesList(fileList, category, userType);
                    }, 500);
                }
            }, 300);
        }

        function updateUploadedFilesList(files, category, userType) {
            // Create or update uploaded files display
            const uploadZone = document.querySelector(`#${userType}${category.charAt(0).toUpperCase() + category.slice(1)}Upload`);
            if (!uploadZone) return;

            let filesList = uploadZone.querySelector('.uploaded-files');
            if (!filesList) {
                filesList = document.createElement('div');
                filesList.className = 'uploaded-files';
                filesList.innerHTML = '<h5><i class="fas fa-check-circle"></i> Uploaded Files:</h5>';
                uploadZone.appendChild(filesList);
            }

            files.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'uploaded-file-item';
                fileItem.innerHTML = `
                    <i class="fas fa-file"></i>
                    <span>${file.name}</span>
                    <span class="file-size">(${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                    <i class="fas fa-shield-alt" title="Encrypted & Secure"></i>
                `;
                filesList.appendChild(fileItem);
            });
        }

        // EMR Integration Functions
        function connectEMR(emrType) {
            const emrNames = {
                'epic': 'Epic MyChart',
                'cerner': 'Cerner PowerChart',
                'allscripts': 'Allscripts'
            };

            showNotification(`üîÑ Connecting to ${emrNames[emrType]}...`, 'info');

            // Simulate connection process
            setTimeout(() => {
                showNotification(`üîë Authenticating with ${emrNames[emrType]} servers...`, 'info');
            }, 1000);

            setTimeout(() => {
                showNotification(`üîí Establishing secure HIPAA-compliant connection...`, 'info');
            }, 2000);

            setTimeout(() => {
                showNotification(`‚úÖ Successfully connected to ${emrNames[emrType]}! Real-time data sync enabled.`, 'success');
                
                // Update EMR connection status
                updateEMRConnectionStatus(emrType, true);
            }, 3000);
        }

        function connectCustomEMR() {
            const emrName = document.getElementById('customEmrName').value;
            const apiEndpoint = document.getElementById('customEmrEndpoint').value;

            if (!emrName || !apiEndpoint) {
                showNotification('‚ùå Please enter both EMR system name and API endpoint.', 'error');
                return;
            }

            showNotification(`üîÑ Connecting to custom EMR: ${emrName}...`, 'info');

            setTimeout(() => {
                showNotification(`üîë Testing API connection to ${apiEndpoint}...`, 'info');
            }, 1000);

            setTimeout(() => {
                showNotification(`‚úÖ Successfully connected to ${emrName}! Custom integration established.`, 'success');
                
                // Clear form
                document.getElementById('customEmrName').value = '';
                document.getElementById('customEmrEndpoint').value = '';
            }, 2500);
        }

        function updateEMRConnectionStatus(emrType, connected) {
            const emrOption = document.querySelector(`button[onclick="connectEMR('${emrType}')"]`);
            if (emrOption) {
                if (connected) {
                    emrOption.innerHTML = '<i class="fas fa-check-circle"></i> Connected';
                    emrOption.classList.add('connected');
                    emrOption.disabled = true;
                } else {
                    emrOption.innerHTML = `Connect ${emrType.charAt(0).toUpperCase() + emrType.slice(1)}`;
                    emrOption.classList.remove('connected');
                    emrOption.disabled = false;
                }
            }
        }

        // Return to Home Function
        function returnToHome() {
            showNotification('üè† Returning to home dashboard...', 'info');
            
            // Smooth scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });

            // Hide any open modals or overlays
            const modals = document.querySelectorAll('.modal, .overlay, .popup');
            modals.forEach(modal => {
                modal.style.display = 'none';
            });

            // Reset any active processes
            if (processState.isRunning) {
                pauseProcess();
            }

            setTimeout(() => {
                showNotification('‚úÖ Welcome back to the home dashboard!', 'success');
            }, 500);
        }

        // Setup drag and drop functionality
        function setupDragAndDrop() {
            const uploadZones = document.querySelectorAll('.upload-zone');
            
            uploadZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('dragover');
                });

                zone.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    zone.classList.remove('dragover');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('dragover');
                    
                    const files = Array.from(e.dataTransfer.files);
                    const zoneId = zone.id;
                    
                    // Extract category and user type from zone ID
                    let category, userType;
                    if (zoneId.includes('payer')) {
                        userType = 'payer';
                        if (zoneId.includes('Claims')) category = 'claims';
                        else if (zoneId.includes('Cost')) category = 'cost';
                        else if (zoneId.includes('Contract')) category = 'contract';
                    } else if (zoneId.includes('provider')) {
                        userType = 'provider';
                        if (zoneId.includes('Patient')) category = 'patient';
                        else if (zoneId.includes('Revenue')) category = 'revenue';
                    }
                    
                    if (category && userType) {
                        handleFileUpload(files, category, userType);
                    }
                });
            });
        }

        // Setup file input change handlers
        function setupFileInputHandlers() {
            // Payer file inputs
            document.getElementById('payerClaimsInput')?.addEventListener('change', (e) => {
                handleFileUpload(e.target.files, 'claims', 'payer');
            });
            
            document.getElementById('payerCostInput')?.addEventListener('change', (e) => {
                handleFileUpload(e.target.files, 'cost', 'payer');
            });
            
            document.getElementById('payerContractInput')?.addEventListener('change', (e) => {
                handleFileUpload(e.target.files, 'contract', 'payer');
            });

            // Provider file inputs
            document.getElementById('providerPatientInput')?.addEventListener('change', (e) => {
                handleFileUpload(e.target.files, 'patient', 'provider');
            });
            
            document.getElementById('providerRevenueInput')?.addEventListener('change', (e) => {
                handleFileUpload(e.target.files, 'revenue', 'provider');
            });
        }

        // Mathematica Database Functions
        function runPriceOptimization() {
            showNotification('üßÆ Initializing Mathematica price optimization engine...', 'info');
            
            setTimeout(() => {
                showNotification('üìä Running multi-variable optimization algorithm...', 'info');
            }, 1000);
            
            setTimeout(() => {
                showNotification('üéØ Calculating optimal pricing strategies...', 'info');
            }, 2000);
            
            setTimeout(() => {
                showNotification('‚úÖ Price optimization complete! Identified 15.3% average cost reduction opportunity.', 'success');
            }, 3500);
        }

        function runMarketPrediction() {
            showNotification('üìà Starting market prediction analysis...', 'info');
            
            setTimeout(() => {
                showNotification('üîÆ Processing time-series data with neural networks...', 'info');
            }, 1000);
            
            setTimeout(() => {
                showNotification('üìä Analyzing economic indicators and policy impacts...', 'info');
            }, 2000);
            
            setTimeout(() => {
                showNotification('‚úÖ Market prediction complete! 94.7% confidence in Q1 2026 forecasts.', 'success');
            }, 3500);
        }

        function runNetworkAnalysis() {
            showNotification('üï∏Ô∏è Initializing network topology analysis...', 'info');
            
            setTimeout(() => {
                showNotification('üîó Mapping provider-payer relationship networks...', 'info');
            }, 1000);
            
            setTimeout(() => {
                showNotification('üìê Calculating network centrality and optimization paths...', 'info');
            }, 2000);
            
            setTimeout(() => {
                showNotification('‚úÖ Network analysis complete! Discovered 12 high-impact collaboration opportunities.', 'success');
            }, 3500);
        }

        function runRiskAssessment() {
            showNotification('üß† Activating AI risk assessment neural networks...', 'info');
            
            setTimeout(() => {
                showNotification('‚ö° Processing deep learning risk models...', 'info');
            }, 1000);
            
            setTimeout(() => {
                showNotification('üéØ Analyzing financial and clinical risk factors...', 'info');
            }, 2000);
            
            setTimeout(() => {
                showNotification('‚úÖ Risk assessment complete! Low-risk profile with 97.2% confidence.', 'success');
            }, 3500);
        }

        function viewModelDetails(modelType) {
            const modelDetails = {
                'price-optimization': {
                    title: 'Price Optimization Algorithm',
                    description: 'This model uses advanced Lagrangian optimization to find optimal pricing strategies.',
                    formula: 'P* = arg min Œ£(C_i √ó Q_i) + Œª √ó R(P_i)',
                    variables: 'P* = Optimal Price, C_i = Cost Components, Q_i = Quantity Variables, Œª = Regularization Parameter, R(P_i) = Risk Function'
                },
                'market-prediction': {
                    title: 'Market Prediction Engine',
                    description: 'Time-series forecasting using ARIMA models with machine learning enhancements.',
                    formula: 'M_t+1 = Œ± √ó M_t + Œ≤ √ó X_t + Œ≥ √ó E_t',
                    variables: 'M_t = Market State, X_t = External Factors, E_t = Economic Indicators, Œ±,Œ≤,Œ≥ = Model Parameters'
                },
                'network-analysis': {
                    title: 'Network Analysis Model',
                    description: 'Graph theory-based analysis of healthcare provider networks.',
                    formula: 'G(V,E) ‚Üí C = Œ£ w_ij √ó d_ij^(-Œ±)',
                    variables: 'G = Graph, V = Vertices (Providers), E = Edges (Relationships), w_ij = Edge Weights, d_ij = Distance'
                },
                'risk-assessment': {
                    title: 'AI Risk Assessment',
                    description: 'Deep neural network for comprehensive risk evaluation.',
                    formula: 'R = Œ¶(W^T √ó X + b) √ó exp(-Œªt)',
                    variables: 'R = Risk Score, Œ¶ = Activation Function, W = Weight Matrix, X = Input Features, b = Bias, Œª = Decay Rate'
                }
            };

            const model = modelDetails[modelType];
            if (model) {
                showNotification(`üìã Model: ${model.title}\n\nüìù Description: ${model.description}\n\nüßÆ Formula: ${model.formula}\n\nüî¢ Variables: ${model.variables}`, 'info');
            }
        }

        function runDatabaseQuery() {
            const procedureCode = document.getElementById('procedureCode').value;
            const geoRegion = document.getElementById('geoRegion').value;
            const payerType = document.getElementById('payerType').value;
            const analysisType = document.getElementById('analysisType').value;

            if (!procedureCode) {
                showNotification('‚ùå Please enter a procedure code to run the query.', 'error');
                return;
            }

            showNotification('üîç Executing Mathematica database query...', 'info');

            setTimeout(() => {
                showNotification('üìä Analyzing 47.2M+ healthcare transactions...', 'info');
            }, 1000);

            setTimeout(() => {
                showNotification('üßÆ Running statistical calculations...', 'info');
            }, 2000);

            setTimeout(() => {
                // Simulate query results
                const results = generateMockResults(procedureCode, geoRegion, payerType, analysisType);
                displayQueryResults(results);
                showNotification('‚úÖ Query complete! Results displayed below.', 'success');
            }, 3500);
        }

        function generateMockResults(procedure, region, payer, analysis) {
            // Generate realistic mock data based on inputs
            const basePrice = Math.floor(Math.random() * 5000) + 500;
            const variance = basePrice * 0.3;
            
            return {
                avgPrice: basePrice,
                minPrice: Math.floor(basePrice - variance),
                maxPrice: Math.floor(basePrice + variance),
                sampleSize: Math.floor(Math.random() * 10000) + 1000,
                confidence: Math.floor(Math.random() * 10) + 90,
                procedure: procedure,
                region: region || 'All Regions',
                payer: payer || 'All Payers',
                analysis: analysis
            };
        }

        function displayQueryResults(results) {
            // Show results section
            document.getElementById('queryResults').style.display = 'block';

            // Update result metrics
            document.getElementById('avgPrice').textContent = `$${results.avgPrice.toLocaleString()}`;
            document.getElementById('priceRange').textContent = `$${results.minPrice.toLocaleString()} - $${results.maxPrice.toLocaleString()}`;
            document.getElementById('sampleSize').textContent = results.sampleSize.toLocaleString();
            document.getElementById('confidence').textContent = `${results.confidence}%`;

            // Simulate chart rendering
            setTimeout(() => {
                renderPriceChart(results);
            }, 500);
        }

        function renderPriceChart(results) {
            const canvas = document.getElementById('priceDistributionChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Simple bar chart simulation
            ctx.fillStyle = '#007bff';
            ctx.fillRect(50, 150, 80, -100);
            ctx.fillStyle = '#28a745';
            ctx.fillRect(150, 150, 80, -120);
            ctx.fillStyle = '#ffc107';
            ctx.fillRect(250, 150, 80, -80);
            ctx.fillStyle = '#dc3545';
            ctx.fillRect(350, 150, 80, -60);

            // Add labels
            ctx.fillStyle = '#000';
            ctx.font = '12px Arial';
            ctx.fillText('Low', 70, 170);
            ctx.fillText('Avg', 170, 170);
            ctx.fillText('High', 270, 170);
            ctx.fillText('Max', 370, 170);
        }

        function clearQueryForm() {
            document.getElementById('procedureCode').value = '';
            document.getElementById('geoRegion').value = '';
            document.getElementById('payerType').value = '';
            document.getElementById('analysisType').value = 'pricing';
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            document.getElementById('queryResults').style.display = 'none';
            
            showNotification('üßπ Query form cleared successfully.', 'info');
        }

        function saveQuery() {
            const queryData = {
                procedureCode: document.getElementById('procedureCode').value,
                geoRegion: document.getElementById('geoRegion').value,
                payerType: document.getElementById('payerType').value,
                analysisType: document.getElementById('analysisType').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                timestamp: new Date().toISOString()
            };

            // Simulate saving to database
            showNotification('üíæ Saving query to Mathematica database...', 'info');
            
            setTimeout(() => {
                showNotification('‚úÖ Query saved successfully! You can access it from your saved queries.', 'success');
            }, 1500);
        }

        function exportResults(format) {
            showNotification(`üì§ Exporting results to ${format.toUpperCase()}...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Results exported successfully as ${format.toUpperCase()} file!`, 'success');
                
                // Simulate file download
                const filename = `mathematica_price_analysis_${new Date().toISOString().split('T')[0]}.${format}`;
                if (format === 'csv') {
                    downloadFile(filename, 'text/csv', 'Procedure Code,Average Price,Sample Size,Confidence\n99213,$1245,5847,95%');
                }
            }, 1500);
        }

        function downloadFile(filename, contentType, content) {
            const a = document.createElement('a');
            const blob = new Blob([content], { type: contentType });
            a.href = URL.createObjectURL(blob);
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Analytics Tool Functions
        let currentChartType = 'line';
        let currentFilters = {};

        function applyFilters() {
            // Collect filter values
            currentFilters = {
                mathematica: document.getElementById('mathematicaData').checked,
                federalReserve: document.getElementById('federalReserveData').checked,
                cms: document.getElementById('cmsData').checked,
                provider: document.getElementById('providerData').checked,
                timePeriod: document.getElementById('timePeriod').value,
                services: Array.from(document.getElementById('serviceCategories').selectedOptions).map(o => o.value),
                geography: document.getElementById('geoScope').value,
                payers: Array.from(document.getElementById('payerMix').selectedOptions).map(o => o.value)
            };

            showNotification('üîÑ Applying filters and refreshing analytics data...', 'info');
            
            // Show loading overlay
            document.getElementById('chartOverlay').style.display = 'flex';

            setTimeout(() => {
                // Simulate data processing
                showNotification('üìä Processing Mathematica and Federal Reserve data...', 'info');
            }, 1000);

            setTimeout(() => {
                // Hide loading and update chart
                document.getElementById('chartOverlay').style.display = 'none';
                updateChart();
                updateInsights();
                showNotification('‚úÖ Analytics data refreshed successfully!', 'success');
            }, 3000);
        }

        function switchChartType(type) {
            currentChartType = type;
            
            // Update active button
            document.querySelectorAll('.chart-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('active');

            // Update chart
            updateChart();
            showNotification(`üìà Switched to ${type} chart visualization`, 'info');
        }

        function updateChart() {
            const canvas = document.getElementById('mainAnalyticsChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Simulate different chart types
            switch(currentChartType) {
                case 'line':
                    drawLineChart(ctx, canvas);
                    break;
                case 'bar':
                    drawBarChart(ctx, canvas);
                    break;
                case 'scatter':
                    drawScatterPlot(ctx, canvas);
                    break;
                case 'heatmap':
                    drawHeatmap(ctx, canvas);
                    break;
                case 'geo':
                    drawGeographicChart(ctx, canvas);
                    break;
            }
        }

        function drawLineChart(ctx, canvas) {
            // Sample line chart
            ctx.strokeStyle = '#007bff';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            const points = [
                {x: 50, y: 300}, {x: 150, y: 250}, {x: 250, y: 200}, 
                {x: 350, y: 180}, {x: 450, y: 160}, {x: 550, y: 140}, 
                {x: 650, y: 120}, {x: 750, y: 100}
            ];
            
            ctx.moveTo(points[0].x, points[0].y);
            points.forEach(point => ctx.lineTo(point.x, point.y));
            ctx.stroke();
            
            // Add data points
            ctx.fillStyle = '#007bff';
            points.forEach(point => {
                ctx.beginPath();
                ctx.arc(point.x, point.y, 6, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // Add labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('Price Trends Over Time (Mathematica + Fed Data)', 10, 20);
            ctx.fillText('Time ‚Üí', canvas.width - 60, canvas.height - 10);
            ctx.save();
            ctx.translate(15, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Price ($)', -30, 0);
            ctx.restore();
        }

        function drawBarChart(ctx, canvas) {
            const bars = [
                {x: 80, height: 180, color: '#007bff', label: 'Q1'},
                {x: 200, height: 220, color: '#28a745', label: 'Q2'},
                {x: 320, height: 160, color: '#ffc107', label: 'Q3'},
                {x: 440, height: 240, color: '#dc3545', label: 'Q4'},
                {x: 560, height: 200, color: '#6f42c1', label: 'Q1 Proj'}
            ];
            
            const barWidth = 80;
            const baseY = canvas.height - 50;
            
            bars.forEach(bar => {
                ctx.fillStyle = bar.color;
                ctx.fillRect(bar.x, baseY - bar.height, barWidth, bar.height);
                
                // Add labels
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(bar.label, bar.x + barWidth/2, baseY + 20);
                ctx.fillText(`$${Math.floor(bar.height * 100)}K`, bar.x + barWidth/2, baseY - bar.height - 10);
            });
            
            ctx.textAlign = 'left';
            ctx.fillText('Quarterly Revenue Analysis (Federal Reserve Adjusted)', 10, 20);
        }

        function drawScatterPlot(ctx, canvas) {
            // Generate random scatter points
            ctx.fillStyle = '#007bff';
            for(let i = 0; i < 50; i++) {
                const x = Math.random() * (canvas.width - 100) + 50;
                const y = Math.random() * (canvas.height - 100) + 50;
                const size = Math.random() * 8 + 3;
                
                ctx.beginPath();
                ctx.arc(x, y, size, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // Add trend line
            ctx.strokeStyle = '#dc3545';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, canvas.height - 50);
            ctx.lineTo(canvas.width - 50, 50);
            ctx.stroke();
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('Price vs. Quality Correlation (Mathematica Analysis)', 10, 20);
        }

        function drawHeatmap(ctx, canvas) {
            const cellSize = 40;
            const cols = Math.floor(canvas.width / cellSize);
            const rows = Math.floor(canvas.height / cellSize);
            
            for(let i = 0; i < cols; i++) {
                for(let j = 0; j < rows; j++) {
                    const intensity = Math.random();
                    const red = Math.floor(255 * intensity);
                    const blue = Math.floor(255 * (1 - intensity));
                    
                    ctx.fillStyle = `rgb(${red}, 100, ${blue})`;
                    ctx.fillRect(i * cellSize, j * cellSize, cellSize - 1, cellSize - 1);
                }
            }
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText('Regional Price Density Map (Fed Reserve Regions)', 10, 20);
        }

        function drawGeographicChart(ctx, canvas) {
            // Simple US map representation
            ctx.fillStyle = '#e9ecef';
            ctx.fillRect(100, 100, 600, 300);
            
            // Add some "states" with different colors
            const states = [
                {x: 150, y: 150, w: 100, h: 80, color: '#007bff'},
                {x: 270, y: 140, w: 120, h: 90, color: '#28a745'},
                {x: 410, y: 160, w: 110, h: 70, color: '#ffc107'},
                {x: 540, y: 180, w: 100, h: 85, color: '#dc3545'},
                {x: 200, y: 250, w: 150, h: 100, color: '#6f42c1'}
            ];
            
            states.forEach(state => {
                ctx.fillStyle = state.color;
                ctx.fillRect(state.x, state.y, state.w, state.h);
                
                // Add price labels
                ctx.fillStyle = 'white';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                const price = Math.floor(Math.random() * 5000) + 1000;
                ctx.fillText(`$${price}`, state.x + state.w/2, state.y + state.h/2);
            });
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('Geographic Price Distribution (Federal Reserve Districts)', 10, 20);
        }

        function updateInsights() {
            // Update insight cards with simulated data
            document.getElementById('priceTrendInsight').textContent = 
                `Average prices ${Math.random() > 0.5 ? 'increased' : 'decreased'} ${(Math.random() * 5 + 1).toFixed(1)}% compared to Federal Reserve inflation data`;
            
            document.getElementById('optimizationInsight').textContent = 
                `Mathematica models suggest ${(Math.random() * 20 + 5).toFixed(1)}% revenue increase potential`;
            
            document.getElementById('marketPositionInsight').textContent = 
                `Your pricing is ${(Math.random() * 15 + 2).toFixed(1)}% ${Math.random() > 0.5 ? 'above' : 'below'} regional average per Federal Reserve benchmarks`;
        }

        function runStatisticalAnalysis(type) {
            showNotification(`üî¨ Running ${type} analysis on integrated datasets...`, 'info');
            
            setTimeout(() => {
                const results = generateAnalysisResults(type);
                displayAnalysisResults(results);
                showNotification(`‚úÖ ${type.charAt(0).toUpperCase() + type.slice(1)} analysis complete!`, 'success');
            }, 2500);
        }

        function federalReserveAnalysis(type) {
            showNotification(`üèõÔ∏è Analyzing Federal Reserve ${type} data...`, 'info');
            
            setTimeout(() => {
                const results = generateFedAnalysisResults(type);
                displayAnalysisResults(results);
                showNotification(`‚úÖ Federal Reserve ${type} analysis complete!`, 'success');
            }, 2500);
        }

        function mathematicaAnalysis(type) {
            showNotification(`üßÆ Running Mathematica ${type} models...`, 'info');
            
            setTimeout(() => {
                const results = generateMathAnalysisResults(type);
                displayAnalysisResults(results);
                showNotification(`‚úÖ Mathematica ${type} analysis complete!`, 'success');
            }, 2500);
        }

        function generateAnalysisResults(type) {
            return {
                type: type,
                metrics: {
                    'R-squared': (Math.random() * 0.3 + 0.7).toFixed(3),
                    'P-value': (Math.random() * 0.05).toFixed(4),
                    'Confidence': (Math.random() * 10 + 90).toFixed(1) + '%'
                },
                significance: Math.random() > 0.2 ? 'Statistically Significant' : 'Not Significant',
                recommendations: [
                    `${type.charAt(0).toUpperCase() + type.slice(1)} model shows strong predictive power`,
                    'Consider implementing suggested pricing adjustments',
                    'Monitor key variables identified in analysis'
                ]
            };
        }

        function generateFedAnalysisResults(type) {
            return {
                type: `Federal Reserve ${type}`,
                metrics: {
                    'Economic Impact': (Math.random() * 10 + 2).toFixed(1) + '%',
                    'Regional Variation': (Math.random() * 15 + 5).toFixed(1) + '%',
                    'Forecast Accuracy': (Math.random() * 5 + 95).toFixed(1) + '%'
                },
                significance: 'Economically Significant',
                recommendations: [
                    `${type.charAt(0).toUpperCase() + type.slice(1)} trends indicate pricing adjustments needed`,
                    'Align pricing strategy with Federal Reserve projections',
                    'Consider regional economic variations in pricing'
                ]
            };
        }

        function generateMathAnalysisResults(type) {
            return {
                type: `Mathematica ${type}`,
                metrics: {
                    'Model Accuracy': (Math.random() * 5 + 95).toFixed(1) + '%',
                    'Optimization Gain': (Math.random() * 25 + 10).toFixed(1) + '%',
                    'Risk Score': (Math.random() * 20 + 10).toFixed(1)
                },
                significance: 'Mathematically Optimal',
                recommendations: [
                    `${type.charAt(0).toUpperCase() + type.slice(1)} model identifies significant opportunities`,
                    'Implement Mathematica-suggested optimizations',
                    'Regular model recalibration recommended'
                ]
            };
        }

        function displayAnalysisResults(results) {
            document.getElementById('analysisResults').style.display = 'block';
            
            // Update key metrics
            const metricsHtml = Object.entries(results.metrics)
                .map(([key, value]) => `<div class="metric-item"><strong>${key}:</strong> ${value}</div>`)
                .join('');
            document.getElementById('keyMetrics').innerHTML = metricsHtml;
            
            // Update significance
            document.getElementById('significance').innerHTML = `<div class="significance-badge">${results.significance}</div>`;
            
            // Update recommendations
            const recommendationsHtml = results.recommendations
                .map(rec => `<div class="recommendation-item">‚Ä¢ ${rec}</div>`)
                .join('');
            document.getElementById('recommendations').innerHTML = recommendationsHtml;
        }

        function exportAnalyticsData(format) {
            showNotification(`üì§ Exporting analytics data as ${format.toUpperCase()}...`, 'info');
            
            setTimeout(() => {
                const filename = `provider_analytics_${new Date().toISOString().split('T')[0]}.${format}`;
                
                let content = '';
                if (format === 'csv') {
                    content = 'Date,Service,Price,Federal_Reserve_Adj,Mathematica_Score\n2025-01-01,Cardiology,$1250,$1275,95.2\n2025-01-02,Surgery,$3500,$3580,92.1';
                } else if (format === 'json') {
                    content = JSON.stringify({
                        report: 'Provider Analytics Export',
                        generated: new Date().toISOString(),
                        data_sources: ['Mathematica', 'Federal Reserve', 'CMS'],
                        filters: currentFilters,
                        insights: 'Comprehensive analysis results...'
                    }, null, 2);
                }
                
                if (content) {
                    downloadFile(filename, 'text/plain', content);
                }
                
                showNotification(`‚úÖ Analytics data exported successfully as ${format.toUpperCase()}!`, 'success');
            }, 1500);
        }

        function scheduleReport() {
            const frequency = document.getElementById('reportFrequency').value;
            showNotification(`üìÖ Scheduling ${frequency} analytics reports...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ ${frequency.charAt(0).toUpperCase() + frequency.slice(1)} reports scheduled successfully!`, 'success');
            }, 1500);
        }

        function shareAnalytics(platform) {
            showNotification(`üì§ Sharing analytics via ${platform}...`, 'info');
            
            setTimeout(() => {
                if (platform === 'link') {
                    showNotification('üîó Shareable link generated: https://analytics.medpact.com/share/abc123', 'success');
                } else {
                    showNotification(`‚úÖ Analytics shared via ${platform} successfully!`, 'success');
                }
            }, 1500);
        }

        // Healthcare Applications Launcher
        function launchApp(appName) {
            const appDetails = {
                'health-analyzer': {
                    name: 'Health Analyzer',
                    description: 'Wearable biometric integration platform',
                    features: ['50+ Device Integration', 'Real-time Monitoring', 'AI Health Predictions', 'HIPAA Security']
                },
                'telehealth-scheduling': {
                    name: 'Telehealth Scheduling',
                    description: 'Culturally competent telemedicine platform',
                    features: ['Cultural Matching', '40+ Languages', 'Bias-Aware Tools', 'Health Equity Tracking']
                },
                'prescription-refill': {
                    name: 'Prescription Refill System',
                    description: 'Intelligent medication management',
                    features: ['Auto Refill Scheduling', 'Drug Interaction Alerts', 'Adherence Tracking', 'Pharmacy Integration']
                },
                'visits-manager': {
                    name: 'My Visits Manager',
                    description: 'Comprehensive medical record management',
                    features: ['Digital Record Storage', 'OCR Processing', 'EHR Integration', 'Privacy Controls']
                },
                'cultural-health-ai': {
                    name: 'Cultural Health AI Assistant',
                    description: 'Bias-aware AI health guidance',
                    features: ['Bias-Aware AI', 'Cultural Assessments', 'Population-Specific Guidance', 'Continuous Learning']
                },
                'provider-directory': {
                    name: 'Provider Directory Search',
                    description: '2,500+ physician network access',
                    features: ['2,500+ Providers', 'Cultural Matching', 'Real-time Availability', 'Diverse Reviews']
                },
                'health-equity-analytics': {
                    name: 'Health Equity Analytics',
                    description: 'Population-specific health metrics',
                    features: ['Population Tracking', 'Disparity Analysis', 'Predictive Modeling', 'Equity Benchmarks']
                }
            };

            const app = appDetails[appName];
            if (!app) return;

            showNotification(`üöÄ Launching ${app.name}...`, 'info');

            setTimeout(() => {
                showNotification(`üì± Initializing ${app.description}...`, 'info');
            }, 1000);

            setTimeout(() => {
                showNotification(`üîÑ Loading application features: ${app.features.join(', ')}...`, 'info');
            }, 2000);

            setTimeout(() => {
                showNotification(`‚úÖ ${app.name} launched successfully! Full functionality available in enterprise deployment.`, 'success');
                
                // Simulate app interface
                createAppInterface(appName, app);
            }, 3500);
        }

        function createAppInterface(appName, appDetails) {
            // Create modal interface for app demo
            const modal = document.createElement('div');
            modal.className = 'app-modal';
            modal.innerHTML = `
                <div class="app-modal-content">
                    <div class="app-modal-header">
                        <h3><i class="fas fa-mobile-alt"></i> ${appDetails.name} - Demo Interface</h3>
                        <button onclick="closeAppModal()" class="close-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="app-modal-body">
                        <div class="app-demo-interface">
                            <div class="demo-status">
                                <h4>Application Status: <span class="status-active">Active</span></h4>
                                <p>${appDetails.description}</p>
                            </div>
                            <div class="demo-features">
                                <h4>Key Features:</h4>
                                <ul>
                                    ${appDetails.features.map(feature => `<li><i class="fas fa-check"></i> ${feature}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="demo-actions">
                                <button onclick="simulateAppFunction('${appName}')" class="demo-btn">
                                    <i class="fas fa-play"></i> Run Demo Function
                                </button>
                                <button onclick="viewAppDashboard('${appName}')" class="demo-btn">
                                    <i class="fas fa-tachometer-alt"></i> View Dashboard
                                </button>
                                <button onclick="exportAppData('${appName}')" class="demo-btn">
                                    <i class="fas fa-download"></i> Export Data
                                </button>
                            </div>
                            <div class="demo-note">
                                <p><strong>Note:</strong> This is a demonstration interface. Full functionality is available in the enterprise deployment with integrated healthcare systems.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 100);
        }

        function closeAppModal() {
            const modal = document.querySelector('.app-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => modal.remove(), 300);
            }
        }

        function simulateAppFunction(appName) {
            const functions = {
                'health-analyzer': 'Analyzing biometric data from 12 connected devices...',
                'telehealth-scheduling': 'Finding culturally matched providers in your area...',
                'prescription-refill': 'Checking medication inventory and scheduling refills...',
                'visits-manager': 'Processing uploaded medical records with OCR...',
                'cultural-health-ai': 'Generating bias-aware health recommendations...',
                'provider-directory': 'Searching 2,500+ providers with cultural compatibility...',
                'health-equity-analytics': 'Analyzing population health disparities...'
            };

            showNotification(`üîÑ ${functions[appName]}`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Function completed successfully! Results integrated into your health profile.`, 'success');
            }, 2500);
        }

        function viewAppDashboard(appName) {
            showNotification(`üìä Loading ${appName} analytics dashboard...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Dashboard loaded! Comprehensive analytics and insights available.`, 'success');
            }, 1500);
        }

        function exportAppData(appName) {
            showNotification(`üì§ Exporting ${appName} data in HIPAA-compliant format...`, 'info');
            
            setTimeout(() => {
                showNotification(`‚úÖ Data exported successfully! Download includes encrypted health information.`, 'success');
            }, 2000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set default role and update interface
            switchUserRole('provider');
            showNotification('Payer-Provider Collaboration Platform Ready! Select your role above to get started.', 'success');
            
            // Setup upload functionality
            setupDragAndDrop();
            setupFileInputHandlers();

            // Initialize Mathematica database
            setTimeout(() => {
                showNotification('üßÆ Mathematica Price Transparency Database connected and ready!', 'success');
            }, 2000);

            // Initialize analytics tool
            setTimeout(() => {
                updateChart();
                updateInsights();
                showNotification('üìä Advanced Analytics Tool initialized with Mathematica and Federal Reserve integration!', 'success');
            }, 3000);
        });
    </script>
</body>
</html>
